"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[888],{6046:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n,i=a(7294),s=a(7977),r=a(5005),l=a(5293),c=a(3489),o=a(4012),d=a(7179),m=a(8509),u=a(3803),f=a(9521),p=a(6190),v=a(6964),h=a(3918),b=a(3e3),g=a(9635),E=a(9049),w=a(5619),S=a(8425),y=a(5855);function Z(){const e=(0,i.useContext)(p.g),[t,a]=(0,i.useState)(),[Z,N]=(0,i.useState)(!1),P=(0,i.useState)([]);async function R(){if(!(0,v.mg)(e.instancePermissionSet,m.py.ReadMetadata))return a({});const t=await d.Z.getWatchdogStatus(e.instance.id);t.code===u.G.ERROR?(0,b.iT)(P,t.error):a(t.payload)}async function x(t){N(!0);const a=await d.Z.updateWatchdogStatus(e.instance.id,t);a.code===u.G.ERROR&&(0,b.iT)(P,a.error),await R(),N(!1)}if((0,i.useEffect)((()=>{R()}),[e.instance.id]),!t)return i.createElement(i.Fragment,null,(0,b.hP)(P));if(Z)return i.createElement(y.Z,null);const C={autoStart:{type:E.fS.Boolean,name:"fields.instance.watchdog.autostart",defaultValue:t.autoStart,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetAutoStart)},startProfiler:{type:E.fS.Boolean,name:"fields.instance.watchdog.autostartprofiler",defaultValue:t.startProfiler,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetProfiler)},logOutput:{type:E.fS.Boolean,name:"fields.instance.watchdog.logoutput",defaultValue:t.logOutput,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetLogOutput)},port:{type:E.fS.Number,name:"fields.instance.watchdog.port",defaultValue:t.port,min:0,max:65535,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetPort)},visibility:{type:E.fS.Enum,name:"fields.instance.watchdog.visibility",defaultValue:t.visibility,enum:m.Ye,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetVisibility)},securityLevel:{type:E.fS.Enum,name:"fields.instance.watchdog.securitylevel",defaultValue:t.securityLevel,enum:m.ns,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetSecurity)},startupTimeout:{type:E.fS.Number,name:"fields.instance.watchdog.timeout.startup",defaultValue:t.startupTimeout,min:0,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetStartupTimeout)},topicRequestTimeout:{type:E.fS.Number,name:"fields.instance.watchdog.timeout.topic",defaultValue:t.topicRequestTimeout,min:0,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetTopicTimeout)},healthCheckSeconds:{type:E.fS.Number,name:"fields.instance.watchdog.healthcheck",defaultValue:t.healthCheckSeconds,min:0,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetHealthCheckInterval)},dumpOnHealthCheckRestart:{type:E.fS.Boolean,name:"fields.instance.watchdog.dumpOnHealthCheckRestart",defaultValue:t.dumpOnHealthCheckRestart,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.CreateDump)},allowWebClient:{type:E.fS.Boolean,name:"fields.instance.watchdog.allowwebclient",defaultValue:t.allowWebClient,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetWebClient)},additionalParameters:{type:E.fS.String,name:"fields.instance.watchdog.additionalparams",defaultValue:t.additionalParameters,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetAdditionalParameters)},mapThreads:{type:E.fS.Number,name:"fields.instance.watchdog.mapthreads",defaultValue:t.mapThreads,disabled:!(0,v.mg)(e.instancePermissionSet,m.py.SetMapThreads)}},k=Object.values(C).some((e=>!e.disabled)),_=i.createElement(c.Z,{id:"generic.no_perm"},i.createElement(o.Z,{id:"generic.no_perm"})),O=(0,v.mg)(e.instancePermissionSet,m.py.Start),T=(0,v.mg)(e.instancePermissionSet,m.py.Shutdown),V=(0,v.mg)(e.instancePermissionSet,m.py.Restart),W=(0,v.mg)(e.instancePermissionSet,m.py.CreateDump),L=(0,v.mg)(e.instancePermissionSet,m.py.ReadMetadata),G=(0,v.mg)(e.instancePermissionSet,m.py.SoftShutdown)||(0,v.mg)(e.instancePermissionSet,m.py.SoftRestart),z=O||T||V||W,B=(0,v.mg)(e.instancePermissionSet,m.py.ReadRevision);let D=null;return t&&(D={viewDataType:h.a.Watchdog,activeCompileJob:t.activeCompileJob,stagedCompileJob:t.stagedCompileJob}),i.createElement("div",{className:"text-center"},i.createElement(S.t,{obj:t}),(0,b.hP)(P),i.createElement("h2",{className:"text-center"},i.createElement(o.Z,{id:"view.instance.server.status"}),i.createElement(s.Z,{pill:!0,variant:t.status===m.Ni.Online?"success":t.status===m.Ni.Offline?"danger":"warning"},i.createElement(o.Z,{id:`view.instance.server.status.${m.Ni[t.status]}`}))),i.createElement("hr",null),B?i.createElement(h.Z,{viewData:D}):i.createElement(g.Z,{title:"view.instance.no_compile_jobs"}),i.createElement("hr",null),i.createElement("h3",{className:"text-center"},i.createElement(o.Z,{id:"view.instance.server.settings"})),L?null:k?i.createElement(g.Z,{title:"view.instance.no_metadata"}):i.createElement(g.Z,{title:"view.instance.server.no_metadata_and_no_settings"}),i.createElement(w.Z,{fields:C,onSave:x,hideDisabled:!L}),i.createElement("hr",null),i.createElement("h3",{className:"text-center"},i.createElement(o.Z,{id:"view.instance.server.actions"})),z?i.createElement(i.Fragment,null,L?null:i.createElement(g.Z,{title:"view.instance.server.no_metadata_actions"}),i.createElement("div",{className:"text-center mb-3"},i.createElement(l.Z,{overlay:_,show:!O&&void 0},i.createElement(r.Z,{variant:"success",className:"mx-2",onClick:async function(){N(!0);const t=await d.Z.startWatchdog(e.instance.id);t.code===u.G.ERROR?(0,b.iT)(P,t.error):(f.Z.registerCallback(t.payload.id,(()=>{R()})),f.Z.fastmode=5,await R()),N(!1)},disabled:L&&t.status!=m.Ni.Offline||!O},i.createElement(o.Z,{id:"view.instance.server.start"}))),i.createElement(l.Z,{overlay:_,show:!T&&void 0},i.createElement(r.Z,{variant:"danger",className:"mx-2",onClick:async function(){if(!confirm())return;N(!0);const t=await d.Z.stopWatchdog(e.instance.id);t.code===u.G.ERROR?(0,b.iT)(P,t.error):await R(),N(!1)},disabled:L&&t.status==m.Ni.Offline||!T},i.createElement(o.Z,{id:"view.instance.server.stop"}))),i.createElement(l.Z,{overlay:_,show:!V&&void 0},i.createElement(r.Z,{variant:"warning",className:"mx-2",onClick:async function(){if(!confirm())return;N(!0);const t=await d.Z.restartWatchdog(e.instance.id);t.code===u.G.ERROR?(0,b.iT)(P,t.error):(f.Z.registerCallback(t.payload.id,(()=>{R()})),f.Z.fastmode=5,await R()),N(!1)},disabled:L&&t.status==m.Ni.Offline||!V},i.createElement(o.Z,{id:"view.instance.server.restart"}))),i.createElement(l.Z,{overlay:_,show:!W&&void 0},i.createElement(r.Z,{variant:"info",className:"mx-2",onClick:async function(){N(!0);const t=await d.Z.dumpWatchdog(e.instance.id);t.code===u.G.ERROR?(0,b.iT)(P,t.error):f.Z.fastmode=5,N(!1)},disabled:L&&t.status!=m.Ni.Online||!W},i.createElement(o.Z,{id:"view.instance.server.dump"}))))):i.createElement(g.Z,{title:"view.instance.server.no_actions"}),!L&&G?i.createElement(g.Z,{title:"view.instance.server.no_metadata_graceful"}):null,L||G?i.createElement("div",{className:"w-75 mx-auto"},i.createElement(E.ZP,{name:"view.instance.graceful",type:E.fS.Enum,enum:n,tooltip:"view.instance.graceful.desc",defaultValue:t.softRestart?n.Restart:t.softShutdown?n.Stop:n.None,disabled:!G,onChange:e=>{switch(e){case n.None:if(!t?.softRestart&&!t?.softShutdown)return;x({softShutdown:!t.softShutdown&&void 0,softRestart:!t.softRestart&&void 0});break;case n.Stop:if(t?.softShutdown)return;x({softShutdown:!0});break;case n.Restart:if(t?.softRestart)return;x({softRestart:!0})}}})):z?i.createElement(g.Z,{title:"view.instance.server.no_graceful"}):null)}!function(e){e[e.None=0]="None",e[e.Stop=1]="Stop",e[e.Restart=2]="Restart"}(n||(n={}))},7977:function(e,t,a){var n=a(7462),i=a(3366),s=a(4184),r=a.n(s),l=a(7294),c=a(6792),o=["bsPrefix","variant","pill","className","as"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.variant,d=e.pill,m=e.className,u=e.as,f=void 0===u?"span":u,p=(0,i.Z)(e,o),v=(0,c.vE)(a,"badge");return l.createElement(f,(0,n.Z)({ref:t},p,{className:r()(m,v,d&&v+"-pill",s&&v+"-"+s)}))}));d.displayName="Badge",d.defaultProps={pill:!1},t.Z=d},2318:function(e,t,a){var n=a(3366),i=a(7462),s=a(4184),r=a.n(s),l=a(7294),c=a(4680),o=a(6792),d=["bsPrefix","size","hasValidation","className","as"],m=(0,c.Z)("input-group-append"),u=(0,c.Z)("input-group-prepend"),f=(0,c.Z)("input-group-text",{Component:"span"}),p=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.size,c=e.hasValidation,m=e.className,u=e.as,f=void 0===u?"div":u,p=(0,n.Z)(e,d);return a=(0,o.vE)(a,"input-group"),l.createElement(f,(0,i.Z)({ref:t},p,{className:r()(m,a,s&&a+"-"+s,c&&"has-validation")}))}));p.displayName="InputGroup",p.Text=f,p.Radio=function(e){return l.createElement(f,null,l.createElement("input",(0,i.Z)({type:"radio"},e)))},p.Checkbox=function(e){return l.createElement(f,null,l.createElement("input",(0,i.Z)({type:"checkbox"},e)))},p.Append=m,p.Prepend=u,t.Z=p},8966:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(7462),i=a(3366),s=a(4184),r=a.n(s),l=a(7294),c=a(6792),o=a(8358),d=["active","disabled","className","style","activeLabel","children"],m=["children"],u=l.forwardRef((function(e,t){var a=e.active,s=e.disabled,c=e.className,m=e.style,u=e.activeLabel,f=e.children,p=(0,i.Z)(e,d),v=a||s?"span":o.Z;return l.createElement("li",{ref:t,style:m,className:r()(c,"page-item",{active:a,disabled:s})},l.createElement(v,(0,n.Z)({className:"page-link",disabled:s},p),f,a&&u&&l.createElement("span",{className:"sr-only"},u)))}));u.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},u.displayName="PageItem";var f=u;function p(e,t,a){function n(e){var n=e.children,s=(0,i.Z)(e,m);return l.createElement(u,s,l.createElement("span",{"aria-hidden":"true"},n||t),l.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),n.displayName=e,n}var v=p("First","\xab"),h=p("Prev","\u2039","Previous"),b=p("Ellipsis","\u2026","More"),g=p("Next","\u203a"),E=p("Last","\xbb"),w=["bsPrefix","className","children","size"],S=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,o=e.children,d=e.size,m=(0,i.Z)(e,w),u=(0,c.vE)(a,"pagination");return l.createElement("ul",(0,n.Z)({ref:t},m,{className:r()(s,u,d&&u+"-"+d)}),o)}));S.First=v,S.Prev=h,S.Ellipsis=b,S.Item=f,S.Next=g,S.Last=E;var y=S},9611:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(7462),i=a(3366),s=a(4184),r=a.n(s),l=a(7294),c=(a(5638),a(6792)),o=["as","bsPrefix","className","children"],d=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,d=e.bsPrefix,m=e.className,u=e.children,f=(0,i.Z)(e,o);return d=(0,c.vE)(d,"popover-header"),l.createElement(s,(0,n.Z)({ref:t},f,{className:r()(d,m)}),u)})),m=["as","bsPrefix","className","children"],u=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,o=e.bsPrefix,d=e.className,u=e.children,f=(0,i.Z)(e,m);return o=(0,c.vE)(o,"popover-body"),l.createElement(s,(0,n.Z)({ref:t},f,{className:r()(d,o)}),u)})),f=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],p=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.placement,o=e.className,d=e.style,m=e.children,p=e.content,v=e.arrowProps,h=(e.popper,e.show,(0,i.Z)(e,f)),b=(0,c.vE)(a,"popover"),g=((null==s?void 0:s.split("-"))||[])[0];return l.createElement("div",(0,n.Z)({ref:t,role:"tooltip",style:d,"x-placement":g,className:r()(o,b,g&&"bs-popover-"+g)},h),l.createElement("div",(0,n.Z)({className:"arrow"},v)),p?l.createElement(u,null,m):m)}));p.defaultProps={placement:"right"},p.Title=d,p.Content=u;var v=p},5147:function(e,t,a){var n=a(7462),i=a(3366),s=a(4184),r=a.n(s),l=a(7294),c=a(6792),o=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,d=e.striped,m=e.bordered,u=e.borderless,f=e.hover,p=e.size,v=e.variant,h=e.responsive,b=(0,i.Z)(e,o),g=(0,c.vE)(a,"table"),E=r()(s,g,v&&g+"-"+v,p&&g+"-"+p,d&&g+"-striped",m&&g+"-bordered",u&&g+"-borderless",f&&g+"-hover"),w=l.createElement("table",(0,n.Z)({},b,{className:E,ref:t}));if(h){var S=g+"-responsive";return"string"==typeof h&&(S=S+"-"+h),l.createElement("div",{className:S},w)}return w}));t.Z=d}}]);
//# sourceMappingURL=888.54310d2fe363a43d46bf.bundle.js.map