{"version":3,"file":"711.795416a77d9bf589137d.js","mappings":"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","sources":["webpack://tgstation-server-control-panel/./src/components/utils/WIPNotice.tsx","webpack://tgstation-server-control-panel/./src/components/views/Instance/Edit/JobHistory.tsx","webpack://tgstation-server-control-panel/./src/components/views/Instance/InstanceEdit.tsx","webpack://tgstation-server-control-panel/./node_modules/react-bootstrap/esm/Tab.js","webpack://tgstation-server-control-panel/./node_modules/react-bootstrap/esm/TabContainer.js","webpack://tgstation-server-control-panel/./node_modules/react-bootstrap/esm/TabContent.js","webpack://tgstation-server-control-panel/./node_modules/react-bootstrap/esm/TabPane.js"],"sourcesContent":["import React, { ReactNode } from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { MODE, VERSION } from \"../../definitions/constants\";\n\nexport default class WIPNotice extends React.Component {\n    public render(): ReactNode {\n        return (\n            <Card className=\"bg-transparent\" border=\"info\">\n                <Card.Header className=\"bg-info text-dark font-weight-bold\">\n                    <FormattedMessage id=\"generic.wip\" />\n                </Card.Header>\n                <Card.Body>\n                    <Card.Title>\n                        <FormattedMessage id=\"generic.wip.desc\" />\n                        <a href=\"https://github.com/tgstation/Tgstation.Server.ControlPanel/releases/latest\">\n                            https://github.com/tgstation/Tgstation.Server.ControlPanel/releases/latest\n                        </a>\n                    </Card.Title>\n                    <Card.Text as={\"pre\"} className=\"bg-transparent text-info\">\n                        <code>\n                            {`Version: ${VERSION}\\nWebpanel Mode: ${MODE}\\nCurrent route: ${window.location.toString()}`}\n                        </code>\n                    </Card.Text>\n                </Card.Body>\n            </Card>\n        );\n    }\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport JobsClient, { TGSJobResponse } from \"../../../../ApiClient/JobsClient\";\nimport InternalError, { ErrorCode } from \"../../../../ApiClient/models/InternalComms/InternalError\";\nimport { StatusCode } from \"../../../../ApiClient/models/InternalComms/InternalStatus\";\nimport JobsController from \"../../../../ApiClient/util/JobsController\";\nimport { InstanceEditContext } from \"../../../../contexts/InstanceEditContext\";\nimport { RouteData } from \"../../../../utils/routes\";\nimport ErrorAlert from \"../../../utils/ErrorAlert\";\nimport JobCard from \"../../../utils/JobCard\";\nimport Loading from \"../../../utils/Loading\";\nimport PageHelper from \"../../../utils/PageHelper\";\n\nexport default function JobHistory(): JSX.Element {\n    const instanceEditContext = React.useContext(InstanceEditContext);\n\n    const [jobs, setJobs] = useState<TGSJobResponse[]>([]);\n    const [errors, setErrors] = useState<Array<InternalError<ErrorCode> | undefined>>([]);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(\n        RouteData.jobhistorypage.get(instanceEditContext.instance.id) ?? 1\n    );\n    const [maxPage, setMaxPage] = useState<number | undefined>(undefined);\n\n    //const [];\n\n    useEffect(() => {\n        RouteData.jobhistorypage.set(instanceEditContext.instance.id, page);\n        setLoading(true);\n        void loadJobs();\n    }, [page]);\n\n    useEffect(() => {}, [errors]);\n\n    async function loadJobs() {\n        const response = await JobsClient.listJobs(instanceEditContext.instance.id, { page: page });\n        if (response.code === StatusCode.OK) {\n            if (page > response.payload.totalPages && response.payload.totalPages !== 0) setPage(1);\n            setJobs(response.payload.content);\n            setMaxPage(response.payload.totalPages);\n        } else {\n            addError(response.error);\n        }\n        setLoading(false);\n    }\n\n    function addError(error: InternalError<ErrorCode>): void {\n        setErrors(prevState => {\n            const errors = Array.from(prevState);\n            errors.push(error);\n            return errors;\n        });\n    }\n\n    async function onCancel(job: TGSJobResponse) {\n        const status = await JobsClient.deleteJob(job.instanceid, job.id);\n\n        if (status.code === StatusCode.OK) {\n            JobsController.fastmode = 5;\n        } else {\n            addError(status.error);\n        }\n    }\n\n    if (loading) {\n        return <Loading text=\"loading.instance.jobs.list\" />;\n    }\n\n    return (\n        <div>\n            {errors.map((err, index) => {\n                if (!err) return;\n                return (\n                    <ErrorAlert\n                        key={index}\n                        error={err}\n                        onClose={() =>\n                            setErrors(prev => {\n                                const newarr = Array.from(prev);\n                                newarr[index] = undefined;\n                                return newarr;\n                            })\n                        }\n                    />\n                );\n            })}\n            {jobs\n                .sort((a, b) => b.id - a.id)\n                .map(job => (\n                    <JobCard job={job} key={job.id} onCancel={onCancel} />\n                ))}\n            <PageHelper\n                selectPage={newPage => setPage(newPage)}\n                totalPages={maxPage ?? 1}\n                currentPage={page}\n            />\n        </div>\n    );\n}\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { ComponentType } from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Tab from \"react-bootstrap/Tab\";\nimport { FormattedMessage } from \"react-intl\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\n\nimport { ByondRights } from \"../../../ApiClient/generatedcode/_enums\";\nimport { InstancePermissionSetResponse } from \"../../../ApiClient/generatedcode/schemas\";\nimport InstanceClient from \"../../../ApiClient/InstanceClient\";\nimport InstancePermissionSetClient from \"../../../ApiClient/InstancePermissionSetClient\";\nimport InternalError from \"../../../ApiClient/models/InternalComms/InternalError\";\nimport { StatusCode } from \"../../../ApiClient/models/InternalComms/InternalStatus\";\nimport { GeneralContext } from \"../../../contexts/GeneralContext\";\nimport {\n    InstanceEditContext,\n    UnsafeInstanceEditContext\n} from \"../../../contexts/InstanceEditContext\";\nimport { AppRoutes, RouteData } from \"../../../utils/routes\";\nimport AccessDenied from \"../../utils/AccessDenied\";\nimport Loading from \"../../utils/Loading\";\nimport WIPNotice from \"../../utils/WIPNotice\";\nimport Byond from \"./Edit/Byond\";\nimport InstanceSettings from \"./Edit/Config\";\nimport JobHistory from \"./Edit/JobHistory\";\n\ntype IProps = RouteComponentProps<{ id: string; tab?: string }>;\ntype IState = Omit<UnsafeInstanceEditContext, \"user\" | \"serverInfo\"> & {\n    tab: string;\n    instanceid: number;\n};\n\nconst minimumByondPerms =\n    ByondRights.ReadActive |\n    ByondRights.ListInstalled |\n    ByondRights.InstallOfficialOrChangeActiveVersion |\n    ByondRights.InstallCustomVersion;\n\nclass InstanceEdit extends React.Component<IProps, IState> {\n    public declare context: GeneralContext;\n    public static tabs: [\n        string,\n        IconProp,\n        (\n            instancePermissionSet: InstancePermissionSetResponse,\n            generalContext: GeneralContext\n        ) => boolean,\n        ComponentType?\n    ][] = [\n        [\"info\", \"info\", () => true],\n        [\"repository\", \"code-branch\", () => true],\n        [\"deployment\", \"hammer\", () => true],\n        [\"dd\", \"server\", () => true],\n        [\n            \"byond\",\n            \"list-ul\",\n            instancePermissionSet => !!(instancePermissionSet.byondRights & minimumByondPerms),\n            Byond\n        ],\n        [\"chatbots\", \"comments\", () => true],\n        [\"files\", \"folder-open\", () => true],\n        [\"users\", \"users\", () => true],\n        [\"jobs\", \"stream\", () => true, JobHistory],\n        [\"config\", \"cogs\", () => true, InstanceSettings]\n    ];\n\n    public constructor(props: IProps) {\n        super(props);\n\n        this.reloadInstance = this.reloadInstance.bind(this);\n        this.deleteContextError = this.deleteContextError.bind(this);\n\n        RouteData.selectedinstanceid = parseInt(this.props.match.params.id);\n\n        this.state = {\n            tab: props.match.params.tab ?? InstanceEdit.tabs[0][0],\n            errors: new Set(),\n            instance: null,\n            instancePermissionSet: null,\n            reloadInstance: this.reloadInstance,\n            deleteError: this.deleteContextError,\n            instanceid: parseInt(this.props.match.params.id)\n        };\n    }\n    public deleteContextError(error: InternalError): void {\n        this.setState(prev => {\n            const newSet = new Set(prev.errors);\n            newSet.delete(error);\n            return {\n                errors: newSet\n            };\n        });\n    }\n\n    public async componentDidMount(): Promise<void> {\n        await this.reloadInstance();\n    }\n\n    public componentDidUpdate(prevProps: Readonly<IProps>) {\n        if (\n            this.props.match.params.tab &&\n            prevProps.match.params.tab != this.props.match.params.tab\n        ) {\n            this.setState({\n                tab: this.props.match.params.tab\n            });\n        }\n    }\n\n    public async reloadInstance(): Promise<void> {\n        this.setState({\n            instance: null,\n            instancePermissionSet: null\n        });\n        const response = await InstanceClient.getInstance(this.state.instanceid);\n        if (response.code === StatusCode.OK) {\n            this.setState({\n                instance: response.payload\n            });\n\n            const response2 = await InstancePermissionSetClient.getCurrentInstancePermissionSet(\n                this.state.instanceid\n            );\n            if (response2.code === StatusCode.OK) {\n                this.setState({\n                    instancePermissionSet: response2.payload\n                });\n            } else {\n                this.setState(prev => {\n                    const newSet = new Set(prev.errors);\n                    newSet.add(response2.error);\n                    return {\n                        instancePermissionSet: null,\n                        errors: newSet\n                    };\n                });\n            }\n        } else {\n            this.setState(prev => {\n                const newSet = new Set(prev.errors);\n                newSet.add(response.error);\n                return {\n                    instance: null,\n                    errors: newSet\n                };\n            });\n        }\n    }\n\n    public render(): React.ReactNode {\n        if (!this.state.instance || !this.state.instancePermissionSet) {\n            return <Loading text=\"loading.instance\" />;\n        }\n\n        const nav = () => {\n            return (\n                <Nav\n                    defaultActiveKey={this.state.tab}\n                    onSelect={eventKey => {\n                        eventKey = eventKey ?? InstanceEdit.tabs[0][0];\n                        RouteData.selectedinstanceedittab = eventKey;\n                        this.props.history.push(\n                            AppRoutes.instanceedit.link ?? AppRoutes.instanceedit.route\n                        );\n                        this.setState({ tab: eventKey ?? InstanceEdit.tabs[0][0] });\n                    }}\n                    fill\n                    variant=\"pills\"\n                    activeKey={this.state.tab}\n                    className=\"flex-nowrap text-nowrap flex-column hover-bar sticky-top\"\n                    style={{ top: \"8em\" }}>\n                    {InstanceEdit.tabs.map(([tabKey, icon, accessCb, component]) => {\n                        if (!this.state.instancePermissionSet) {\n                            throw Error(\n                                \"this.state.instancePermissionSet is null in instanceedit nav map\"\n                            );\n                        }\n                        const wip = !component;\n                        const accessDenied = !accessCb(\n                            this.state.instancePermissionSet,\n                            this.context\n                        );\n\n                        return (\n                            <Nav.Item key={tabKey}>\n                                <Nav.Link\n                                    eventKey={tabKey}\n                                    bsPrefix=\"nav-link instanceedittab\"\n                                    className={\n                                        (wip ? \"no-access text-white\" : \"\") +\n                                        (accessDenied ? \"no-access text-white font-italic\" : \"\") +\n                                        \" text-left\"\n                                    }>\n                                    <React.Fragment>\n                                        <FontAwesomeIcon\n                                            icon={accessDenied ? \"lock\" : icon}\n                                            fixedWidth\n                                        />\n                                        <div\n                                            className={\n                                                \"tab-text d-inline-block \" +\n                                                (accessDenied ? \"font-weight-lighter\" : \"\")\n                                            }>\n                                            <span className=\"pl-1\">\n                                                <FormattedMessage\n                                                    id={`view.instanceedit.tabs.${tabKey}`}\n                                                />\n                                            </span>\n                                        </div>\n                                    </React.Fragment>\n                                </Nav.Link>\n                            </Nav.Item>\n                        );\n                    })}\n                </Nav>\n            );\n        };\n\n        return (\n            <InstanceEditContext.Provider\n                value={\n                    Object.assign(\n                        { user: this.context.user, serverInfo: this.context.serverInfo },\n                        this.state\n                    ) as InstanceEditContext\n                }>\n                <Card>\n                    <Card.Header className=\"text-center mb-2 sticky-top\">\n                        <h3>\n                            <FormattedMessage\n                                id=\"view.instanceedit.title\"\n                                values={{\n                                    instanceid: this.props.match.params.id,\n                                    instancename: this.state.instance.name\n                                }}\n                            />\n                        </h3>\n                        <h5 className=\"text-white-50\">\n                            <FormattedMessage id={`view.instanceedit.tabs.${this.state.tab}`} />\n                        </h5>\n                    </Card.Header>\n                    <Tab.Container\n                        mountOnEnter\n                        unmountOnExit\n                        id=\"instanceedit\"\n                        activeKey={this.state.tab}>\n                        <div className=\"d-flex flex-row\">\n                            <Card.Body className=\"flex-grow-0\">{nav()}</Card.Body>\n                            <Card.Body className=\"bg-body\">\n                                <Tab.Content>\n                                    {InstanceEdit.tabs.map(([tabKey, , accessCb, Comp]) => {\n                                        if (!this.state.instancePermissionSet) {\n                                            throw Error(\n                                                \"this.state.instancePermissionSet is null in render card map\"\n                                            );\n                                        }\n                                        return (\n                                            <Tab.Pane eventKey={tabKey} key={tabKey}>\n                                                {Comp ? (\n                                                    !accessCb(\n                                                        this.state.instancePermissionSet,\n                                                        this.context\n                                                    ) ? (\n                                                        <AccessDenied />\n                                                    ) : (\n                                                        <Comp />\n                                                    )\n                                                ) : (\n                                                    <WIPNotice />\n                                                )}\n                                            </Tab.Pane>\n                                        );\n                                    })}\n                                </Tab.Content>\n                            </Card.Body>\n                        </div>\n                    </Tab.Container>\n                </Card>\n            </InstanceEditContext.Provider>\n        );\n    }\n}\nInstanceEdit.contextType = GeneralContext;\nexport default withRouter(InstanceEdit);\n","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport TabContainer from './TabContainer';\nimport TabContent from './TabContent';\nimport TabPane from './TabPane';\n\n/* eslint-disable react/require-render-return, react/no-unused-prop-types */\nvar Tab = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Tab, _React$Component);\n\n  function Tab() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Tab.prototype;\n\n  _proto.render = function render() {\n    throw new Error('ReactBootstrap: The `Tab` component is not meant to be rendered! ' + \"It's an abstract component that is only valid as a direct Child of the `Tabs` Component. \" + 'For custom tabs components use TabPane and TabsContainer directly');\n    return null;\n  };\n\n  return Tab;\n}(React.Component);\n\nTab.Container = TabContainer;\nTab.Content = TabContent;\nTab.Pane = TabPane;\nexport default Tab;","import React, { useMemo } from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport TabContext from './TabContext';\nimport SelectableContext from './SelectableContext';\n\nvar TabContainer = function TabContainer(props) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      id = _useUncontrolled.id,\n      generateCustomChildId = _useUncontrolled.generateChildId,\n      onSelect = _useUncontrolled.onSelect,\n      activeKey = _useUncontrolled.activeKey,\n      transition = _useUncontrolled.transition,\n      mountOnEnter = _useUncontrolled.mountOnEnter,\n      unmountOnExit = _useUncontrolled.unmountOnExit,\n      children = _useUncontrolled.children;\n\n  var generateChildId = useMemo(function () {\n    return generateCustomChildId || function (key, type) {\n      return id ? id + \"-\" + type + \"-\" + key : null;\n    };\n  }, [id, generateCustomChildId]);\n  var tabContext = useMemo(function () {\n    return {\n      onSelect: onSelect,\n      activeKey: activeKey,\n      transition: transition,\n      mountOnEnter: mountOnEnter || false,\n      unmountOnExit: unmountOnExit || false,\n      getControlledId: function getControlledId(key) {\n        return generateChildId(key, 'tabpane');\n      },\n      getControllerId: function getControllerId(key) {\n        return generateChildId(key, 'tab');\n      }\n    };\n  }, [onSelect, activeKey, transition, mountOnEnter, unmountOnExit, generateChildId]);\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: tabContext\n  }, /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: onSelect || null\n  }, children));\n};\n\nexport default TabContainer;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"as\", \"className\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar TabContent = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'tab-content');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, decoratedBsPrefix)\n  }));\n});\nexport default TabContent;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"activeKey\", \"getControlledId\", \"getControllerId\"],\n    _excluded2 = [\"bsPrefix\", \"className\", \"active\", \"onEnter\", \"onEntering\", \"onEntered\", \"onExit\", \"onExiting\", \"onExited\", \"mountOnEnter\", \"unmountOnExit\", \"transition\", \"as\", \"eventKey\"];\nimport classNames from 'classnames';\nimport React, { useContext } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport TabContext from './TabContext';\nimport SelectableContext, { makeEventKey } from './SelectableContext';\nimport Fade from './Fade';\n\nfunction useTabContext(props) {\n  var context = useContext(TabContext);\n  if (!context) return props;\n\n  var activeKey = context.activeKey,\n      getControlledId = context.getControlledId,\n      getControllerId = context.getControllerId,\n      rest = _objectWithoutPropertiesLoose(context, _excluded);\n\n  var shouldTransition = props.transition !== false && rest.transition !== false;\n  var key = makeEventKey(props.eventKey);\n  return _extends({}, props, {\n    active: props.active == null && key != null ? makeEventKey(activeKey) === key : props.active,\n    id: getControlledId(props.eventKey),\n    'aria-labelledby': getControllerId(props.eventKey),\n    transition: shouldTransition && (props.transition || rest.transition || Fade),\n    mountOnEnter: props.mountOnEnter != null ? props.mountOnEnter : rest.mountOnEnter,\n    unmountOnExit: props.unmountOnExit != null ? props.unmountOnExit : rest.unmountOnExit\n  });\n}\n\nvar TabPane = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useTabContext = useTabContext(props),\n      bsPrefix = _useTabContext.bsPrefix,\n      className = _useTabContext.className,\n      active = _useTabContext.active,\n      onEnter = _useTabContext.onEnter,\n      onEntering = _useTabContext.onEntering,\n      onEntered = _useTabContext.onEntered,\n      onExit = _useTabContext.onExit,\n      onExiting = _useTabContext.onExiting,\n      onExited = _useTabContext.onExited,\n      mountOnEnter = _useTabContext.mountOnEnter,\n      unmountOnExit = _useTabContext.unmountOnExit,\n      Transition = _useTabContext.transition,\n      _useTabContext$as = _useTabContext.as,\n      Component = _useTabContext$as === void 0 ? 'div' : _useTabContext$as,\n      _ = _useTabContext.eventKey,\n      rest = _objectWithoutPropertiesLoose(_useTabContext, _excluded2);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'tab-pane');\n  if (!active && !Transition && unmountOnExit) return null;\n  var pane = /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    role: \"tabpanel\",\n    \"aria-hidden\": !active,\n    className: classNames(className, prefix, {\n      active: active\n    })\n  }));\n  if (Transition) pane = /*#__PURE__*/React.createElement(Transition, {\n    in: active,\n    onEnter: onEnter,\n    onEntering: onEntering,\n    onEntered: onEntered,\n    onExit: onExit,\n    onExiting: onExiting,\n    onExited: onExited,\n    mountOnEnter: mountOnEnter,\n    unmountOnExit: unmountOnExit\n  }, pane); // We provide an empty the TabContext so `<Nav>`s in `<TabPane>`s don't\n  // conflict with the top level one.\n\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(SelectableContext.Provider, {\n    value: null\n  }, pane));\n});\nTabPane.displayName = 'TabPane';\nexport default TabPane;"],"names":["WIPNotice","className","border","id","href","as","VERSION","MODE","window","location","toString","React","JobHistory","instanceEditContext","InstanceEditContext","useState","jobs","setJobs","errors","setErrors","loading","setLoading","RouteData","instance","page","setPage","undefined","maxPage","setMaxPage","response","JobsClient","code","StatusCode","payload","totalPages","content","addError","error","prevState","Array","from","push","onCancel","job","status","instanceid","JobsController","useEffect","loadJobs","text","map","err","index","key","onClose","prev","newarr","sort","a","b","selectPage","newPage","currentPage","minimumByondPerms","ByondRights","InstanceEdit","props","reloadInstance","bind","deleteContextError","parseInt","match","params","state","tab","tabs","Set","instancePermissionSet","deleteError","this","setState","newSet","delete","prevProps","InstanceClient","response2","InstancePermissionSetClient","add","value","Object","assign","user","context","serverInfo","values","instancename","name","mountOnEnter","unmountOnExit","activeKey","defaultActiveKey","onSelect","eventKey","history","AppRoutes","fill","variant","style","top","tabKey","icon","accessCb","component","Error","wip","accessDenied","bsPrefix","fixedWidth","Comp","byondRights","Byond","InstanceSettings","contextType","GeneralContext","withRouter","Tab","_React$Component","apply","arguments","prototype","render","Container","Content","Pane","_useUncontrolled","generateCustomChildId","generateChildId","transition","children","useMemo","type","tabContext","getControlledId","getControllerId","_excluded","TabContent","_ref","ref","_ref$as","Component","decoratedBsPrefix","_excluded2","TabPane","_useTabContext","useContext","rest","shouldTransition","active","useTabContext","onEnter","onEntering","onEntered","onExit","onExiting","onExited","Transition","_useTabContext$as","prefix","pane","role","in","displayName"],"sourceRoot":""}