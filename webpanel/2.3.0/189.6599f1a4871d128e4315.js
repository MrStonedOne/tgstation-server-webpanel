"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[189],{15402:function(e,t,n){var r=n(75798),o=n(36800),i=n(38592),a=n(65022),s=n(7205);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}t.Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(b,e);var t,n,r,c,u,v,g,m,R=(g=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(g);if(m){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function b(){return f(this,b),R.apply(this,arguments)}return t=b,n=[{key:"listInstances",value:(v=l((function*(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.page,r=void 0===n?1:n,c=t.pageSize,u=void 0===c?s.Z.itemsperpage.value:c;yield a.Z.wait4Init();try{e=yield a.Z.apiClient.InstanceController_List({pageSize:u,page:r})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}return 200===e.status?new i.Z({code:i.G.OK,payload:e.data}):new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:e},e)})})),function(){return v.apply(this,arguments)})},{key:"editInstance",value:(u=l((function*(e){var t;yield a.Z.wait4Init();try{t=yield a.Z.apiClient.InstanceController_Update(null,e),this.emit("instanceChange",e.id)}catch(e){return new i.Z({code:i.G.ERROR,error:e})}switch(t.status){case 200:case 202:var n=t.data;return new i.Z({code:i.G.OK,payload:n});case 410:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.INSTANCE_NO_DB_ENTITY,{errorMessage:t.data})});default:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}})),function(e){return u.apply(this,arguments)})},{key:"createInstance",value:(c=l((function*(e){var t;yield a.Z.wait4Init();try{t=yield a.Z.apiClient.InstanceController_Create(null,e)}catch(e){return new i.Z({code:i.G.ERROR,error:e})}switch(t.status){case 200:case 201:var n=t.data;return this.emit("instanceChange",n.id),new i.Z({code:i.G.OK,payload:n});case 409:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.HTTP_DATA_INEGRITY,{errorMessage:t.data})});default:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}})),function(e){return c.apply(this,arguments)})},{key:"getInstance",value:(r=l((function*(e){var t;yield a.Z.wait4Init();try{t=yield a.Z.apiClient.InstanceController_GetId({id:e})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}switch(t.status){case 200:return new i.Z({code:i.G.OK,payload:t.data});case 410:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.INSTANCE_NO_DB_ENTITY,{errorMessage:t.data})});default:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}})),function(e){return r.apply(this,arguments)})}],n&&d(t.prototype,n),b}(r.S))},60083:function(e,t,n){var r=n(75798),o=n(36800),i=n(38592),a=n(65022);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}t.Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(v,e);var t,n,r,s,p,h,y=(p=v,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(p);if(h){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function v(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=y.call(this))._cachedInstancePermissionSet=new Map,e.loadingInstancePermissionSetInfo=new Map,a.Z.on("purgeCache",(function(){e._cachedInstancePermissionSet.clear()})),e}return t=v,n=[{key:"getCurrentInstancePermissionSet",value:(r=function*(e){var t,n=this;if(yield a.Z.wait4Init(),this._cachedInstancePermissionSet.has(e))return this._cachedInstancePermissionSet.get(e);if(this.loadingInstancePermissionSetInfo.get(e))return yield new Promise((function(e){n.on("loadInstancePermissionSet",(function t(r){e(r),n.removeListener("loadInstancePermissionSet",t)}))}));this.loadingInstancePermissionSetInfo.set(e,!0);try{t=yield a.Z.apiClient.InstancePermissionSetController_Read({Instance:e})}catch(t){var r=new i.Z({code:i.G.ERROR,error:t});return this.emit("loadInstancePermissionSet",r),this.loadingInstancePermissionSetInfo.set(e,!1),r}if(200===t.status){var s=new i.Z({code:i.G.OK,payload:t.data});return this._cachedInstancePermissionSet.set(e,s),this.emit("loadInstancePermissionSet",s),this.loadingInstancePermissionSetInfo.set(e,!1),s}var c=new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)});return this.emit("loadInstancePermissionSet",c),this.loadingInstancePermissionSetInfo.set(e,!1),c},s=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return s.apply(this,arguments)})}],n&&u(t.prototype,n),v}(r.S))},41106:function(e,t,n){var r=n(75798),o=n(36800),i=n(38592),a=n(65022),s=n(7205);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,s,"next",e)}function s(e){d(i,r,o,a,s,"throw",e)}a(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}t.Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(w,e);var t,n,r,c,u,f,d,R,b=(d=w,R=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(d);if(R){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function w(){return h(this,w),b.apply(this,arguments)}return t=w,n=[{key:"listActiveJobs",value:(f=p((function*(e,t){var n,r=t.page,c=void 0===r?1:r,u=t.pageSize,f=void 0===u?s.Z.itemsperpage.value:u;yield a.Z.wait4Init();try{n=yield a.Z.apiClient.JobController_Read({Instance:e,page:c,pageSize:f})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}if(200===n.status){var d=n.data.content.map((function(t){return l(l({},t),{},{instanceid:e})}));return new i.Z({code:i.G.OK,payload:l(l({},n.data),{},{content:d})})}return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})})),function(e,t){return f.apply(this,arguments)})},{key:"getJob",value:(u=p((function*(e,t){var n;yield a.Z.wait4Init();try{n=yield a.Z.apiClient.JobController_GetId({Instance:e,id:t})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}switch(n.status){case 200:var r=l(l({},n.data),{},{instanceid:e});return new i.Z({code:i.G.OK,payload:r});case 404:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.JOB_JOB_NOT_FOUND,{errorMessage:n.data})});default:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})}})),function(e,t){return u.apply(this,arguments)})},{key:"deleteJob",value:(c=p((function*(e,t){var n;yield a.Z.wait4Init();try{n=yield a.Z.apiClient.JobController_Delete({Instance:e,id:t})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}switch(n.status){case 202:var r=l(l({},n.data),{},{instanceid:e});return new i.Z({code:i.G.OK,payload:r});case 404:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.JOB_JOB_NOT_FOUND,{errorMessage:n.data})});case 410:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.JOB_JOB_COMPLETE,{void:!0})});default:return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})}})),function(e,t){return c.apply(this,arguments)})},{key:"listJobs",value:(r=p((function*(e,t){var n,r=t.page,c=void 0===r?1:r,u=t.pageSize,f=void 0===u?s.Z.itemsperpage.value:u;yield a.Z.wait4Init();try{n=yield a.Z.apiClient.JobController_List({Instance:e,pageSize:f,page:c})}catch(e){return new i.Z({code:i.G.ERROR,error:e})}if(200===n.status){var d=n.data.content.map((function(t){return l(l({},t),{},{instanceid:e})}));return new i.Z({code:i.G.OK,payload:l(l({},n.data),{},{content:d})})}return new i.Z({code:i.G.ERROR,error:new o.ZP(o.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})})),function(e,t){return r.apply(this,arguments)})}],n&&y(t.prototype,n),w}(r.S))},65022:function(e,t,n){var r,o,i=n(28418),a=n(2486),s=n(75798),c=n(39248),u=n(36800),l=n(38592),f=n(7205),d=n(26011),p=n(34477);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,s,"next",e)}function s(e){y(i,r,o,a,s,"throw",e)}a(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function R(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}t.Z=new(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(S,e);var t,r,o,s,h,y,O,P=(y=S,O=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(y);if(O){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function S(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(e=P.call(this)).apiClient=void 0,e.api=void 0,e.initialized=!1,e.loadingServerInfo=!1,e._serverInfo=void 0,e.autoLogin=!0,e.loggingIn=!1,e.getServerInfo=e.getServerInfo.bind(b(e)),p.Z.addHook(e.getServerInfo),e.on("purgeCache",(function(){e._serverInfo=void 0,d.Z.token&&p.Z.runHooks(d.Z.token)})),f.Z.apipath.callback=function(){console.log("Reinitializing API"),e.initApi().then((function(){console.log("API Reinitialized")})).catch((function(){window.location.reload()}))},e}return t=S,r=[{key:"serverInfo",get:function(){return this._serverInfo}},{key:"initApi",value:(h=v((function*(){var e=this;console.log("Initializing API client"),console.time("APIInit");var t=(yield n.e(210).then(n.t.bind(n,53210,19))).default;this.api=new i.OpenAPIClientAxios({definition:t,axiosConfigDefaults:{baseURL:f.Z.apipath.value,withCredentials:!1,headers:{Accept:"application/json",Api:"Tgstation.Server.Api/"+a.Gn,"Webpanel-Version":a.q4},validateStatus:function(e){return!S.globalHandledCodes.includes(e)}}}),this.apiClient=yield this.api.init(),this.apiClient.interceptors.request.use(function(){var t=v((function*(t){if("https://example.org:5000"===f.Z.apipath.value){var n=new u.ZP(u.jK.NO_APIPATH,{void:!0});return Promise.reject(n)}if("/"!==t.url&&""!==t.url){var r=yield e.wait4Token();t.headers.Authorization="Bearer "+r.bearer}return t}));return function(e){return t.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),this.apiClient.interceptors.response.use((function(e){return e}),(function(t){var n=t;if((null==n?void 0:n.code)===u.jK.NO_APIPATH)return Promise.reject(n);if(!(t.response&&t.response.status&&S.globalHandledCodes.includes(t.response.status))){var r=t,o=new u.ZP(u.jK.AXIOS,{jsError:r},t.response);return Promise.reject(o)}var i=t.response;switch(t.response.status){case 400:var a=i.data,s=new u.ZP(u.jK.HTTP_BAD_REQUEST,{errorMessage:a},i);return Promise.reject(s);case 401:var c=t.config;if(("/"===c.url||""===c.url)&&"post"===c.method)return Promise.resolve(t.response);if(e.autoLogin)return e.login().then((function(n){switch(n.code){case l.G.OK:return e.api.client.request(t.config);case l.G.ERROR:e.emit("accessDenied"),e.logout();var r=new u.ZP(u.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(r)}}));e.emit("accessDenied");var f=new u.ZP(u.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(f);case 403:var d=t.config;if("/"!==d.url&&""!==d.url||"post"!==d.method){e.emit("accessDenied");var p=new u.ZP(u.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(p)}return Promise.resolve(t.response);case 406:var h=new u.ZP(u.jK.HTTP_NOT_ACCEPTABLE,{void:!0},i);return Promise.reject(h);case 409:var y=i.data,v=t.config;if("/Administration/Logs"===v.url&&"get"===v.method)return Promise.resolve(t.response);var g=new u.ZP(u.jK.HTTP_DATA_INEGRITY,{errorMessage:y},i);return Promise.reject(g);case 426:var m=i.data,R=new u.ZP(u.jK.HTTP_API_MISMATCH,{errorMessage:m},i);return Promise.reject(R);case 500:var b=i.data,w=new u.ZP(u.jK.HTTP_SERVER_ERROR,{errorMessage:b},i);return Promise.reject(w);case 501:var O=i.data,P=new u.ZP(u.jK.HTTP_UNIMPLEMENTED,{errorMessage:O},i);return Promise.reject(P);case 503:return console.log("Server not ready, delaying request",t.config),new Promise((function(e){setTimeout(e,5e3)})).then((function(){return e.api.client.request(t.config)}));default:var E=new u.ZP(u.jK.UNHANDLED_GLOBAL_RESPONSE,{axiosResponse:i},i);return Promise.reject(E)}})),console.timeEnd("APIInit"),this.initialized=!0,this.emit("initialized")})),function(){return h.apply(this,arguments)})},{key:"wait4Init",value:function(){var e=this;return new Promise((function(t){e.initialized?t():e.on("initialized",(function(){return t()}))}))}},{key:"wait4Token",value:function(){var e=this;return new Promise((function(t){d.Z.isTokenValid()?t(d.Z.token):e.on("tokenAvailable",(function(e){t(e)}))}))}},{key:"login",value:(s=v((function*(e){var t,n=this;yield this.wait4Init(),console.log("Attempting login");var r,o=!1;if(e?d.Z.credentials=e:(null===(t=d.Z.credentials)||void 0===t?void 0:t.type)===c.P.OAuth&&(this.logout(),o=!0),o||!d.Z.credentials)return new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.LOGIN_NOCREDS,{void:!0})});if(this.loggingIn)return yield new Promise((function(e){n.on("loadLoginInfo",(function t(r){e(r),n.removeListener("loadLoginInfo",t)}))}));this.loggingIn=!0;try{r=d.Z.credentials.type==c.P.Password?yield this.apiClient.HomeController_CreateToken({OAuthProvider:void 0},null,{auth:{username:d.Z.credentials.userName,password:d.Z.credentials.password}}):yield this.apiClient.HomeController_CreateToken({OAuthProvider:d.Z.credentials.provider},null,{headers:{Authorization:"OAuth ".concat(d.Z.credentials.token)}})}catch(e){var i=new l.Z({code:l.G.ERROR,error:e});return this.emit("loadLoginInfo",i),i}finally{this.loggingIn=!1}switch(r.status){case 200:console.log("Login success");var a=r.data;d.Z.token=a,this.emit("tokenAvailable",a),p.Z.runHooks(a);var s=new l.Z({code:l.G.OK,payload:a});return this.emit("loadLoginInfo",s),s;case 401:this.logout(),console.log("Failed to login");var f=new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.LOGIN_FAIL,{void:!0},r)});return this.emit("loadLoginInfo",f),f;case 403:this.logout(),console.log("Account disabled");var h=new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.LOGIN_DISABLED,{void:!0},r)});return this.emit("loadLoginInfo",h),h;case 429:this.logout(),console.log("rate limited");var y=new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.LOGIN_RATELIMIT,{errorMessage:r.data},r)});return this.emit("loadLoginInfo",y),y;default:var v=new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)});return this.emit("loadLoginInfo",v),v}})),function(e){return s.apply(this,arguments)})},{key:"logout",value:function(){d.Z.isTokenValid()&&(console.log("Logging out"),d.Z.credentials=void 0,d.Z.token=void 0,this.emit("purgeCache"),this.emit("logout"))}},{key:"getServerInfo",value:(o=v((function*(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(yield this.wait4Init(),this._serverInfo&&!r)return this._serverInfo;if(this.loadingServerInfo)return new Promise((function(e){n._serverInfo?e(n._serverInfo):n.on("loadServerInfo",(function t(r){e(r),n.removeListener("loadServerInfo",t)}))}));this.loadingServerInfo=!0;try{t=yield this.apiClient.HomeController_Home()}catch(e){var o=new l.Z({code:l.G.ERROR,error:e});return this.emit("loadServerInfo",o),this.loadingServerInfo=!1,o}if(200===t.status){var i=t.data,a=new l.Z({code:l.G.OK,payload:i});return this.emit("loadServerInfo",a),this._serverInfo=a,this.loadingServerInfo=!1,a}var s=new l.Z({code:l.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)});return this.emit("loadServerInfo",s),this.loadingServerInfo=!1,s})),function(e){return o.apply(this,arguments)})}],r&&g(t.prototype,r),S}(s.S),r.globalHandledCodes=[400,401,403,406,409,426,500,501,503],o)},69644:function(e,t,n){var r=n(75798),o=n(48155),i=n(36800),a=n(38592),s=n(65022),c=n(7205),u=n(26011),l=n(34477);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,s,"next",e)}function s(e){y(i,r,o,a,s,"throw",e)}a(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function R(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}t.Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(E,e);var t,n,r,f,d,h,y,O,P,S=(O=E,P=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(O);if(P){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function E(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(e=S.call(this))._cachedUser=void 0,e.loadingUserInfo=!1,e.createAllUsersWithAA=!1,e.getCurrentUser=e.getCurrentUser.bind(b(e)),l.Z.addHook((function(){return e.getCurrentUser()})),s.Z.on("purgeCache",(function(){e._cachedUser=void 0})),e}return t=E,n=[{key:"cachedUser",get:function(){return this._cachedUser}},{key:"editUser",value:(y=v((function*(e){var t;yield s.Z.wait4Init();try{t=yield s.Z.apiClient.UserController_Update(null,e)}catch(e){return new a.Z({code:a.G.ERROR,error:e})}switch(t.status){case 200:var n=yield this.getCurrentUser();return n.code!=a.G.OK?new a.Z({code:a.G.ERROR,error:n.error}):(n.payload.id==e.id&&s.Z.emit("purgeCache"),new a.Z({code:a.G.OK,payload:t.data}));case 404:var r=t.data;return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.USER_NOT_FOUND,{errorMessage:r})});default:return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}})),function(e){return y.apply(this,arguments)})},{key:"getCurrentUser",value:(h=v((function*(e){var t,n=this;if(yield s.Z.wait4Init(),!u.Z.isTokenValid())return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.HTTP_ACCESS_DENIED,{void:!0})});if(this._cachedUser&&!e)return this._cachedUser;if(this.loadingUserInfo)return yield new Promise((function(e){n.on("loadUserInfo",(function t(r){e(r),n.removeListener("loadUserInfo",t)}))}));this.loadingUserInfo=!0;try{t=yield s.Z.apiClient.UserController_Read()}catch(e){var r=new a.Z({code:a.G.ERROR,error:e});return this.emit("loadUserInfo",r),this.loadingUserInfo=!1,r}if(200===t.status){var o=new a.Z({code:a.G.OK,payload:t.data});return this._cachedUser=o,this.emit("loadUserInfo",o),this.loadingUserInfo=!1,o}var c=new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)});return this.emit("loadUserInfo",c),this.loadingUserInfo=!1,c})),function(e){return h.apply(this,arguments)})},{key:"listUsers",value:(d=v((function*(e){var t,n=e.page,r=void 0===n?1:n,o=e.pageSize,u=void 0===o?c.Z.itemsperpage.value:o;yield s.Z.wait4Init();try{t=yield s.Z.apiClient.UserController_List({page:r,pageSize:u})}catch(e){return new a.Z({code:a.G.ERROR,error:e})}if(200===t.status){var l=t.data.content.sort((function(e,t){return e.id-t.id}));return new a.Z({code:a.G.OK,payload:p(p({},t.data),{},{content:l})})}return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})})),function(e){return d.apply(this,arguments)})},{key:"getUser",value:(f=v((function*(e){var t;yield s.Z.wait4Init();try{t=yield s.Z.apiClient.UserController_GetId({id:e})}catch(e){return new a.Z({code:a.G.ERROR,error:e})}switch(t.status){case 200:return new a.Z({code:a.G.OK,payload:t.data});case 404:var n=t.data;return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.USER_NOT_FOUND,{errorMessage:n})});default:return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}})),function(e){return f.apply(this,arguments)})},{key:"createUser",value:(r=v((function*(e){if(yield s.Z.wait4Init(),void 0===e.enabled&&(e.enabled=!0),this.createAllUsersWithAA){e.instanceManagerRights=0,e.administrationRights=0;for(var t=0,n=Object.values(o.c2);t<n.length;t++){var r=n[t];"number"==typeof r&&(e.instanceManagerRights+=r)}for(var c=0,u=Object.values(o.oj);c<u.length;c++){var l=u[c];"number"==typeof l&&(e.administrationRights+=l)}}var f;try{f=yield s.Z.apiClient.UserController_Create(null,e)}catch(e){return new a.Z({code:a.G.ERROR,error:e})}switch(f.status){case 201:return new a.Z({code:a.G.OK,payload:f.data});case 410:var d=f.data;return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.USER_NO_SYS_IDENT,{errorMessage:d})});default:return new a.Z({code:a.G.ERROR,error:new i.ZP(i.jK.UNHANDLED_RESPONSE,{axiosResponse:f},f)})}})),function(e){return r.apply(this,arguments)})}],n&&g(t.prototype,n),E}(r.S))},75798:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.d(t,{S:function(){return c}});var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)});function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=r.call(this),null==window.clients&&(window.clients={}),console.log(e.constructor.name,a(e)),window.clients[e.constructor.name]=a(e),e}return c}(n(12527).TypedEmitter)},48155:function(e,t,n){var r,o,i,a,s,c,u,l,f,d,p,h,y,v,g,m,R,b;n.d(t,{oj:function(){return r},D8:function(){return o},c7:function(){return c},jK:function(){return p},c2:function(){return h},O4:function(){return v},KT:function(){return R}}),function(e){e[e.None=0]="None",e[e.WriteUsers=1]="WriteUsers",e[e.RestartHost=2]="RestartHost",e[e.ChangeVersion=4]="ChangeVersion",e[e.EditOwnPassword=8]="EditOwnPassword",e[e.ReadUsers=16]="ReadUsers",e[e.DownloadLogs=32]="DownloadLogs",e[e.EditOwnOAuthConnections=64]="EditOwnOAuthConnections"}(r||(r={})),function(e){e[e.None=0]="None",e[e.ReadActive=1]="ReadActive",e[e.ListInstalled=2]="ListInstalled",e[e.InstallOfficialOrChangeActiveVersion=4]="InstallOfficialOrChangeActiveVersion",e[e.CancelInstall=8]="CancelInstall",e[e.InstallCustomVersion=16]="InstallCustomVersion"}(o||(o={})),function(e){e[e.None=0]="None",e[e.WriteEnabled=1]="WriteEnabled",e[e.WriteProvider=2]="WriteProvider",e[e.WriteChannels=4]="WriteChannels",e[e.WriteConnectionString=8]="WriteConnectionString",e[e.ReadConnectionString=16]="ReadConnectionString",e[e.Read=32]="Read",e[e.Create=64]="Create",e[e.Delete=128]="Delete",e[e.WriteName=256]="WriteName",e[e.WriteReconnectionInterval=512]="WriteReconnectionInterval",e[e.WriteChannelLimit=1024]="WriteChannelLimit"}(i||(i={})),function(e){e[e.Irc=0]="Irc",e[e.Discord=1]="Discord"}(a||(a={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.List=4]="List",e[e.Delete=8]="Delete"}(s||(s={})),function(e){e[e.Disallowed=0]="Disallowed",e[e.HostWrite=1]="HostWrite",e[e.SystemIdentityWrite=2]="SystemIdentityWrite"}(c||(c={})),function(e){e[e.None=0]="None",e[e.ReadRevision=1]="ReadRevision",e[e.SetPort=2]="SetPort",e[e.SetAutoStart=4]="SetAutoStart",e[e.SetSecurity=8]="SetSecurity",e[e.ReadMetadata=16]="ReadMetadata",e[e.SetWebClient=32]="SetWebClient",e[e.SoftRestart=64]="SoftRestart",e[e.SoftShutdown=128]="SoftShutdown",e[e.Restart=256]="Restart",e[e.Shutdown=512]="Shutdown",e[e.Start=1024]="Start",e[e.SetStartupTimeout=2048]="SetStartupTimeout",e[e.SetHeartbeatInterval=4096]="SetHeartbeatInterval",e[e.CreateDump=8192]="CreateDump",e[e.SetTopicTimeout=16384]="SetTopicTimeout",e[e.SetAdditionalParameters=32768]="SetAdditionalParameters",e[e.SetVisibility=65536]="SetVisibility"}(u||(u={})),function(e){e[e.Trusted=0]="Trusted",e[e.Safe=1]="Safe",e[e.Ultrasafe=2]="Ultrasafe"}(l||(l={})),function(e){e[e.Public=0]="Public",e[e.Private=1]="Private",e[e.Invisible=2]="Invisible"}(f||(f={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Compile=2]="Compile",e[e.CancelCompile=4]="CancelCompile",e[e.SetDme=8]="SetDme",e[e.SetApiValidationPort=16]="SetApiValidationPort",e[e.CompileJobs=32]="CompileJobs",e[e.SetSecurityLevel=64]="SetSecurityLevel",e[e.SetApiValidationRequirement=128]="SetApiValidationRequirement",e[e.SetTimeout=256]="SetTimeout"}(d||(d={})),function(e){e[e.InternalServerError=0]="InternalServerError",e[e.ApiMismatch=1]="ApiMismatch",e[e.ModelValidationFailure=2]="ModelValidationFailure",e[e.IOError=3]="IOError",e[e.BadHeaders=4]="BadHeaders",e[e.TokenWithToken=5]="TokenWithToken",e[e.DatabaseIntegrityConflict=6]="DatabaseIntegrityConflict",e[e.MissingHostWatchdog=7]="MissingHostWatchdog",e[e.CannotChangeServerSuite=8]="CannotChangeServerSuite",e[e.RemoteApiError=9]="RemoteApiError",e[e.ServerUpdateInProgress=10]="ServerUpdateInProgress",e[e.UserNameChange=11]="UserNameChange",e[e.UserSidChange=12]="UserSidChange",e[e.UserMismatchNameSid=13]="UserMismatchNameSid",e[e.UserMismatchPasswordSid=14]="UserMismatchPasswordSid",e[e.UserPasswordLength=15]="UserPasswordLength",e[e.UserColonInName=16]="UserColonInName",e[e.UserMissingName=17]="UserMissingName",e[e.InstanceRelocateOnline=18]="InstanceRelocateOnline",e[e.InstanceAtExistingPath=19]="InstanceAtExistingPath",e[e.InstanceDetachOnline=20]="InstanceDetachOnline",e[e.InstanceAtConflictingPath=21]="InstanceAtConflictingPath",e[e.InstanceLimitReached=22]="InstanceLimitReached",e[e.InstanceWhitespaceName=23]="InstanceWhitespaceName",e[e.InstanceHeaderRequired=24]="InstanceHeaderRequired",e[e.RequiresPosixSystemIdentity=25]="RequiresPosixSystemIdentity",e[e.ConfigurationFileUpdated=26]="ConfigurationFileUpdated",e[e.ConfigurationDirectoryNotEmpty=27]="ConfigurationDirectoryNotEmpty",e[e.DEPRECATED_UnusedErrorCode1=28]="DEPRECATED_UnusedErrorCode1",e[e.RepoMismatchUserAndAccessToken=29]="RepoMismatchUserAndAccessToken",e[e.RepoCloning=30]="RepoCloning",e[e.RepoBusy=31]="RepoBusy",e[e.RepoExists=32]="RepoExists",e[e.RepoMissing=33]="RepoMissing",e[e.RepoMismatchShaAndReference=34]="RepoMismatchShaAndReference",e[e.RepoMismatchShaAndUpdate=35]="RepoMismatchShaAndUpdate",e[e.DEPRECATED_UnusedErrorCode2=36]="DEPRECATED_UnusedErrorCode2",e[e.RepoDuplicateTestMerge=37]="RepoDuplicateTestMerge",e[e.RepoWhitespaceCommitterName=38]="RepoWhitespaceCommitterName",e[e.RepoWhitespaceCommitterEmail=39]="RepoWhitespaceCommitterEmail",e[e.ApiPageTooLarge=40]="ApiPageTooLarge",e[e.ApiInvalidPageOrPageSize=41]="ApiInvalidPageOrPageSize",e[e.ChatBotWrongChannelType=42]="ChatBotWrongChannelType",e[e.ChatBotWhitespaceConnectionString=43]="ChatBotWhitespaceConnectionString",e[e.ChatBotWhitespaceName=44]="ChatBotWhitespaceName",e[e.ChatBotProviderMissing=45]="ChatBotProviderMissing",e[e.DEPRECATED_UnusedErrorCode3=46]="DEPRECATED_UnusedErrorCode3",e[e.ChatBotMax=47]="ChatBotMax",e[e.ChatBotMaxChannels=48]="ChatBotMaxChannels",e[e.ByondDirectXInstallFail=49]="ByondDirectXInstallFail",e[e.ByondDownloadFail=50]="ByondDownloadFail",e[e.ByondNoVersionsInstalled=51]="ByondNoVersionsInstalled",e[e.DreamMakerNeverValidated=52]="DreamMakerNeverValidated",e[e.DreamMakerInvalidValidation=53]="DreamMakerInvalidValidation",e[e.CannotRemoveLastAuthenticationOption=54]="CannotRemoveLastAuthenticationOption",e[e.DreamMakerNoDme=55]="DreamMakerNoDme",e[e.DreamMakerMissingDme=56]="DreamMakerMissingDme",e[e.DreamMakerExitCode=57]="DreamMakerExitCode",e[e.DreamMakerCompileJobInProgress=58]="DreamMakerCompileJobInProgress",e[e.InstanceMissingDreamDaemonSettings=59]="InstanceMissingDreamDaemonSettings",e[e.InstanceMissingDreamMakerSettings=60]="InstanceMissingDreamMakerSettings",e[e.InstanceMissingRepositorySettings=61]="InstanceMissingRepositorySettings",e[e.InstanceUpdateTestMergeConflict=62]="InstanceUpdateTestMergeConflict",e[e.RepoCredentialsRequired=63]="RepoCredentialsRequired",e[e.RepoCannotAuthenticate=64]="RepoCannotAuthenticate",e[e.RepoReferenceRequired=65]="RepoReferenceRequired",e[e.WatchdogRunning=66]="WatchdogRunning",e[e.WatchdogCompileJobCorrupted=67]="WatchdogCompileJobCorrupted",e[e.WatchdogStartupFailed=68]="WatchdogStartupFailed",e[e.WatchdogStartupTimeout=69]="WatchdogStartupTimeout",e[e.RepoUnsupportedTestMergeRemote=70]="RepoUnsupportedTestMergeRemote",e[e.RepoSwappedShaOrReference=71]="RepoSwappedShaOrReference",e[e.RepoMergeConflict=72]="RepoMergeConflict",e[e.RepoReferenceNotTracking=73]="RepoReferenceNotTracking",e[e.RepoTestMergeConflict=74]="RepoTestMergeConflict",e[e.InstanceNotAtWhitelistedPath=75]="InstanceNotAtWhitelistedPath",e[e.DreamDaemonDoubleSoft=76]="DreamDaemonDoubleSoft",e[e.DeploymentPagerRunning=77]="DeploymentPagerRunning",e[e.DreamDaemonPortInUse=78]="DreamDaemonPortInUse",e[e.PostDeployFailure=79]="PostDeployFailure",e[e.WatchdogNotRunning=80]="WatchdogNotRunning",e[e.ResourceNotPresent=81]="ResourceNotPresent",e[e.ResourceNeverPresent=82]="ResourceNeverPresent",e[e.GitHubApiRateLimit=83]="GitHubApiRateLimit",e[e.JobStopped=84]="JobStopped",e[e.MissingGCore=85]="MissingGCore",e[e.GCoreFailure=86]="GCoreFailure",e[e.RepoTestMergeInvalidRemote=87]="RepoTestMergeInvalidRemote",e[e.ByondNonExistentCustomVersion=88]="ByondNonExistentCustomVersion",e[e.DreamDaemonOffline=89]="DreamDaemonOffline",e[e.InstanceOffline=90]="InstanceOffline",e[e.ChatCannotConnectProvider=91]="ChatCannotConnectProvider",e[e.ByondDreamDaemonFirewallFail=92]="ByondDreamDaemonFirewallFail",e[e.NoPortsAvailable=93]="NoPortsAvailable",e[e.PortNotAvailable=94]="PortNotAvailable",e[e.AdminUserCannotOAuth=95]="AdminUserCannotOAuth",e[e.OAuthProviderDisabled=96]="OAuthProviderDisabled",e[e.FileUploadExpired=97]="FileUploadExpired",e[e.UserGroupAndPermissionSet=98]="UserGroupAndPermissionSet",e[e.UserGroupNotEmpty=99]="UserGroupNotEmpty",e[e.UserLimitReached=100]="UserLimitReached",e[e.UserGroupLimitReached=101]="UserGroupLimitReached",e[e.DeploymentTimeout=102]="DeploymentTimeout"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Create=2]="Create",e[e.Rename=4]="Rename",e[e.Relocate=8]="Relocate",e[e.SetOnline=16]="SetOnline",e[e.Delete=32]="Delete",e[e.List=64]="List",e[e.SetConfiguration=128]="SetConfiguration",e[e.SetAutoUpdate=256]="SetAutoUpdate",e[e.SetChatBotLimit=512]="SetChatBotLimit",e[e.GrantPermissions=1024]="GrantPermissions"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.Create=4]="Create"}(y||(y={})),function(e){e.GitHub="GitHub",e.Discord="Discord",e.TGForums="TGForums",e.Keycloak="Keycloak"}(v||(v={})),function(e){e[e.Unknown=0]="Unknown",e[e.GitHub=1]="GitHub",e[e.GitLab=2]="GitLab"}(g||(g={})),function(e){e[e.None=0]="None",e[e.CancelPendingChanges=1]="CancelPendingChanges",e[e.SetOrigin=2]="SetOrigin",e[e.SetSha=4]="SetSha",e[e.MergePullRequest=8]="MergePullRequest",e[e.UpdateBranch=16]="UpdateBranch",e[e.ChangeCommitter=32]="ChangeCommitter",e[e.ChangeTestMergeCommits=64]="ChangeTestMergeCommits",e[e.ChangeCredentials=128]="ChangeCredentials",e[e.SetReference=256]="SetReference",e[e.Read=512]="Read",e[e.ChangeAutoUpdateSettings=1024]="ChangeAutoUpdateSettings",e[e.Delete=2048]="Delete",e[e.CancelClone=4096]="CancelClone",e[e.ChangeSubmoduleUpdate=8192]="ChangeSubmoduleUpdate"}(m||(m={})),function(e){e[e.Administration=0]="Administration",e[e.InstanceManager=1]="InstanceManager",e[e.Repository=2]="Repository",e[e.Byond=3]="Byond",e[e.DreamMaker=4]="DreamMaker",e[e.DreamDaemon=5]="DreamDaemon",e[e.ChatBots=6]="ChatBots",e[e.Configuration=7]="Configuration",e[e.InstancePermissionSet=8]="InstancePermissionSet"}(R||(R={})),function(e){e[e.Offline=0]="Offline",e[e.Restoring=1]="Restoring",e[e.Online=2]="Online",e[e.DelayedRestart=3]="DelayedRestart"}(b||(b={}))},39248:function(e,t,n){var r;n.d(t,{P:function(){return r}}),function(e){e[e.Password=0]="Password",e[e.OAuth=1]="OAuth"}(r||(r={}))},36800:function(e,t,n){n.d(t,{jK:function(){return r},_T:function(){return o},ZP:function(){return u}});var r,o,i=n(42540),a=n(48155),s=n(7205),c=n(26011);!function(e){e.OK='Isnt displayed but is used as an "error" when everything is ok',e.HTTP_BAD_REQUEST="error.http.bad_request",e.HTTP_DATA_INEGRITY="error.http.data_integrity",e.HTTP_API_MISMATCH="error.http.api_mismatch",e.HTTP_SERVER_ERROR="error.http.server_error",e.HTTP_UNIMPLEMENTED="error.http.unimplemented",e.HTTP_ACCESS_DENIED="error.http.access_denied",e.HTTP_NOT_ACCEPTABLE="error.http.not_acceptable",e.UNHANDLED_RESPONSE="error.unhandled_response",e.UNHANDLED_GLOBAL_RESPONSE="error.unhandled_global_response",e.AXIOS="error.axios",e.GITHUB_FAIL="error.github",e.APP_FAIL="error.app",e.NO_APIPATH="error.no_apipath",e.LOGIN_FAIL="error.login.bad_user_pass",e.LOGIN_NOCREDS="error.login.no_creds",e.LOGIN_DISABLED="error.login.user_disabled",e.LOGIN_BAD_OAUTH="error.login.bad_oauth",e.LOGIN_RATELIMIT="error.login.rate_limit",e.USER_NO_SYS_IDENT="error.user.no_sys_ident",e.USER_NOT_FOUND="error.user.not_found",e.ADMIN_GITHUB_RATE="error.admin.rate",e.ADMIN_GITHUB_ERROR="error.admin.error",e.ADMIN_WATCHDOG_UNAVAIL="error.admin.watchdog.avail",e.ADMIN_VERSION_NOT_FOUND="error.admin.update.notfound",e.ADMIN_LOGS_IO_ERROR="error.admin.logs.io",e.JOB_JOB_NOT_FOUND="error.job.not_found",e.JOB_JOB_COMPLETE="error.job.complete",e.TRANSFER_NOT_AVAILABLE="error.transfer.not_available",e.UPLOAD_FAILED="error.transfer.upload_failed",e.GROUP_NOT_FOUND="error.group.not_found",e.GROUP_NOT_EMPTY="error.group.not_empty",e.INSTANCE_NO_DB_ENTITY="error.instance.no_db_entity"}(r||(r={})),function(e){e[e.LOCALE=0]="LOCALE",e[e.TEXT=1]="TEXT"}(o||(o={}));var u=function e(t,n,r){var u,l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=void 0,this.desc=void 0,this.extendedInfo=void 0,this.originalErrorMessage=void 0,this.code=t,"errorMessage"in n){var f=n.errorMessage;this.originalErrorMessage=f,this.desc={type:o.TEXT,desc:a.jK[f.errorCode]+": "+f.message+(f.additionalData?": "+f.additionalData:"")},f.message||(this.desc={type:o.TEXT,desc:a.jK[f.errorCode]})}if("jsError"in n){var d=n.jsError;this.desc={type:o.TEXT,desc:"".concat(d.name,": ").concat(d.message)}}var p=(new Error).stack;null!=r&&r.config.headers.Authorization&&(r.config.headers.Authorization="*********");var h,y=JSON.stringify({addon:n,origin:r,config:s.Z,stack:p});y=(y=y.replace(/Basic (?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?/g,"Basic **************")).replace(/{"username":".+?","password":".+?"}/g,'{"username":"*******","password":"*******"}'),c.Z.isTokenValid()&&(y=(0,i.ko)(y,null===(h=c.Z.token)||void 0===h?void 0:h.bearer,"**************")),s.Z.githubtoken.value&&(y=(0,i.ko)(y,s.Z.githubtoken.value,"**************")),this.extendedInfo=y,console.error("Error occured within the application: ".concat(this.code," (").concat(null!==(u=null===(l=this.desc)||void 0===l?void 0:l.desc)&&void 0!==u?u:"No description",")"),this),window.breakonerror}},38592:function(e,t,n){var r;n.d(t,{G:function(){return r}}),function(e){e[e.OK=0]="OK",e[e.ERROR=1]="ERROR"}(r||(r={})),t.Z=function(e){return Object.freeze(Object.assign({},e))}},42078:function(e,t,n){var r=n(7205);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.Z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"loadconfig",value:function(){for(var e=0,t=Object.values(r.Z);e<t.length;e++){var n=t[e];this.getconfig(n)}console.log("Configuration loaded",r.Z)}},{key:"saveconfig",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var i=(c=n[t],u=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(c,u)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];this.setconfig(a,s)}var c,u;console.log("Configuration saved",r.Z)}},{key:"setconfig",value:function(e,t){if(void 0===(null==t?void 0:t.value))return this.deleteconfig(e);if("num"===t.type){var n=parseInt(t.value);if(Number.isNaN(t.value))return;if(void 0!==t.min&&n<t.min)return;if(void 0!==t.max&&n>t.max)return;t.value=n}t.callback&&t.callback(r.Z[e].value,t.value),r.Z[e].value=t.value;try{localStorage.setItem(t.id,JSON.stringify(t.value))}catch(e){}}},{key:"getconfig",value:function(e){try{var t=localStorage.getItem(e.id);if(null!=t){var n=JSON.parse(t);null!=n&&(e.value=n)}}catch(e){}}},{key:"deleteconfig",value:function(e){try{var t=r.Z[e];localStorage.removeItem(t.id)}catch(e){}}}])&&i(t.prototype,n),e}())},26011:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.Z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.token=void 0,this.credentials=void 0}var t,r;return t=e,(r=[{key:"isTokenValid",value:function(){return this.credentials&&this.token&&this.token.bearer}}])&&n(t.prototype,r),e}())},71460:function(e,t,n){var r=n(81249),o=n(12527),i=n(42540),a=n(48155),s=n(15402),c=n(60083),u=n(41106),l=n(36800),f=n(38592),d=n(65022),p=n(69644),h=n(7205),y=n(34477);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function m(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,s,"next",e)}function s(e){w(i,r,o,a,s,"throw",e)}a(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}t.Z=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(Z,e);var t,n,o,v,R,b,w,_,A=(w=Z,_=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(w);if(_){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function Z(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Z),(e=A.call(this)).fastmodecount=0,e.currentLoop=new Date(0),e.accessibleInstances=new Set,e.enableJobProgressWorkaround=void 0,e.errors=[],e.jobs=new Map,e.jobsByInstance=new Map,e.loop=e.loop.bind(I(e)),e.reset=e.reset.bind(I(e)),e.restartLoop=e.restartLoop.bind(I(e)),e}return t=Z,n=[{key:"fastmode",set:function(e){console.log("JobsController going in fastmode for ".concat(e," cycles")),this.fastmodecount=e,this.restartLoop()}},{key:"reset",value:function(){var e=this;this.jobs=new Map,this.jobsByInstance=new Map,this.reloadAccessibleInstances().then(this.restartLoop).catch((function(t){e.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(t)}))}))}},{key:"init",value:function(){var e=this;window.clients.JobsController=this,d.Z.on("purgeCache",this.reset),s.Z.on("instanceChange",this.reset),y.Z.addHook(O((function*(){return e.reset()}))),d.Z.getServerInfo().then((function(t){t.code===f.G.OK&&(e.enableJobProgressWorkaround=(0,r.satisfies)(t.payload.version,"<4.11.0"))})).catch((function(e){return console.error(e)}))}},{key:"reloadAccessibleInstances",value:(b=O((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],r=yield s.Z.listInstances({pageSize:100});if(r.code!==f.G.ERROR){n.push.apply(n,m(r.payload.content));for(var o=2;o<=r.payload.totalPages;o++){var i=yield s.Z.listInstances({page:o,pageSize:100});if(i.code===f.G.ERROR)return void this.errors.push(i.error);n.push.apply(n,m(i.payload.content))}var a=new Set,u=n.filter((function(e){return e.online})).map((function(t){return c.Z.getCurrentInstancePermissionSet(t.id).then((function(n){n.code!==f.G.ERROR?a.add(t.id):n.error.code!==l.jK.HTTP_ACCESS_DENIED&&e.errors.push(n.error)}))}));yield Promise.all(u),this.accessibleInstances=a,t&&window.setTimeout((function(){e.reloadAccessibleInstances(!0)}),h.Z.instanceprobetimer.value)}else this.errors.push(r.error)})),function(){return b.apply(this,arguments)})},{key:"restartLoop",value:function(){var e=this,t=new Date(Date.now());this.currentLoop=t,window.setTimeout((function(){e.loop(t).catch((function(t){return e.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(t)}))}))}),0)}},{key:"loop",value:(R=O((function*(e){var t=this;if(e===this.currentLoop){this.errors=[];var n=0,r=[];this.accessibleInstances.forEach((function(o){var i=function(){var r=O((function*(r){var i,a=null!==(i=t.jobsByInstance.get(o))&&void 0!==i?i:new Map;t.jobsByInstance.set(o,a);var s,c=g(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;a.set(l.id,l),t.jobs.set(l.id,l)}}catch(e){c.e(e)}finally{c.f()}var d=r.map((function(e){return e.id})),p=Array.from(t.jobs.values()).filter((function(e){return!e.stoppedAt})).filter((function(e){return e.instanceid===o})).map((function(e){return e.id})),h=p.filter((function(e){return!d.includes(e)})),y=[];h.forEach((function(e){y.push(u.Z.getJob(o,e).then((function(e){e.code!==f.G.ERROR?(a.set(e.payload.id,e.payload),t.jobs.set(e.payload.id,e.payload)):t.errors.push(e.error)})))})),yield Promise.all(y),e===t.currentLoop&&(n+=r.length)}));return function(e){return r.apply(this,arguments)}}(),s=function(e){var n;e.code===l.jK.HTTP_DATA_INEGRITY&&(null===(n=e.originalErrorMessage)||void 0===n?void 0:n.errorCode)===a.jK.InstanceOffline?(console.log("[JobsController] Clearing instance ".concat(o," as it is now offline")),t.accessibleInstances.delete(o),t.reloadAccessibleInstances().catch((function(e){t.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(e)}))}))):t.errors.push(e)};r.push(u.Z.listActiveJobs(o,{page:1,pageSize:100}).then(function(){var n=O((function*(n){if(e===t.currentLoop)if(n.code===f.G.OK){for(var r=2;r<=n.payload.totalPages;r++){var a,c=yield u.Z.listActiveJobs(o,{page:r,pageSize:100});if(c.code===f.G.ERROR)return void s(c.error);(a=n.payload.content).push.apply(a,m(c.payload.content))}if(e!==t.currentLoop)return;yield i(n.payload.content)}else s(n.error)}));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.error(e)})))})),yield Promise.all(r),r.length=0;var o,i=g(this.jobs.values());try{var s=function(){var n=o.value;t.enableJobProgressWorkaround&&void 0===n.progress&&!n.stoppedAt&&t.accessibleInstances.has(n.instanceid)&&r.push(u.Z.getJob(n.instanceid,n.id).then((function(r){var o;e===t.currentLoop&&(r.code===f.G.OK?n.progress=r.payload.progress:r.error.code===l.jK.HTTP_DATA_INEGRITY&&(null===(o=r.error.originalErrorMessage)||void 0===o?void 0:o.errorCode)===a.jK.InstanceOffline?(console.log("[JobsController] Clearing instance ".concat(n.instanceid," as it is now offline")),t.accessibleInstances.delete(n.instanceid),t.reloadAccessibleInstances().catch((function(e){t.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(e)}))}))):t.errors.push(r.error))}))),r.push(t.canCancel(n,t.errors).then((function(r){e===t.currentLoop&&(n.canCancel=r)})))};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}yield Promise.all(r),e===this.currentLoop&&(this.emit("jobsLoaded"),this.fastmodecount&&e===this.currentLoop?(window.setTimeout((function(){t.loop(e).catch((function(e){return t.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(e)}))}))}),800),this.fastmodecount--,console.log("JobsController will remain in fastmode for ".concat(this.fastmodecount," cycles"))):window.setTimeout((function(){t.loop(e).catch((function(e){return t.errors.push(new l.ZP(l.jK.APP_FAIL,{jsError:Error(e)}))}))}),1e3*(n?h.Z.jobpollactive.value:h.Z.jobpollinactive.value)))}})),function(e){return R.apply(this,arguments)})},{key:"canCancel",value:(v=O((function*(e,t){if(void 0!==e.canCancel)return e.canCancel;if(void 0===e.cancelRightsType)return!0;switch(e.cancelRightsType){case a.KT.Administration:var n=yield p.Z.getCurrentUser();if(n.code===f.G.OK){var r=e.cancelRight;return!!((0,i.Zg)(n.payload).administrationRights&r)}return t.push(n.error),!1;case a.KT.InstanceManager:var o=yield p.Z.getCurrentUser();if(o.code===f.G.OK){var s=e.cancelRight;return!!((0,i.Zg)(o.payload).instanceManagerRights&s)}return t.push(o.error),!1;case a.KT.Byond:var u=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(u.code===f.G.OK){var l=e.cancelRight;return!!(u.payload.byondRights&l)}return t.push(u.error),!1;case a.KT.ChatBots:var d=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(d.code===f.G.OK){var h=e.cancelRight;return!!(d.payload.chatBotRights&h)}return t.push(d.error),!1;case a.KT.Configuration:var y=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(y.code===f.G.OK){var v=e.cancelRight;return!!(y.payload.configurationRights&v)}return t.push(y.error),!1;case a.KT.DreamDaemon:var g=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(g.code===f.G.OK){var m=e.cancelRight;return!!(g.payload.dreamDaemonRights&m)}return t.push(g.error),!1;case a.KT.DreamMaker:var R=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(R.code===f.G.OK){var b=e.cancelRight;return!!(R.payload.dreamMakerRights&b)}return t.push(R.error),!1;case a.KT.InstancePermissionSet:var w=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(w.code===f.G.OK){var O=e.cancelRight;return!!(w.payload.instancePermissionSetRights&O)}return t.push(w.error),!1;case a.KT.Repository:var P=yield c.Z.getCurrentInstancePermissionSet(e.instanceid);if(P.code===f.G.OK){var S=e.cancelRight;return!!(P.payload.repositoryRights&S)}return t.push(P.error),!1}})),function(e,t){return v.apply(this,arguments)})},{key:"cancelJob",value:(o=O((function*(e,t){var n=this.jobs.get(e);if(!n)return!1;var r=yield u.Z.deleteJob(n.instanceid,e);return r.code===f.G.OK||(t(r.error),!1)})),function(e,t){return o.apply(this,arguments)})},{key:"clearJob",value:function(e){var t,n=this.jobs.get(e);return!!n&&(null===(t=this.jobsByInstance.get(n.instanceid))||void 0===t||t.delete(e),this.jobs.delete(e),this.emit("jobsLoaded"),!0)}}],n&&P(t.prototype,n),Z}(o.TypedEmitter))},34477:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,l,f=(r=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(r);if(l){var n=u(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function d(){var e;i(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=f.call.apply(f,[this].concat(n))).promiseHooks=new Set,e}return t=d,(n=[{key:"runHooks",value:function(e){var t=this;console.log("Running login hooks");var n,r=0,i=[],a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(this.promiseHooks);try{var s=function(){var t=n.value,o=r;console.log("Running hook ".concat(t.name,"(").concat(o,")")),i.push(new Promise((function(n,r){t(e).then((function(){console.log("Done hook ".concat(t.name,"(").concat(o,")")),n()})).catch((function(e){console.error("Error running hook ".concat(t.name,"(").concat(o,"): "),e),r(e)}))}))),r++};for(a.s();!(n=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}Promise.all(i).then((function(){console.log("Running post login event"),t.emit("loginSuccess",e)})).catch((function(){return console.error("An error occured while running login hooks")}))}},{key:"addHook",value:function(e){this.promiseHooks.add(e)}},{key:"removeHook",value:function(e){this.promiseHooks.delete(e)}}])&&a(t.prototype,n),d}(n(12527).TypedEmitter);t.Z=new l},7205:function(e,t,n){n.d(t,{z:function(){return r}});var r,o=n(2486);!function(e){e.ALWAYS="always",e.AUTO="auto",e.NEVER="never"}(r||(r={}));var i={githubtoken:{id:"config.githubtoken",type:"pwd",value:""},apipath:{id:"config.apipath",type:"str",value:o.cV},jobpollinactive:{id:"config.jobpollinactive",type:"num",value:15},jobpollactive:{id:"config.jobpollactive",type:"num",value:5},jobswidgetdisplay:{id:"config.jobswidgetdisplay",type:"enum",possibleValues:r,value:r.AUTO},instanceprobetimer:{id:"config.instanceprobetimer",type:"num",value:60},itemsperpage:{id:"config.itemsperpage",type:"num",value:25,min:1,max:100}};t.Z=i}}]);
//# sourceMappingURL=189.6599f1a4871d128e4315.js.map