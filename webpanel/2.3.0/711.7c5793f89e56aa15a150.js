"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[711],{76515:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(67294),o=n(15881),a=n(44012),i=n(2486);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(y,e);var t,n,c,m,p=(c=y,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(c);if(m){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function y(){return u(this,y),p.apply(this,arguments)}return t=y,(n=[{key:"render",value:function(){return r.createElement(o.Z,{className:"bg-transparent",border:"info"},r.createElement(o.Z.Header,{className:"bg-info text-dark font-weight-bold"},r.createElement(a.Z,{id:"generic.wip"})),r.createElement(o.Z.Body,null,r.createElement(o.Z.Title,null,r.createElement(a.Z,{id:"generic.wip.desc"}),r.createElement("a",{href:"https://github.com/tgstation/Tgstation.Server.ControlPanel/releases/latest"},"https://github.com/tgstation/Tgstation.Server.ControlPanel/releases/latest")),r.createElement(o.Z.Text,{as:"pre",className:"bg-transparent text-info"},r.createElement("code",null,"Version: ".concat(i.q4,"\nWebpanel Mode: ").concat(i.IK,"\nCurrent route: ").concat(window.location.toString())))))}}])&&l(t.prototype,n),y}(r.Component)},41606:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(67294),o=n(41106),a=n(38592),i=n(71460),c=n(49896),u=n(3429),l=n(43307),s=n(33543),f=n(71739),d=n(9657);function m(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){var e,t=r.useContext(c.g),n=y((0,r.useState)([]),2),m=n[0],v=n[1],b=y((0,r.useState)([]),2),h=b[0],E=b[1],g=y((0,r.useState)(!0),2),w=g[0],x=g[1],Z=y((0,r.useState)(null!==(e=u.Mq.jobhistorypage.get(t.instance.id))&&void 0!==e?e:1),2),O=Z[0],S=Z[1],P=y((0,r.useState)(void 0),2),C=P[0],j=P[1];function I(){return(I=p((function*(){var e=yield o.Z.listJobs(t.instance.id,{page:O});e.code===a.G.OK?(O>e.payload.totalPages&&0!==e.payload.totalPages&&S(1),v(e.payload.content),j(e.payload.totalPages)):_(e.error),x(!1)}))).apply(this,arguments)}function _(e){E((function(t){var n=Array.from(t);return n.push(e),n}))}function k(e){return K.apply(this,arguments)}function K(){return(K=p((function*(e){var t=yield o.Z.deleteJob(e.instanceid,e.id);t.code===a.G.OK?i.Z.fastmode=5:_(t.error)}))).apply(this,arguments)}return(0,r.useEffect)((function(){u.Mq.jobhistorypage.set(t.instance.id,O),x(!0),function(){I.apply(this,arguments)}()}),[O]),(0,r.useEffect)((function(){}),[h]),w?r.createElement(f.Z,{text:"loading.instance.jobs.list"}):r.createElement("div",null,h.map((function(e,t){if(e)return r.createElement(l.Z,{key:t,error:e,onClose:function(){return E((function(e){var n=Array.from(e);return n[t]=void 0,n}))}})})),m.sort((function(e,t){return t.id-e.id})).map((function(e){return r.createElement(s.Z,{job:e,key:e.id,onCancel:k})})),r.createElement(d.Z,{selectPage:function(e){return S(e)},totalPages:null!=C?C:1,currentPage:O}))}},63711:function(e,t,n){n.r(t);var r=n(67814),o=n(67294),a=n(15881),i=n(13361),c=n(56841),u=n(44012),l=n(5977),s=n(15402),f=n(60083),d=n(38592),m=n(32826),p=n(49896),y=n(3429),v=n(71739),b=n(76515),h=n(59012),E=n(20895),g=n(41606);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,c,"next",e)}function c(e){O(a,r,o,i,c,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function j(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(w,e);var t,n,l,m,h,E,g=(h=w,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(h);if(E){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function w(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(n=g.call(this,e)).reloadInstance=n.reloadInstance.bind(I(n)),n.deleteContextError=n.deleteContextError.bind(I(n)),y.Mq.selectedinstanceid=parseInt(n.props.match.params.id),n.state={tab:null!==(t=e.match.params.tab)&&void 0!==t?t:w.tabs[0][0],errors:new Set,instance:null,instancePermissionSet:null,reloadInstance:n.reloadInstance,deleteError:n.deleteContextError,instanceid:parseInt(n.props.match.params.id)},n}return t=w,n=[{key:"deleteContextError",value:function(e){this.setState((function(t){var n=new Set(t.errors);return n.delete(e),{errors:n}}))}},{key:"componentDidMount",value:(m=S((function*(){yield this.reloadInstance()})),function(){return m.apply(this,arguments)})},{key:"reloadInstance",value:(l=S((function*(){this.setState({instance:null,instancePermissionSet:null});var e=yield s.Z.getInstance(this.state.instanceid);if(e.code===d.G.OK){this.setState({instance:e.payload});var t=yield f.Z.getCurrentInstancePermissionSet(this.state.instanceid);t.code===d.G.OK?this.setState({instancePermissionSet:t.payload}):this.setState((function(e){var n=new Set(e.errors);return n.add(t.error),{instancePermissionSet:null,errors:n}}))}else this.setState((function(t){var n=new Set(t.errors);return n.add(e.error),{instance:null,errors:n}}))})),function(){return l.apply(this,arguments)})},{key:"render",value:function(){var e=this;return this.state.instance&&this.state.instancePermissionSet?o.createElement(p.g.Provider,{value:Object.assign({user:this.context.user,serverInfo:this.context.serverInfo},this.state)},o.createElement(a.Z,null,o.createElement(a.Z.Header,{className:"text-center mb-2"},o.createElement("h3",null,o.createElement(u.Z,{id:"view.instanceedit.title",values:{instanceid:this.props.match.params.id,instancename:this.state.instance.name}})),o.createElement("h5",{className:"text-white-50"},o.createElement(u.Z,{id:"view.instanceedit.tabs.".concat(this.state.tab)}))),o.createElement(c.Z.Container,{mountOnEnter:!0,unmountOnExit:!0,id:"instanceedit",activeKey:this.state.tab},o.createElement("div",{className:"d-flex flex-row"},o.createElement(a.Z.Body,{className:"flex-grow-0"},o.createElement(i.Z,{defaultActiveKey:e.state.tab,onSelect:function(t){var n,r,o;t=null!==(n=t)&&void 0!==n?n:w.tabs[0][0],y.Mq.selectedinstanceedittab=t,e.props.history.push(null!==(r=y.$w.instanceedit.link)&&void 0!==r?r:y.$w.instanceedit.route),e.setState({tab:null!==(o=t)&&void 0!==o?o:w.tabs[0][0]})},fill:!0,variant:"pills",activeKey:e.state.tab,className:"flex-nowrap text-nowrap flex-column hover-bar"},w.tabs.map((function(e){var t=x(e,3),n=t[0],a=t[1],c=t[2];return o.createElement(i.Z.Item,{key:n},o.createElement(i.Z.Link,{eventKey:n,bsPrefix:"nav-link instanceedittab",className:(c?"":"wip text-white")+" text-left"},o.createElement(o.Fragment,null,o.createElement(r.G,{icon:a,fixedWidth:!0}),o.createElement("div",{className:"tab-text d-inline-block"},o.createElement("span",{className:"pl-1"},o.createElement(u.Z,{id:"view.instanceedit.tabs.".concat(n)}))))))})))),o.createElement(a.Z.Body,{className:"bg-body"},o.createElement(c.Z.Content,null,w.tabs.map((function(e){var t=x(e,3),n=t[0],r=t[2];return o.createElement(c.Z.Pane,{eventKey:n,key:n},r?o.createElement(r,null):o.createElement(b.Z,null))})))))))):o.createElement(v.Z,{text:"loading.instance"})}}],n&&P(t.prototype,n),w}(o.Component);k.tabs=[["info","info"],["repository","code-branch"],["deployment","hammer"],["dd","server"],["byond","list-ul",h.default],["chatbots","comments"],["files","folder-open"],["users","users"],["jobs","stream",g.default],["config","cogs",E.default]],k.contextType=m.f,t.default=(0,l.EN)(k)},56841:function(e,t,n){var r=n(51721),o=n(67294),a=n(97184),i=n(28752),c=n(75103),u=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")},t}(o.Component);u.Container=a.Z,u.Content=i.Z,u.Pane=c.Z,t.Z=u},97184:function(e,t,n){var r=n(67294),o=n(14289),a=n(24426),i=n(45017);t.Z=function(e){var t=(0,o.Ch)(e,{activeKey:"onSelect"}),n=t.id,c=t.generateChildId,u=t.onSelect,l=t.activeKey,s=t.transition,f=t.mountOnEnter,d=t.unmountOnExit,m=t.children,p=(0,r.useMemo)((function(){return c||function(e,t){return n?n+"-"+t+"-"+e:null}}),[n,c]),y=(0,r.useMemo)((function(){return{onSelect:u,activeKey:l,transition:s,mountOnEnter:f||!1,unmountOnExit:d||!1,getControlledId:function(e){return p(e,"tabpane")},getControllerId:function(e){return p(e,"tab")}}}),[u,l,s,f,d,p]);return r.createElement(a.Z.Provider,{value:y},r.createElement(i.Z.Provider,{value:u||null},m))}},28752:function(e,t,n){var r=n(87462),o=n(63366),a=n(94184),i=n.n(a),c=n(67294),u=n(76792),l=["bsPrefix","as","className"],s=c.forwardRef((function(e,t){var n=e.bsPrefix,a=e.as,s=void 0===a?"div":a,f=e.className,d=(0,o.Z)(e,l),m=(0,u.vE)(n,"tab-content");return c.createElement(s,(0,r.Z)({ref:t},d,{className:i()(f,m)}))}));t.Z=s},75103:function(e,t,n){var r=n(87462),o=n(63366),a=n(94184),i=n.n(a),c=n(67294),u=n(76792),l=n(24426),s=n(45017),f=n(41068),d=["activeKey","getControlledId","getControllerId"],m=["bsPrefix","className","active","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit","transition","as","eventKey"],p=c.forwardRef((function(e,t){var n=function(e){var t=(0,c.useContext)(l.Z);if(!t)return e;var n=t.activeKey,a=t.getControlledId,i=t.getControllerId,u=(0,o.Z)(t,d),m=!1!==e.transition&&!1!==u.transition,p=(0,s.h)(e.eventKey);return(0,r.Z)({},e,{active:null==e.active&&null!=p?(0,s.h)(n)===p:e.active,id:a(e.eventKey),"aria-labelledby":i(e.eventKey),transition:m&&(e.transition||u.transition||f.Z),mountOnEnter:null!=e.mountOnEnter?e.mountOnEnter:u.mountOnEnter,unmountOnExit:null!=e.unmountOnExit?e.unmountOnExit:u.unmountOnExit})}(e),a=n.bsPrefix,p=n.className,y=n.active,v=n.onEnter,b=n.onEntering,h=n.onEntered,E=n.onExit,g=n.onExiting,w=n.onExited,x=n.mountOnEnter,Z=n.unmountOnExit,O=n.transition,S=n.as,P=void 0===S?"div":S,C=(n.eventKey,(0,o.Z)(n,m)),j=(0,u.vE)(a,"tab-pane");if(!y&&!O&&Z)return null;var I=c.createElement(P,(0,r.Z)({},C,{ref:t,role:"tabpanel","aria-hidden":!y,className:i()(p,j,{active:y})}));return O&&(I=c.createElement(O,{in:y,onEnter:v,onEntering:b,onEntered:h,onExit:E,onExiting:g,onExited:w,mountOnEnter:x,unmountOnExit:Z},I)),c.createElement(l.Z.Provider,{value:null},c.createElement(s.Z.Provider,{value:null},I))}));p.displayName="TabPane",t.Z=p}}]);
//# sourceMappingURL=711.7c5793f89e56aa15a150.js.map