"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[746],{8425:function(e,t,r){r.d(t,{t:function(){return c}});var a=r(7294),n=r(5171),s=r.n(n),l=r(7961);function i(e){return a.createElement(s(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function c(e){return l.ZP.showjson.value?a.createElement("div",{className:"text-left"},a.createElement(i,{obj:e.obj})):a.createElement(a.Fragment,null)}},9905:function(e,t,r){r.d(t,{Z:function(){return _}});var a=r(7462),n=r(3366),s=r(1721),l=r(7814),i=r(7294),c=r(5005),o=r(2258),u=r(5293),m=r(4184),p=r.n(m),d=r(6792),f=r(8358),g=["active","disabled","className","style","activeLabel","children"],h=["children"],E=i.forwardRef((function(e,t){var r=e.active,s=e.disabled,l=e.className,c=e.style,o=e.activeLabel,u=e.children,m=(0,n.Z)(e,g),d=r||s?"span":f.Z;return i.createElement("li",{ref:t,style:c,className:p()(l,"page-item",{active:r,disabled:s})},i.createElement(d,(0,a.Z)({className:"page-link",disabled:s},m),u,r&&o&&i.createElement("span",{className:"sr-only"},o)))}));E.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},E.displayName="PageItem";var v=E;function Z(e,t,r){function a(e){var a=e.children,s=(0,n.Z)(e,h);return i.createElement(E,s,i.createElement("span",{"aria-hidden":"true"},a||t),i.createElement("span",{className:"sr-only"},r))}return void 0===r&&(r=e),a.displayName=e,a}var P=Z("First","\xab"),b=Z("Prev","\u2039","Previous"),y=Z("Ellipsis","\u2026","More"),x=Z("Next","\u203a"),N=Z("Last","\xbb"),w=["bsPrefix","className","children","size"],k=i.forwardRef((function(e,t){var r=e.bsPrefix,s=e.className,l=e.children,c=e.size,o=(0,n.Z)(e,w),u=(0,d.vE)(r,"pagination");return i.createElement("ul",(0,a.Z)({ref:t},o,{className:p()(s,u,c&&u+"-"+c)}),l)}));k.First=P,k.Prev=b,k.Ellipsis=y,k.Item=v,k.Next=x,k.Last=N;var C=k,S=(r(5638),["as","bsPrefix","className","children"]),M=i.forwardRef((function(e,t){var r=e.as,s=void 0===r?"div":r,l=e.bsPrefix,c=e.className,o=e.children,u=(0,n.Z)(e,S);return l=(0,d.vE)(l,"popover-header"),i.createElement(s,(0,a.Z)({ref:t},u,{className:p()(l,c)}),o)})),R=["as","bsPrefix","className","children"],G=i.forwardRef((function(e,t){var r=e.as,s=void 0===r?"div":r,l=e.bsPrefix,c=e.className,o=e.children,u=(0,n.Z)(e,R);return l=(0,d.vE)(l,"popover-body"),i.createElement(s,(0,a.Z)({ref:t},u,{className:p()(c,l)}),o)})),I=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],L=i.forwardRef((function(e,t){var r=e.bsPrefix,s=e.placement,l=e.className,c=e.style,o=e.children,u=e.content,m=e.arrowProps,f=(e.popper,e.show,(0,n.Z)(e,I)),g=(0,d.vE)(r,"popover"),h=((null==s?void 0:s.split("-"))||[])[0];return i.createElement("div",(0,a.Z)({ref:t,role:"tooltip",style:c,"x-placement":h,className:p()(l,g,h&&"bs-popover-"+h)},f),i.createElement("div",(0,a.Z)({className:"arrow"},m)),u?i.createElement(G,null,o):o)}));L.defaultProps={placement:"right"},L.Title=M,L.Content=G;var U=L,j=r(4012),D=["selectPage","totalPages","currentPage"],_=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={showGoto:!1,gotoValue:t.currentPage},r}return(0,s.Z)(t,e),t.prototype.render=function(){for(var e=this,t=[],r=Math.max(this.props.totalPages-this.props.currentPage-1,0),s=Math.max(this.props.currentPage-2,0),m=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-r,2),2),p=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-s,2),this.props.totalPages-1),d=function(r){t.push(i.createElement(C.Item,{key:r,active:r===e.props.currentPage,onClick:function(){return e.props.selectPage(r)}},r))},f=m;f<=p;f++)d(f);var g=this.props.totalPages>7?i.createElement(C.Ellipsis,{disabled:!0}):null,h=i.createElement(U,{id:"popover-gotopage"},i.createElement(U.Title,null,i.createElement(j.Z,{id:"generic.goto.title"})),i.createElement(U.Content,null,i.createElement("form",{className:"d-flex",onSubmit:function(t){t.preventDefault(),e.props.selectPage(e.state.gotoValue),e.setState({showGoto:!1})}},i.createElement(o.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:function(t){return e.setState({gotoValue:parseInt(t.target.value)})},custom:!0}),i.createElement(c.Z,{type:"submit"},i.createElement(j.Z,{id:"generic.goto"}))))),E=this.props,v=(E.selectPage,E.totalPages,E.currentPage,(0,n.Z)(E,D));return i.createElement("div",(0,a.Z)({className:"text-center",style:{position:"sticky",bottom:"1.5em"}},v),i.createElement(C,{className:"justify-content-center"},i.createElement(C.Prev,{disabled:this.props.currentPage<=1,onClick:function(){return e.props.selectPage(Math.max(e.props.currentPage-1,1))}}),i.createElement(C.Item,{active:this.props.currentPage<=1,onClick:function(){return e.props.selectPage(1)}},"1"),g,t,g,this.props.totalPages>=2?i.createElement(C.Item,{active:this.props.currentPage>=this.props.totalPages,onClick:function(){return e.props.selectPage(e.props.totalPages)}},this.props.totalPages):null,this.props.totalPages>7?i.createElement(u.Z,{show:this.state.showGoto,placement:"top",overlay:h},i.createElement(C.Item,{onClick:function(){return e.setState((function(e){return{showGoto:!e.showGoto}}))}},i.createElement(l.G,{icon:"search"}))):null,i.createElement(C.Next,{disabled:this.props.currentPage>=this.props.totalPages,onClick:function(){return e.props.selectPage(Math.min(e.props.currentPage+1,e.props.totalPages))}})))},t}(i.PureComponent)},8746:function(e,t,r){r.r(t);var a=r(3366),n=r(5861),s=r(1721),l=r(7757),i=r.n(l),c=r(7294),o=r(8375),u=r(7977),m=r(5005),p=r(5293),d=r(5147),f=r(3489),g=r(4012),h=r(8272),E=r(5977),v=r(3727),Z=r(8509),P=r(3803),b=r(6942),y=r(6964),x=r(1320),N=r(3e3),w=r(8425),k=r(5855),C=r(9905),S=["ref"],M=["ref"],R=["ref"];t.default=(0,E.EN)(function(e){function t(t){var r,a;return(a=e.call(this,t)||this).state={errors:[],users:[],loading:!0,canList:!1,page:null!=(r=x.Mq.userlistpage)?r:1},a}(0,s.Z)(t,e);var r=t.prototype;return r.addError=function(e){this.setState((function(t){var r=Array.from(t.errors);return r.push(e),{errors:r}}))},r.loadUsers=function(){var e=(0,n.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),!this.state.canList){e.next=14;break}return e.next=4,b.Z.listUsers({page:this.state.page});case 4:t=e.sent,e.t0=t.code,e.next=e.t0===P.G.OK?8:e.t0===P.G.ERROR?11:12;break;case 8:return this.state.page>t.payload.totalPages&&0!==t.payload.totalPages&&this.setState({page:1}),this.setState({users:t.payload.content,maxPage:t.payload.totalPages}),e.abrupt("break",12);case 11:this.addError(t.error);case 12:e.next=18;break;case 14:return e.next=16,b.Z.getCurrentUser();case 16:(r=e.sent).code===P.G.OK?this.setState({users:[r.payload]}):this.addError(r.error);case 18:this.setState({loading:!1});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.componentDidUpdate=function(){var e=(0,n.Z)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.page===this.state.page){e.next=4;break}return x.Mq.userlistpage=this.state.page,e.next=4,this.loadUsers();case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.componentDidMount=function(){var e=(0,n.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.getCurrentUser();case 2:if((t=e.sent).code!=P.G.OK){e.next=10;break}return r=!!((0,y.Zg)(t.payload).administrationRights&Z.oj.ReadUsers),this.setState({canList:r}),e.next=8,this.loadUsers();case 8:e.next=11;break;case 10:this.addError(t.error);case 11:this.setState({loading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.render=function(){var e,t,r=this;return this.state.loading?c.createElement(k.Z,{text:"loading.userlist"}):c.createElement("div",{className:"text-center"},c.createElement(w.t,{obj:this.state.users}),this.state.canList?"":c.createElement(o.Z,{className:"clearfix",variant:"error"},c.createElement(g.Z,{id:"view.user.list.cantlist"})),this.state.errors.map((function(e,t){if(e)return c.createElement(N.ZP,{key:t,error:e,onClose:function(){return r.setState((function(e){var r=Array.from(e.errors);return r[t]=void 0,{errors:r}}))}})})),c.createElement(d.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:!0},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"#"),c.createElement("th",null,c.createElement(g.Z,{id:"generic.name"})),c.createElement("th",null,c.createElement(g.Z,{id:"generic.details"})),c.createElement("th",null,c.createElement(g.Z,{id:"generic.group"})),c.createElement("th",null,c.createElement(g.Z,{id:"generic.created"})),c.createElement("th",null,c.createElement(g.Z,{id:"generic.createdby"})),c.createElement("th",null,c.createElement(g.Z,{id:"generic.action"})))),c.createElement("tbody",null,this.state.users.map((function(e){var t=new Date(e.createdAt),n=(t.getTime()-Date.now())/1e3;return c.createElement("tr",{key:e.id},c.createElement("td",null,e.id),c.createElement("td",null,e.name),c.createElement("td",null,e.systemIdentifier?c.createElement(u.Z,{variant:"primary",className:"mx-1"},c.createElement(g.Z,{id:"generic.system.short"})):c.createElement(u.Z,{variant:"primary",className:"mx-1"},c.createElement(g.Z,{id:"generic.tgs"})),e.enabled?c.createElement(u.Z,{variant:"success",className:"mx-1"},c.createElement(g.Z,{id:"generic.enabled"})):c.createElement(u.Z,{variant:"danger",className:"mx-1"},c.createElement(g.Z,{id:"generic.disabled"})),e.group?c.createElement(u.Z,{variant:"warning",className:"mx-1"},c.createElement(g.Z,{id:"generic.grouped"})):null),e.group?c.createElement(p.Z,{overlay:c.createElement(f.Z,{id:e.name+"-tooltip-group"},c.createElement(g.Z,{id:"generic.groupid",values:{id:e.group.id}}))},(function(t){var r=t.ref,n=(0,a.Z)(t,S);return c.createElement("td",n,c.createElement("span",{ref:r},e.group.name))})):c.createElement("td",null),c.createElement(p.Z,{overlay:c.createElement(f.Z,{id:e.name+"-tooltip"},t.toLocaleString())},(function(e){var t=e.ref,r=(0,a.Z)(e,M);return c.createElement("td",r,c.createElement("span",{ref:t},c.createElement(h.Z,{value:n,numeric:"auto",updateIntervalInSeconds:1})))})),c.createElement(p.Z,{overlay:c.createElement(f.Z,{id:e.name+"-tooltip-createdby"},c.createElement(g.Z,{id:"generic.userid"}),e.createdBy.id)},(function(t){var r=t.ref,n=(0,a.Z)(t,R);return c.createElement("td",n,c.createElement("span",{ref:r},e.createdBy.name))})),c.createElement("td",{className:"align-middle p-0"},c.createElement(m.Z,{onClick:function(){var t;x.Mq.selecteduserid=e.id,r.props.history.push(null!=(t=x.$w.useredit.link)?t:x.$w.useredit.route)}},c.createElement(g.Z,{id:"generic.edit"}))))})))),c.createElement(C.Z,{selectPage:function(e){return r.setState({page:e})},totalPages:null!=(e=this.state.maxPage)?e:1,currentPage:this.state.page}),c.createElement(m.Z,{as:v.rU,to:null!=(t=x.$w.usercreate.link)?t:x.$w.usercreate.route},c.createElement(g.Z,{id:"routes.usercreate"})))},t}(c.Component))},7977:function(e,t,r){var a=r(7462),n=r(3366),s=r(4184),l=r.n(s),i=r(7294),c=r(6792),o=["bsPrefix","variant","pill","className","as"],u=i.forwardRef((function(e,t){var r=e.bsPrefix,s=e.variant,u=e.pill,m=e.className,p=e.as,d=void 0===p?"span":p,f=(0,n.Z)(e,o),g=(0,c.vE)(r,"badge");return i.createElement(d,(0,a.Z)({ref:t},f,{className:l()(m,g,u&&g+"-pill",s&&g+"-"+s)}))}));u.displayName="Badge",u.defaultProps={pill:!1},t.Z=u},5147:function(e,t,r){var a=r(7462),n=r(3366),s=r(4184),l=r.n(s),i=r(7294),c=r(6792),o=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=i.forwardRef((function(e,t){var r=e.bsPrefix,s=e.className,u=e.striped,m=e.bordered,p=e.borderless,d=e.hover,f=e.size,g=e.variant,h=e.responsive,E=(0,n.Z)(e,o),v=(0,c.vE)(r,"table"),Z=l()(s,v,g&&v+"-"+g,f&&v+"-"+f,u&&v+"-striped",m&&v+"-bordered",p&&v+"-borderless",d&&v+"-hover"),P=i.createElement("table",(0,a.Z)({},E,{className:Z,ref:t}));if(h){var b=v+"-responsive";return"string"==typeof h&&(b=b+"-"+h),i.createElement("div",{className:b},P)}return P}));t.Z=u}}]);
//# sourceMappingURL=746.9da06dab7c70efa4425b.bundle.js.map