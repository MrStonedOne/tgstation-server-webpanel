"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[764],{6352:function(e,t,r){var n=r(5861),o=r(1721),a=r(7757),s=r.n(a),i=r(653),u=r(6846),c=r(3803),d=r(5631),l=r(7961);t.Z=new(function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var r=t.prototype;return r.listInstances=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,o,a,i,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=void 0===t?{}:t).page,o=void 0===n?1:n,a=r.pageSize,i=void 0===a?l.ZP.itemsperpage.value:a,e.next=3,d.Z.wait4Init();case 3:return e.prev=3,e.next=6,d.Z.apiClient.instance.instanceControllerList({pageSize:i,page:o});case 6:p=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",new c.Z({code:c.G.ERROR,error:e.t0}));case 12:e.t1=p.status,e.next=200===e.t1?15:16;break;case 15:return e.abrupt("return",new c.Z({code:c.G.OK,payload:p.data}));case 16:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:p},p)}));case 17:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),r.editInstance=function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.wait4Init();case 2:return e.prev=2,e.next=5,d.Z.apiClient.instance.instanceControllerUpdate(t);case 5:r=e.sent,this.emit("instanceChange",t.id),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",new c.Z({code:c.G.ERROR,error:e.t0}));case 12:e.t1=r.status,e.next=200===e.t1||202===e.t1?15:410===e.t1?16:17;break;case 15:return e.abrupt("return",new c.Z({code:c.G.OK,payload:r.data}));case 16:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.NO_DB_ENTITY,{errorMessage:r.data})}));case 17:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}));case 18:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),r.createInstance=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.wait4Init();case 2:return e.prev=2,e.next=5,d.Z.apiClient.instance.instanceControllerCreate(t);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new c.Z({code:c.G.ERROR,error:e.t0}));case 11:e.t1=r.status,e.next=200===e.t1||201===e.t1?14:409===e.t1?17:18;break;case 14:return n=r.data,this.emit("instanceChange",n.id),e.abrupt("return",new c.Z({code:c.G.OK,payload:n}));case 17:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.HTTP_DATA_INEGRITY,{errorMessage:r.data})}));case 18:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}));case 19:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.getInstance=function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.wait4Init();case 2:return e.prev=2,e.next=5,d.Z.apiClient.instance.instanceControllerGetId(t);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new c.Z({code:c.G.ERROR,error:e.t0}));case 11:e.t1=r.status,e.next=200===e.t1?14:410===e.t1?15:16;break;case 14:return e.abrupt("return",new c.Z({code:c.G.OK,payload:r.data}));case 15:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.NO_DB_ENTITY,{errorMessage:r.data})}));case 16:return e.abrupt("return",new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}));case 17:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t}(i.S))},5870:function(e,t,r){var n=r(5861),o=r(1721),a=r(7757),s=r.n(a),i=r(653),u=r(6846),c=r(3803),d=r(5631);t.Z=new(function(e){function t(){var t;return(t=e.call(this)||this)._cachedInstancePermissionSet=new Map,t.loadingInstancePermissionSetInfo=new Map,d.Z.on("purgeCache",(function(){t._cachedInstancePermissionSet.clear()})),t}return(0,o.Z)(t,e),t.prototype.getCurrentInstancePermissionSet=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,o,a,i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.wait4Init();case 2:if(!this._cachedInstancePermissionSet.has(t)){e.next=4;break}return e.abrupt("return",this._cachedInstancePermissionSet.get(t));case 4:if(!this.loadingInstancePermissionSetInfo.get(t)){e.next=8;break}return e.next=7,new Promise((function(e){i.on("loadInstancePermissionSet",(function t(r){e(r),i.removeListener("loadInstancePermissionSet",t)}))}));case 7:return e.abrupt("return",e.sent);case 8:return this.loadingInstancePermissionSetInfo.set(t,!0),e.prev=9,e.next=12,d.Z.apiClient.instancePermissionSet.instancePermissionSetControllerRead({headers:{Instance:t.toString()}});case 12:r=e.sent,e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(9),n=new c.Z({code:c.G.ERROR,error:e.t0}),this.emit("loadInstancePermissionSet",n),this.loadingInstancePermissionSetInfo.set(t,!1),e.abrupt("return",n);case 21:e.t1=r.status,e.next=200===e.t1?24:29;break;case 24:return o=new c.Z({code:c.G.OK,payload:r.data}),this._cachedInstancePermissionSet.set(t,o),this.emit("loadInstancePermissionSet",o),this.loadingInstancePermissionSetInfo.set(t,!1),e.abrupt("return",o);case 29:return a=new c.Z({code:c.G.ERROR,error:new u.ZP(u.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}),this.emit("loadInstancePermissionSet",a),this.loadingInstancePermissionSetInfo.set(t,!1),e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),t}(i.S))},3204:function(e,t,r){var n=r(7462),o=r(5861),a=r(1721),s=r(7757),i=r.n(s),u=r(653),c=r(6846),d=r(3803),l=r(5631),p=r(7961);t.Z=new(function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var r=t.prototype;return r.listActiveJobs=function(){var e=(0,o.Z)(i().mark((function e(t,r){var o,a,s,u,h,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.page,a=void 0===o?1:o,s=r.pageSize,u=void 0===s?p.ZP.itemsperpage.value:s,e.next=3,l.Z.wait4Init();case 3:return e.prev=3,e.next=6,l.Z.apiClient.job.jobControllerRead({page:a,pageSize:u},{headers:{Instance:t.toString()}});case 6:h=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",new d.Z({code:d.G.ERROR,error:e.t0}));case 12:e.t1=h.status,e.next=200===e.t1?15:17;break;case 15:return f=h.data.content.map((function(e){return(0,n.Z)({},e,{instanceid:t})})),e.abrupt("return",new d.Z({code:d.G.OK,payload:(0,n.Z)({},h.data,{content:f})}));case 17:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.UNHANDLED_RESPONSE,{axiosResponse:h},h)}));case 18:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}(),r.getJob=function(){var e=(0,o.Z)(i().mark((function e(t,r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.wait4Init();case 2:return e.prev=2,e.next=5,l.Z.apiClient.job.jobControllerGetId(r,{headers:{Instance:t.toString()}});case 5:o=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new d.Z({code:d.G.ERROR,error:e.t0}));case 11:e.t1=o.status,e.next=200===e.t1?14:404===e.t1?16:17;break;case 14:return a=(0,n.Z)({},o.data,{instanceid:t}),e.abrupt("return",new d.Z({code:d.G.OK,payload:a}));case 16:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.JOB_JOB_NOT_FOUND,{errorMessage:o.data})}));case 17:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.UNHANDLED_RESPONSE,{axiosResponse:o},o)}));case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),r.deleteJob=function(){var e=(0,o.Z)(i().mark((function e(t,r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.wait4Init();case 2:return e.prev=2,e.next=5,l.Z.apiClient.job.jobControllerDelete(r,{headers:{Instance:t.toString()}});case 5:o=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new d.Z({code:d.G.ERROR,error:e.t0}));case 11:e.t1=o.status,e.next=202===e.t1?14:404===e.t1?16:410===e.t1?17:18;break;case 14:return a=(0,n.Z)({},o.data,{instanceid:t}),e.abrupt("return",new d.Z({code:d.G.OK,payload:a}));case 16:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.JOB_JOB_NOT_FOUND,{errorMessage:o.data})}));case 17:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.JOB_JOB_COMPLETE,{void:!0})}));case 18:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.UNHANDLED_RESPONSE,{axiosResponse:o},o)}));case 19:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),r.listJobs=function(){var e=(0,o.Z)(i().mark((function e(t,r){var o,a,s,u,h,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.page,a=void 0===o?1:o,s=r.pageSize,u=void 0===s?p.ZP.itemsperpage.value:s,e.next=3,l.Z.wait4Init();case 3:return e.prev=3,e.next=6,l.Z.apiClient.job.jobControllerList({pageSize:u,page:a},{headers:{Instance:t.toString()}});case 6:h=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",new d.Z({code:d.G.ERROR,error:e.t0}));case 12:e.t1=h.status,e.next=200===e.t1?15:17;break;case 15:return f=h.data.content.map((function(e){return(0,n.Z)({},e,{instanceid:t})})),e.abrupt("return",new d.Z({code:d.G.OK,payload:(0,n.Z)({},h.data,{content:f})}));case 17:return e.abrupt("return",new d.Z({code:d.G.ERROR,error:new c.ZP(c.jK.UNHANDLED_RESPONSE,{axiosResponse:h},h)}));case 18:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}(),t}(u.S))},5631:function(e,t,r){var n,o,a=r(5861),s=r(3144),i=r(7326),u=r(1721),c=r(7757),d=r.n(c),l=r(6755),p=r(653),h=r(8509),f=r(1895),m=r(6846),g=r(3803),v=r(7961),b=r(2522),R=r(452);t.Z=new(o=n=function(e){function t(){var r,n;return(r=e.call(this)||this).apiHttpClient=void 0,r.apiClient=void 0,r.apiRequestInterceptor={onFulfilled:(n=(0,a.Z)(d().mark((function e(t){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("https://example.org:5000"!==v.ZP.apipath.value){e.next=3;break}return n=new m.ZP(m.jK.NO_APIPATH,{void:!0}),e.abrupt("return",Promise.reject(n));case 3:if("/"===t.url||""===t.url){e.next=8;break}return e.next=6,r.wait4Token();case 6:o=e.sent,t.headers.Authorization="Bearer "+(o.bearer||"");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onRejected:function(e){return Promise.reject(e)}},r.apiResponseInterceptor={onFulfilled:function(e){return e},onRejected:function(e,n){var o=e;if((null==o?void 0:o.code)===m.jK.NO_APIPATH)return Promise.reject(o);if(!(e.response&&e.response.status&&t.globalHandledCodes.includes(e.response.status))){var a=e,s=new m.ZP(m.jK.AXIOS,{jsError:a},e.response);return Promise.reject(s)}var i=e.response;switch(e.response.status){case 400:var u=i.data,c=new m.ZP(m.jK.HTTP_BAD_REQUEST,{errorMessage:u},i);return Promise.reject(c);case 401:var d=e.config;if(("/"===d.url||""===d.url)&&"post"===d.method)return Promise.resolve(e.response);if(r.autoLogin)return r.login().then((function(t){switch(t.code){case g.G.OK:return n.request(e.config);case g.G.ERROR:r.emit("accessDenied"),r.logout();var o=new m.ZP(m.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(o)}}));r.emit("accessDenied");var l=new m.ZP(m.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(l);case 403:var p=e.config;if("/"!==p.url&&""!==p.url||"post"!==p.method){r.emit("accessDenied");var h=new m.ZP(m.jK.HTTP_ACCESS_DENIED,{void:!0},i);return Promise.reject(h)}return Promise.resolve(e.response);case 406:var f=new m.ZP(m.jK.HTTP_NOT_ACCEPTABLE,{void:!0},i);return Promise.reject(f);case 409:var v=i.data,b=e.config;if("/Administration/Logs"===b.url&&"get"===b.method)return Promise.resolve(e.response);var R=new m.ZP(m.jK.HTTP_DATA_INEGRITY,{errorMessage:v},i);return Promise.reject(R);case 426:var C=i.data,Z=new m.ZP(m.jK.HTTP_API_MISMATCH,{errorMessage:C},i);return Promise.reject(Z);case 500:var E=i.data,P=new m.ZP(m.jK.HTTP_SERVER_ERROR,{errorMessage:E},i);return Promise.reject(P);case 501:var I=i.data,S=new m.ZP(m.jK.HTTP_UNIMPLEMENTED,{errorMessage:I},i);return Promise.reject(S);case 503:return console.log("Server not ready, delaying request",e.config),new Promise((function(e){setTimeout(e,5e3)})).then((function(){return n.request(e.config)}));default:var y=new m.ZP(m.jK.UNHANDLED_GLOBAL_RESPONSE,{axiosResponse:i},i);return Promise.reject(y)}}},r.initialized=!1,r.loadingServerInfo=!1,r._serverInfo=void 0,r.autoLogin=!0,r.loggingIn=!1,r.getServerInfo=r.getServerInfo.bind((0,i.Z)(r)),R.Z.addHook(r.getServerInfo),r.on("purgeCache",(function(){r._serverInfo=void 0,b.Z.token&&R.Z.runHooks(b.Z.token)})),v.ZP.apipath.callback=function(){console.log("API path changed"),window.location.reload()},r}(0,u.Z)(t,e);var r=t.prototype;return r.initApi=function(){var e=this;console.log("Initializing API client"),console.time("APIInit"),this.apiHttpClient=new h.eN({baseURL:v.ZP.apipath.value,withCredentials:!1,headers:{Accept:"application/json",Api:"Tgstation.Server.Api/"+l.Gn,"Webpanel-Version":l.q4},validateStatus:function(e){return!t.globalHandledCodes.includes(e)}}),this.apiHttpClient.instance.interceptors.request.use(this.apiRequestInterceptor.onFulfilled,this.apiRequestInterceptor.onRejected),this.apiHttpClient.instance.interceptors.response.use(this.apiResponseInterceptor.onFulfilled,(function(t){return e.apiResponseInterceptor.onRejected(t,e.apiHttpClient.instance)})),this.apiClient=new h.V0(this.apiHttpClient),console.timeEnd("APIInit"),this.initialized=!0,this.emit("initialized")},r.wait4Init=function(){var e=this;return new Promise((function(t){e.initialized?t():e.on("initialized",(function(){return t()}))}))},r.wait4Token=function(){var e=this;return new Promise((function(t){b.Z.isTokenValid()?t(b.Z.token):e.on("tokenAvailable",(function(e){t(e)}))}))},r.login=function(){var e=(0,a.Z)(d().mark((function e(t){var r,n,o,a,s,i,u,c,l,p,h=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wait4Init();case 2:if(console.log("Attempting login"),n=!1,t?b.Z.credentials=t:(null==(r=b.Z.credentials)?void 0:r.type)===f.P.OAuth&&(this.logout(),n=!0),!n&&b.Z.credentials){e.next=7;break}return e.abrupt("return",new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.LOGIN_NOCREDS,{void:!0})}));case 7:if(!this.loggingIn){e.next=11;break}return e.next=10,new Promise((function(e){h.on("loadLoginInfo",(function t(r){e(r),h.removeListener("loadLoginInfo",t)}))}));case 10:return e.abrupt("return",e.sent);case 11:if(this.loggingIn=!0,e.prev=12,b.Z.credentials.type!=f.P.Password){e.next=19;break}return e.next=16,this.apiClient.homeControllerCreateToken({auth:{username:b.Z.credentials.userName,password:b.Z.credentials.password}});case 16:o=e.sent,e.next=22;break;case 19:return e.next=21,this.apiClient.homeControllerCreateToken({headers:{OAuthProvider:b.Z.credentials.provider,Authorization:"OAuth "+b.Z.credentials.token}});case 21:o=e.sent;case 22:e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(12),a=new g.Z({code:g.G.ERROR,error:e.t0}),this.emit("loadLoginInfo",a),e.abrupt("return",a);case 29:return e.prev=29,this.loggingIn=!1,e.finish(29);case 32:e.t1=o.status,e.next=200===e.t1?35:401===e.t1?43:403===e.t1?48:429===e.t1?53:58;break;case 35:return console.log("Login success"),s=o.data,b.Z.token=s,this.emit("tokenAvailable",s),R.Z.runHooks(s),i=new g.Z({code:g.G.OK,payload:s}),this.emit("loadLoginInfo",i),e.abrupt("return",i);case 43:return this.logout(),console.log("Failed to login"),u=new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.LOGIN_FAIL,{void:!0},o)}),this.emit("loadLoginInfo",u),e.abrupt("return",u);case 48:return this.logout(),console.log("Account disabled"),c=new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.LOGIN_DISABLED,{void:!0},o)}),this.emit("loadLoginInfo",c),e.abrupt("return",c);case 53:return this.logout(),console.log("rate limited"),l=new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.LOGIN_RATELIMIT,{errorMessage:o.data},o)}),this.emit("loadLoginInfo",l),e.abrupt("return",l);case 58:return p=new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.UNHANDLED_RESPONSE,{axiosResponse:o},o)}),this.emit("loadLoginInfo",p),e.abrupt("return",p);case 61:case"end":return e.stop()}}),e,this,[[12,24,29,32]])})));return function(t){return e.apply(this,arguments)}}(),r.logout=function(){b.Z.isTokenValid()&&(console.log("Logging out"),b.Z.credentials=void 0,b.Z.token=void 0,this.emit("purgeCache"),this.emit("logout"))},r.getServerInfo=function(){var e=(0,a.Z)(d().mark((function e(t,r){var n,o,a,s,i,u=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,this.wait4Init();case 3:if(!this._serverInfo||r){e.next=5;break}return e.abrupt("return",this._serverInfo);case 5:if(!this.loadingServerInfo){e.next=7;break}return e.abrupt("return",new Promise((function(e){if(u._serverInfo)e(u._serverInfo);else{u.on("loadServerInfo",(function t(r){e(r),u.removeListener("loadServerInfo",t)}))}})));case 7:return this.loadingServerInfo=!0,e.prev=8,e.next=11,this.apiClient.homeControllerHome();case 11:n=e.sent,e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(8),o=new g.Z({code:g.G.ERROR,error:e.t0}),this.emit("loadServerInfo",o),this.loadingServerInfo=!1,e.abrupt("return",o);case 20:e.t1=n.status,e.next=200===e.t1?23:29;break;case 23:return a=n.data,s=new g.Z({code:g.G.OK,payload:a}),this.emit("loadServerInfo",s),this._serverInfo=s,this.loadingServerInfo=!1,e.abrupt("return",s);case 29:return i=new g.Z({code:g.G.ERROR,error:new m.ZP(m.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)}),this.emit("loadServerInfo",i),this.loadingServerInfo=!1,e.abrupt("return",i);case 33:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,r){return e.apply(this,arguments)}}(),(0,s.Z)(t,[{key:"serverInfo",get:function(){return this._serverInfo}}]),t}(p.S),n.globalHandledCodes=[400,401,403,406,409,426,500,501,503],o)},6942:function(e,t,r){var n=r(7462),o=r(5861),a=r(3144),s=r(7326),i=r(1721),u=r(7757),c=r.n(u),d=r(653),l=r(8509),p=r(6846),h=r(3803),f=r(5631),m=r(7961),g=r(2522),v=r(452);t.Z=new(function(e){function t(){var t;return(t=e.call(this)||this)._cachedUser=void 0,t.loadingUserInfo=!1,t.createAllUsersWithAA=!1,t.getCurrentUser=t.getCurrentUser.bind((0,s.Z)(t)),v.Z.addHook((function(){return t.getCurrentUser()})),f.Z.on("purgeCache",(function(){t._cachedUser=void 0})),t}(0,i.Z)(t,e);var r=t.prototype;return r.editUser=function(){var e=(0,o.Z)(c().mark((function e(t){var r,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.wait4Init();case 2:return e.prev=2,e.next=5,f.Z.apiClient.user.userControllerUpdate(t);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new h.Z({code:h.G.ERROR,error:e.t0}));case 11:e.t1=r.status,e.next=200===e.t1?14:404===e.t1?23:25;break;case 14:return e.next=16,this.getCurrentUser();case 16:if((n=e.sent).code!=h.G.OK){e.next=21;break}n.payload.id==t.id&&f.Z.emit("purgeCache"),e.next=22;break;case 21:return e.abrupt("return",new h.Z({code:h.G.ERROR,error:n.error}));case 22:return e.abrupt("return",new h.Z({code:h.G.OK,payload:r.data}));case 23:return o=r.data,e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.USER_NOT_FOUND,{errorMessage:o})}));case 25:return e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}));case 26:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.getCurrentUser=function(){var e=(0,o.Z)(c().mark((function e(t){var r,n,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.wait4Init();case 2:if(g.Z.isTokenValid()){e.next=4;break}return e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.HTTP_ACCESS_DENIED,{void:!0})}));case 4:if(!this._cachedUser||t){e.next=6;break}return e.abrupt("return",this._cachedUser);case 6:if(!this.loadingUserInfo){e.next=10;break}return e.next=9,new Promise((function(e){s.on("loadUserInfo",(function t(r){e(r),s.removeListener("loadUserInfo",t)}))}));case 9:return e.abrupt("return",e.sent);case 10:return this.loadingUserInfo=!0,e.prev=11,e.next=14,f.Z.apiClient.user.userControllerRead();case 14:r=e.sent,e.next=23;break;case 17:return e.prev=17,e.t0=e.catch(11),n=new h.Z({code:h.G.ERROR,error:e.t0}),this.emit("loadUserInfo",n),this.loadingUserInfo=!1,e.abrupt("return",n);case 23:e.t1=r.status,e.next=200===e.t1?26:31;break;case 26:return o=new h.Z({code:h.G.OK,payload:r.data}),this._cachedUser=o,this.emit("loadUserInfo",o),this.loadingUserInfo=!1,e.abrupt("return",o);case 31:return a=new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}),this.emit("loadUserInfo",a),this.loadingUserInfo=!1,e.abrupt("return",a);case 35:case"end":return e.stop()}}),e,this,[[11,17]])})));return function(t){return e.apply(this,arguments)}}(),r.listUsers=function(){var e=(0,o.Z)(c().mark((function e(t){var r,o,a,s,i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.page,o=void 0===r?1:r,a=t.pageSize,s=void 0===a?m.ZP.itemsperpage.value:a,e.next=3,f.Z.wait4Init();case 3:return e.prev=3,e.next=6,f.Z.apiClient.user.userControllerList({page:o,pageSize:s});case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",new h.Z({code:h.G.ERROR,error:e.t0}));case 12:e.t1=i.status,e.next=200===e.t1?15:17;break;case 15:return u=i.data.content.sort((function(e,t){return e.id-t.id})),e.abrupt("return",new h.Z({code:h.G.OK,payload:(0,n.Z)({},i.data,{content:u})}));case 17:return e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.UNHANDLED_RESPONSE,{axiosResponse:i},i)}));case 18:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),r.getUser=function(){var e=(0,o.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.wait4Init();case 2:return e.prev=2,e.next=5,f.Z.apiClient.user.userControllerGetId(t);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",new h.Z({code:h.G.ERROR,error:e.t0}));case 11:e.t1=r.status,e.next=200===e.t1?14:404===e.t1?15:17;break;case 14:return e.abrupt("return",new h.Z({code:h.G.OK,payload:r.data}));case 15:return n=r.data,e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.USER_NOT_FOUND,{errorMessage:n})}));case 17:return e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)}));case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.createUser=function(){var e=(0,o.Z)(c().mark((function e(t){var r,n,o,a,s,i,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.wait4Init();case 2:if(void 0===t.enabled&&(t.enabled=!0),!this.createAllUsersWithAA){e.next=24;break}t.instanceManagerRights=0,t.administrationRights=0,r=0,n=Object.values(l.c2);case 7:if(!(r<n.length)){e.next=15;break}if("number"==typeof(o=n[r])){e.next=11;break}return e.abrupt("continue",12);case 11:t.instanceManagerRights+=o;case 12:r++,e.next=7;break;case 15:a=0,s=Object.values(l.oj);case 16:if(!(a<s.length)){e.next=24;break}if("number"==typeof(i=s[a])){e.next=20;break}return e.abrupt("continue",21);case 20:t.administrationRights+=i;case 21:a++,e.next=16;break;case 24:return e.prev=24,e.next=27,f.Z.apiClient.user.userControllerCreate(t);case 27:u=e.sent,e.next=33;break;case 30:return e.prev=30,e.t0=e.catch(24),e.abrupt("return",new h.Z({code:h.G.ERROR,error:e.t0}));case 33:e.t1=u.status,e.next=201===e.t1?36:410===e.t1?37:39;break;case 36:return e.abrupt("return",new h.Z({code:h.G.OK,payload:u.data}));case 37:return d=u.data,e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.USER_NO_SYS_IDENT,{errorMessage:d})}));case 39:return e.abrupt("return",new h.Z({code:h.G.ERROR,error:new p.ZP(p.jK.UNHANDLED_RESPONSE,{axiosResponse:u},u)}));case 40:case"end":return e.stop()}}),e,this,[[24,30]])})));return function(t){return e.apply(this,arguments)}}(),(0,a.Z)(t,[{key:"cachedUser",get:function(){return this._cachedUser}}]),t}(d.S))},653:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(7326),o=r(1721),a=function(e){function t(){var t;return t=e.call(this)||this,null==window.clients&&(window.clients={}),console.log(t.constructor.name,(0,n.Z)(t)),window.clients[t.constructor.name]=(0,n.Z)(t),t}return(0,o.Z)(t,e),t}(r(2527).TypedEmitter)},8509:function(e,t,r){r.d(t,{oj:function(){return n},D8:function(){return o},c7:function(){return u},py:function(){return c},ns:function(){return d},Ye:function(){return l},jK:function(){return h},c2:function(){return f},O4:function(){return g},KT:function(){return R},Ni:function(){return C},eN:function(){return k},V0:function(){return x}});var n,o,a,s,i,u,c,d,l,p,h,f,m,g,v,b,R,C,Z,E=r(7462),P=r(5861),I=r(3366),S=r(7757),y=r.n(S),w=r(9669),D=r.n(w),T=["securityWorker","secure","format"],O=["secure","path","type","query","format","body"],A=["directoryPath"];!function(e){e[e.None=0]="None",e[e.WriteUsers=1]="WriteUsers",e[e.RestartHost=2]="RestartHost",e[e.ChangeVersion=4]="ChangeVersion",e[e.EditOwnPassword=8]="EditOwnPassword",e[e.ReadUsers=16]="ReadUsers",e[e.DownloadLogs=32]="DownloadLogs",e[e.EditOwnOAuthConnections=64]="EditOwnOAuthConnections"}(n||(n={})),function(e){e[e.None=0]="None",e[e.ReadActive=1]="ReadActive",e[e.ListInstalled=2]="ListInstalled",e[e.InstallOfficialOrChangeActiveVersion=4]="InstallOfficialOrChangeActiveVersion",e[e.CancelInstall=8]="CancelInstall",e[e.InstallCustomVersion=16]="InstallCustomVersion"}(o||(o={})),function(e){e[e.None=0]="None",e[e.WriteEnabled=1]="WriteEnabled",e[e.WriteProvider=2]="WriteProvider",e[e.WriteChannels=4]="WriteChannels",e[e.WriteConnectionString=8]="WriteConnectionString",e[e.ReadConnectionString=16]="ReadConnectionString",e[e.Read=32]="Read",e[e.Create=64]="Create",e[e.Delete=128]="Delete",e[e.WriteName=256]="WriteName",e[e.WriteReconnectionInterval=512]="WriteReconnectionInterval",e[e.WriteChannelLimit=1024]="WriteChannelLimit"}(a||(a={})),function(e){e[e.Irc=0]="Irc",e[e.Discord=1]="Discord"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.List=4]="List",e[e.Delete=8]="Delete"}(i||(i={})),function(e){e[e.Disallowed=0]="Disallowed",e[e.HostWrite=1]="HostWrite",e[e.SystemIdentityWrite=2]="SystemIdentityWrite"}(u||(u={})),function(e){e[e.None=0]="None",e[e.ReadRevision=1]="ReadRevision",e[e.SetPort=2]="SetPort",e[e.SetAutoStart=4]="SetAutoStart",e[e.SetSecurity=8]="SetSecurity",e[e.ReadMetadata=16]="ReadMetadata",e[e.SetWebClient=32]="SetWebClient",e[e.SoftRestart=64]="SoftRestart",e[e.SoftShutdown=128]="SoftShutdown",e[e.Restart=256]="Restart",e[e.Shutdown=512]="Shutdown",e[e.Start=1024]="Start",e[e.SetStartupTimeout=2048]="SetStartupTimeout",e[e.SetHeartbeatInterval=4096]="SetHeartbeatInterval",e[e.CreateDump=8192]="CreateDump",e[e.SetTopicTimeout=16384]="SetTopicTimeout",e[e.SetAdditionalParameters=32768]="SetAdditionalParameters",e[e.SetVisibility=65536]="SetVisibility"}(c||(c={})),function(e){e[e.Trusted=0]="Trusted",e[e.Safe=1]="Safe",e[e.Ultrasafe=2]="Ultrasafe"}(d||(d={})),function(e){e[e.Public=0]="Public",e[e.Private=1]="Private",e[e.Invisible=2]="Invisible"}(l||(l={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Compile=2]="Compile",e[e.CancelCompile=4]="CancelCompile",e[e.SetDme=8]="SetDme",e[e.SetApiValidationPort=16]="SetApiValidationPort",e[e.CompileJobs=32]="CompileJobs",e[e.SetSecurityLevel=64]="SetSecurityLevel",e[e.SetApiValidationRequirement=128]="SetApiValidationRequirement",e[e.SetTimeout=256]="SetTimeout"}(p||(p={})),function(e){e[e.InternalServerError=0]="InternalServerError",e[e.ApiMismatch=1]="ApiMismatch",e[e.ModelValidationFailure=2]="ModelValidationFailure",e[e.IOError=3]="IOError",e[e.BadHeaders=4]="BadHeaders",e[e.TokenWithToken=5]="TokenWithToken",e[e.DatabaseIntegrityConflict=6]="DatabaseIntegrityConflict",e[e.MissingHostWatchdog=7]="MissingHostWatchdog",e[e.CannotChangeServerSuite=8]="CannotChangeServerSuite",e[e.RemoteApiError=9]="RemoteApiError",e[e.ServerUpdateInProgress=10]="ServerUpdateInProgress",e[e.UserNameChange=11]="UserNameChange",e[e.UserSidChange=12]="UserSidChange",e[e.UserMismatchNameSid=13]="UserMismatchNameSid",e[e.UserMismatchPasswordSid=14]="UserMismatchPasswordSid",e[e.UserPasswordLength=15]="UserPasswordLength",e[e.UserColonInName=16]="UserColonInName",e[e.UserMissingName=17]="UserMissingName",e[e.InstanceRelocateOnline=18]="InstanceRelocateOnline",e[e.InstanceAtExistingPath=19]="InstanceAtExistingPath",e[e.InstanceDetachOnline=20]="InstanceDetachOnline",e[e.InstanceAtConflictingPath=21]="InstanceAtConflictingPath",e[e.InstanceLimitReached=22]="InstanceLimitReached",e[e.InstanceWhitespaceName=23]="InstanceWhitespaceName",e[e.InstanceHeaderRequired=24]="InstanceHeaderRequired",e[e.RequiresPosixSystemIdentity=25]="RequiresPosixSystemIdentity",e[e.ConfigurationFileUpdated=26]="ConfigurationFileUpdated",e[e.ConfigurationDirectoryNotEmpty=27]="ConfigurationDirectoryNotEmpty",e[e.DEPRECATEDUnusedErrorCode1=28]="DEPRECATEDUnusedErrorCode1",e[e.RepoMismatchUserAndAccessToken=29]="RepoMismatchUserAndAccessToken",e[e.RepoCloning=30]="RepoCloning",e[e.RepoBusy=31]="RepoBusy",e[e.RepoExists=32]="RepoExists",e[e.RepoMissing=33]="RepoMissing",e[e.RepoMismatchShaAndReference=34]="RepoMismatchShaAndReference",e[e.RepoMismatchShaAndUpdate=35]="RepoMismatchShaAndUpdate",e[e.DEPRECATEDUnusedErrorCode2=36]="DEPRECATEDUnusedErrorCode2",e[e.RepoDuplicateTestMerge=37]="RepoDuplicateTestMerge",e[e.RepoWhitespaceCommitterName=38]="RepoWhitespaceCommitterName",e[e.RepoWhitespaceCommitterEmail=39]="RepoWhitespaceCommitterEmail",e[e.ApiPageTooLarge=40]="ApiPageTooLarge",e[e.ApiInvalidPageOrPageSize=41]="ApiInvalidPageOrPageSize",e[e.ChatBotWrongChannelType=42]="ChatBotWrongChannelType",e[e.ChatBotWhitespaceConnectionString=43]="ChatBotWhitespaceConnectionString",e[e.ChatBotWhitespaceName=44]="ChatBotWhitespaceName",e[e.ChatBotProviderMissing=45]="ChatBotProviderMissing",e[e.DEPRECATEDUnusedErrorCode3=46]="DEPRECATEDUnusedErrorCode3",e[e.ChatBotMax=47]="ChatBotMax",e[e.ChatBotMaxChannels=48]="ChatBotMaxChannels",e[e.ByondDirectXInstallFail=49]="ByondDirectXInstallFail",e[e.ByondDownloadFail=50]="ByondDownloadFail",e[e.ByondNoVersionsInstalled=51]="ByondNoVersionsInstalled",e[e.DreamMakerNeverValidated=52]="DreamMakerNeverValidated",e[e.DreamMakerInvalidValidation=53]="DreamMakerInvalidValidation",e[e.CannotRemoveLastAuthenticationOption=54]="CannotRemoveLastAuthenticationOption",e[e.DreamMakerNoDme=55]="DreamMakerNoDme",e[e.DreamMakerMissingDme=56]="DreamMakerMissingDme",e[e.DreamMakerExitCode=57]="DreamMakerExitCode",e[e.DreamMakerCompileJobInProgress=58]="DreamMakerCompileJobInProgress",e[e.InstanceMissingDreamDaemonSettings=59]="InstanceMissingDreamDaemonSettings",e[e.InstanceMissingDreamMakerSettings=60]="InstanceMissingDreamMakerSettings",e[e.InstanceMissingRepositorySettings=61]="InstanceMissingRepositorySettings",e[e.InstanceUpdateTestMergeConflict=62]="InstanceUpdateTestMergeConflict",e[e.RepoCredentialsRequired=63]="RepoCredentialsRequired",e[e.RepoCannotAuthenticate=64]="RepoCannotAuthenticate",e[e.RepoReferenceRequired=65]="RepoReferenceRequired",e[e.WatchdogRunning=66]="WatchdogRunning",e[e.WatchdogCompileJobCorrupted=67]="WatchdogCompileJobCorrupted",e[e.WatchdogStartupFailed=68]="WatchdogStartupFailed",e[e.WatchdogStartupTimeout=69]="WatchdogStartupTimeout",e[e.RepoUnsupportedTestMergeRemote=70]="RepoUnsupportedTestMergeRemote",e[e.RepoSwappedShaOrReference=71]="RepoSwappedShaOrReference",e[e.RepoMergeConflict=72]="RepoMergeConflict",e[e.RepoReferenceNotTracking=73]="RepoReferenceNotTracking",e[e.RepoTestMergeConflict=74]="RepoTestMergeConflict",e[e.InstanceNotAtWhitelistedPath=75]="InstanceNotAtWhitelistedPath",e[e.DreamDaemonDoubleSoft=76]="DreamDaemonDoubleSoft",e[e.DeploymentPagerRunning=77]="DeploymentPagerRunning",e[e.DreamDaemonPortInUse=78]="DreamDaemonPortInUse",e[e.PostDeployFailure=79]="PostDeployFailure",e[e.WatchdogNotRunning=80]="WatchdogNotRunning",e[e.ResourceNotPresent=81]="ResourceNotPresent",e[e.ResourceNeverPresent=82]="ResourceNeverPresent",e[e.GitHubApiRateLimit=83]="GitHubApiRateLimit",e[e.JobStopped=84]="JobStopped",e[e.MissingGCore=85]="MissingGCore",e[e.GCoreFailure=86]="GCoreFailure",e[e.RepoTestMergeInvalidRemote=87]="RepoTestMergeInvalidRemote",e[e.ByondNonExistentCustomVersion=88]="ByondNonExistentCustomVersion",e[e.DreamDaemonOffline=89]="DreamDaemonOffline",e[e.InstanceOffline=90]="InstanceOffline",e[e.ChatCannotConnectProvider=91]="ChatCannotConnectProvider",e[e.ByondDreamDaemonFirewallFail=92]="ByondDreamDaemonFirewallFail",e[e.NoPortsAvailable=93]="NoPortsAvailable",e[e.PortNotAvailable=94]="PortNotAvailable",e[e.AdminUserCannotOAuth=95]="AdminUserCannotOAuth",e[e.OAuthProviderDisabled=96]="OAuthProviderDisabled",e[e.FileUploadExpired=97]="FileUploadExpired",e[e.UserGroupAndPermissionSet=98]="UserGroupAndPermissionSet",e[e.UserGroupNotEmpty=99]="UserGroupNotEmpty",e[e.UserLimitReached=100]="UserLimitReached",e[e.UserGroupLimitReached=101]="UserGroupLimitReached",e[e.DeploymentTimeout=102]="DeploymentTimeout"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Create=2]="Create",e[e.Rename=4]="Rename",e[e.Relocate=8]="Relocate",e[e.SetOnline=16]="SetOnline",e[e.Delete=32]="Delete",e[e.List=64]="List",e[e.SetConfiguration=128]="SetConfiguration",e[e.SetAutoUpdate=256]="SetAutoUpdate",e[e.SetChatBotLimit=512]="SetChatBotLimit",e[e.GrantPermissions=1024]="GrantPermissions"}(f||(f={})),function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.Create=4]="Create"}(m||(m={})),function(e){e.GitHub="GitHub",e.Discord="Discord",e.TGForums="TGForums",e.Keycloak="Keycloak"}(g||(g={})),function(e){e[e.Unknown=0]="Unknown",e[e.GitHub=1]="GitHub",e[e.GitLab=2]="GitLab"}(v||(v={})),function(e){e[e.None=0]="None",e[e.CancelPendingChanges=1]="CancelPendingChanges",e[e.SetOrigin=2]="SetOrigin",e[e.SetSha=4]="SetSha",e[e.MergePullRequest=8]="MergePullRequest",e[e.UpdateBranch=16]="UpdateBranch",e[e.ChangeCommitter=32]="ChangeCommitter",e[e.ChangeTestMergeCommits=64]="ChangeTestMergeCommits",e[e.ChangeCredentials=128]="ChangeCredentials",e[e.SetReference=256]="SetReference",e[e.Read=512]="Read",e[e.ChangeAutoUpdateSettings=1024]="ChangeAutoUpdateSettings",e[e.Delete=2048]="Delete",e[e.CancelClone=4096]="CancelClone",e[e.ChangeSubmoduleUpdate=8192]="ChangeSubmoduleUpdate"}(b||(b={})),function(e){e[e.Administration=0]="Administration",e[e.InstanceManager=1]="InstanceManager",e[e.Repository=2]="Repository",e[e.Byond=3]="Byond",e[e.DreamMaker=4]="DreamMaker",e[e.DreamDaemon=5]="DreamDaemon",e[e.ChatBots=6]="ChatBots",e[e.Configuration=7]="Configuration",e[e.InstancePermissionSet=8]="InstancePermissionSet"}(R||(R={})),function(e){e[e.Offline=0]="Offline",e[e.Restoring=1]="Restoring",e[e.Online=2]="Online",e[e.DelayedRestart=3]="DelayedRestart"}(C||(C={})),function(e){e.Json="application/json",e.FormData="multipart/form-data",e.UrlEncoded="application/x-www-form-urlencoded"}(Z||(Z={}));var k=function(){function e(e){var t=this,r=void 0===e?{}:e,n=r.securityWorker,o=r.secure,a=r.format,s=(0,I.Z)(r,T);this.instance=void 0,this.securityData=null,this.securityWorker=void 0,this.secure=void 0,this.format=void 0,this.setSecurityData=function(e){t.securityData=e},this.request=function(){var e=(0,P.Z)(y().mark((function e(r){var n,o,a,s,i,u,c,d,l,p;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.secure,o=r.path,a=r.type,s=r.query,i=r.format,u=r.body,c=(0,I.Z)(r,O),e.t1=("boolean"==typeof n?n:t.secure)&&t.securityWorker,!e.t1){e.next=6;break}return e.next=5,t.securityWorker(t.securityData);case 5:e.t1=e.sent;case 6:if(e.t0=e.t1,e.t0){e.next=9;break}e.t0={};case 9:return d=e.t0,l=t.mergeRequestParams(c,d),p=i&&t.format||void 0,a===Z.FormData&&u&&null!==u&&"object"==typeof u&&(l.headers.common={Accept:"*/*"},l.headers.post={},l.headers.put={},u=t.createFormData(u)),e.abrupt("return",t.instance.request((0,E.Z)({},l,{headers:(0,E.Z)({},a&&a!==Z.FormData?{"Content-Type":a}:{},l.headers||{}),params:s,responseType:p,data:u,url:o})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.instance=D().create((0,E.Z)({},s,{baseURL:s.baseURL||""})),this.secure=o,this.format=a,this.securityWorker=n}var t=e.prototype;return t.mergeRequestParams=function(e,t){return(0,E.Z)({},this.instance.defaults,e,t||{},{headers:(0,E.Z)({},this.instance.defaults.headers||{},e.headers||{},t&&t.headers||{})})},t.createFormData=function(e){return Object.keys(e||{}).reduce((function(t,r){var n=e[r];return t.append(r,n instanceof Blob?n:"object"==typeof n&&null!==n?JSON.stringify(n):""+n),t}),new FormData)},e}(),x=function(e){var t=this;this.http=void 0,this.homeControllerHome=function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/",method:"GET",format:"json"},e))},this.homeControllerCreateToken=function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/",method:"POST",secure:!0,format:"json"},e))},this.administration={administrationControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/Administration",method:"GET",secure:!0,format:"json"},e))},administrationControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Administration",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},administrationControllerDelete:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/Administration",method:"DELETE",secure:!0},e))},administrationControllerListLogs:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Administration/Logs",method:"GET",query:e,secure:!0,format:"json"},r))},administrationControllerGetLog:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Administration/Logs/"+e,method:"GET",secure:!0,format:"json"},r))}},this.byond={byondControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/Byond",method:"GET",secure:!0,format:"json"},e))},byondControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Byond",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},byondControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Byond/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.chat={chatControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Chat",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},chatControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Chat",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},chatControllerDelete:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Chat/"+e,method:"DELETE",secure:!0},r))},chatControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Chat/"+e,method:"GET",secure:!0,format:"json"},r))},chatControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Chat/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.config={configurationControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},configurationControllerCreateDirectory:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},configurationControllerDeleteDirectory:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config",method:"DELETE",body:e,secure:!0,type:Z.Json},r))},configurationControllerFile:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config/File/"+e,method:"GET",secure:!0,format:"json"},r))},configurationControllerDirectory:function(e,r){var n=e.directoryPath,o=(0,I.Z)(e,A);return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config/List/"+n,method:"GET",query:o,secure:!0,format:"json"},r))},configurationControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Config/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.dreamDaemon={dreamDaemonControllerCreate:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamDaemon",method:"PUT",secure:!0,format:"json"},e))},dreamDaemonControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamDaemon",method:"GET",secure:!0,format:"json"},e))},dreamDaemonControllerDelete:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamDaemon",method:"DELETE",secure:!0},e))},dreamDaemonControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/DreamDaemon",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},dreamDaemonControllerRestart:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamDaemon",method:"PATCH",secure:!0,format:"json"},e))},dreamDaemonControllerCreateDump:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamDaemon/Diagnostics",method:"PATCH",secure:!0,format:"json"},e))}},this.dreamMaker={dreamMakerControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamMaker",method:"GET",secure:!0,format:"json"},e))},dreamMakerControllerCreate:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/DreamMaker",method:"PUT",secure:!0,format:"json"},e))},dreamMakerControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/DreamMaker",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},dreamMakerControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/DreamMaker/"+e,method:"GET",secure:!0,format:"json"},r))},dreamMakerControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/DreamMaker/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.instance={instanceControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},instanceControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},instanceControllerDelete:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance/"+e,method:"DELETE",secure:!0},r))},instanceControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance/"+e,method:"GET",secure:!0,format:"json"},r))},instanceControllerGrantPermissions:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance/"+e,method:"PATCH",secure:!0},r))},instanceControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Instance/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.instancePermissionSet={instancePermissionSetControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},instancePermissionSetControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},instancePermissionSetControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet",method:"GET",secure:!0,format:"json"},e))},instancePermissionSetControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet/List",method:"GET",query:e,secure:!0,format:"json"},r))},instancePermissionSetControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet/"+e,method:"GET",secure:!0,format:"json"},r))},instancePermissionSetControllerDelete:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/InstancePermissionSet/"+e,method:"DELETE",secure:!0},r))}},this.job={jobControllerRead:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Job",method:"GET",query:e,secure:!0,format:"json"},r))},jobControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Job/List",method:"GET",query:e,secure:!0,format:"json"},r))},jobControllerDelete:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Job/"+e,method:"DELETE",secure:!0,format:"json"},r))},jobControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Job/"+e,method:"GET",secure:!0,format:"json"},r))}},this.repository={repositoryControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Repository",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},repositoryControllerDelete:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/Repository",method:"DELETE",secure:!0,format:"json"},e))},repositoryControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/Repository",method:"GET",secure:!0,format:"json"},e))},repositoryControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Repository",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))}},this.transfer={transferControllerDownload:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/Transfer",method:"GET",query:e,secure:!0},r))},transferControllerUpload:function(e,r,n){return void 0===n&&(n={}),t.http.request((0,E.Z)({path:"/Transfer",method:"PUT",query:e,body:r,secure:!0},n))}},this.user={userControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/User",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},userControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/User",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},userControllerRead:function(e){return void 0===e&&(e={}),t.http.request((0,E.Z)({path:"/User",method:"GET",secure:!0,format:"json"},e))},userControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/User/List",method:"GET",query:e,secure:!0,format:"json"},r))},userControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/User/"+e,method:"GET",secure:!0,format:"json"},r))}},this.userGroup={userGroupControllerCreate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/UserGroup",method:"PUT",body:e,secure:!0,type:Z.Json,format:"json"},r))},userGroupControllerUpdate:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/UserGroup",method:"POST",body:e,secure:!0,type:Z.Json,format:"json"},r))},userGroupControllerGetId:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/UserGroup/"+e,method:"GET",secure:!0,format:"json"},r))},userGroupControllerDelete:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/UserGroup/"+e,method:"DELETE",secure:!0},r))},userGroupControllerList:function(e,r){return void 0===r&&(r={}),t.http.request((0,E.Z)({path:"/UserGroup/List",method:"GET",query:e,secure:!0,format:"json"},r))}},this.http=e}},1895:function(e,t,r){var n;r.d(t,{P:function(){return n}}),function(e){e[e.Password=0]="Password",e[e.OAuth=1]="OAuth"}(n||(n={}))},6846:function(e,t,r){r.d(t,{jK:function(){return n},_T:function(){return o},ZP:function(){return c}});var n,o,a=r(6964),s=r(8509),i=r(7961),u=r(2522);!function(e){e.OK='Isnt displayed but is used as an "error" when everything is ok',e.HTTP_BAD_REQUEST="error.http.bad_request",e.HTTP_DATA_INEGRITY="error.http.data_integrity",e.HTTP_API_MISMATCH="error.http.api_mismatch",e.HTTP_SERVER_ERROR="error.http.server_error",e.HTTP_UNIMPLEMENTED="error.http.unimplemented",e.HTTP_ACCESS_DENIED="error.http.access_denied",e.HTTP_NOT_ACCEPTABLE="error.http.not_acceptable",e.UNHANDLED_RESPONSE="error.unhandled_response",e.UNHANDLED_GLOBAL_RESPONSE="error.unhandled_global_response",e.AXIOS="error.axios",e.GITHUB_FAIL="error.github",e.APP_FAIL="error.app",e.NO_APIPATH="error.no_apipath",e.LOGIN_FAIL="error.login.bad_user_pass",e.LOGIN_NOCREDS="error.login.no_creds",e.LOGIN_DISABLED="error.login.user_disabled",e.LOGIN_BAD_OAUTH="error.login.bad_oauth",e.LOGIN_RATELIMIT="error.login.rate_limit",e.USER_NO_SYS_IDENT="error.user.no_sys_ident",e.USER_NOT_FOUND="error.user.not_found",e.ADMIN_GITHUB_RATE="error.admin.rate",e.ADMIN_GITHUB_ERROR="error.admin.error",e.ADMIN_WATCHDOG_UNAVAIL="error.admin.watchdog.avail",e.ADMIN_VERSION_NOT_FOUND="error.admin.update.notfound",e.ADMIN_LOGS_IO_ERROR="error.admin.logs.io",e.JOB_JOB_NOT_FOUND="error.job.not_found",e.JOB_JOB_COMPLETE="error.job.complete",e.TRANSFER_NOT_AVAILABLE="error.transfer.not_available",e.UPLOAD_FAILED="error.transfer.upload_failed",e.GROUP_NOT_FOUND="error.group.not_found",e.GROUP_NOT_EMPTY="error.group.not_empty",e.NO_DB_ENTITY="error.no_db_entity"}(n||(n={})),function(e){e[e.LOCALE=0]="LOCALE",e[e.TEXT=1]="TEXT"}(o||(o={}));var c=function(e,t,r){var n,c;if(this.code=void 0,this.desc=void 0,this.extendedInfo=void 0,this.originalErrorMessage=void 0,this.code=e,"errorMessage"in t){var d=t.errorMessage;this.originalErrorMessage=d,this.desc={type:o.TEXT,desc:s.jK[d.errorCode]+": "+d.message+(d.additionalData?": "+d.additionalData:"")},d.message||(this.desc={type:o.TEXT,desc:s.jK[d.errorCode]})}if("jsError"in t){var l=t.jsError;this.desc={type:o.TEXT,desc:l.name+": "+l.message}}var p=(new Error).stack;null!=r&&r.config.headers.Authorization&&(r.config.headers.Authorization="*********");var h=JSON.stringify({addon:t,origin:r,config:i.ZP,stack:p});h=(h=h.replace(/Basic (?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?/g,"Basic **************")).replace(/{"username":".+?","password":".+?"}/g,'{"username":"*******","password":"*******"}'),u.Z.isTokenValid()&&(h=(0,a.ko)(h,u.Z.token.bearer,"**************")),i.ZP.githubtoken.value&&(h=(0,a.ko)(h,i.ZP.githubtoken.value,"**************")),this.extendedInfo=h,console.error("Error occured within the application: "+this.code+" ("+(null!=(n=null==(c=this.desc)?void 0:c.desc)?n:"No description")+")",this),window.breakonerror}},3803:function(e,t,r){var n;r.d(t,{G:function(){return n}}),function(e){e[e.OK=0]="OK",e[e.ERROR=1]="ERROR"}(n||(n={}));t.Z=function(e){return Object.freeze(Object.assign({},e))}},7806:function(e,t,r){var n=r(7961);t.Z=new(function(){function e(){}var t=e.prototype;return t.loadconfig=function(){for(var e=0,t=Object.values(n.ZP);e<t.length;e++){var r=t[e];this.getconfig(r)}console.log("Configuration loaded",n.ZP)},t.saveconfig=function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var o=r[t],a=o[0],s=o[1];this.setconfig(a,s)}console.log("Configuration saved",n.ZP)},t.setconfig=function(e,t){if(void 0===(null==t?void 0:t.value))return this.deleteconfig(e);if("num"===t.type){var r=parseInt(t.value);if(Number.isNaN(t.value))return;if(void 0!==t.min&&r<t.min)return;if(void 0!==t.max&&r>t.max)return;t.value=r}t.callback&&t.callback(n.ZP[e].value,t.value),n.ZP[e].value=t.value;try{localStorage.setItem(t.id,JSON.stringify(t.value))}catch(e){}},t.getconfig=function(e){try{var t=localStorage.getItem(e.id);if(null!=t){var r=JSON.parse(t);null!=r&&(e.value=r)}}catch(e){}},t.deleteconfig=function(e){try{var t=n.ZP[e];localStorage.removeItem(t.id)}catch(e){}},e}())},2522:function(e,t){t.Z=new(function(){function e(){this.token=void 0,this.credentials=void 0}return e.prototype.isTokenValid=function(){return this.credentials&&this.token&&this.token.bearer},e}())},9521:function(e,t,r){var n=r(5861),o=r(3144),a=r(7326),s=r(1721),i=r(7757),u=r.n(i),c=r(1249),d=r(2527),l=r(6964),p=r(8509),h=r(6352),f=r(5870),m=r(3204),g=r(6846),v=r(3803),b=r(5631),R=r(6942),C=r(7961),Z=r(452);function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z=new(function(e){(0,s.Z)(r,e);var t=r.prototype;function r(){var t;return(t=e.call(this)||this).fastmodecount=0,t.currentLoop=new Date(0),t.accessibleInstances=new Map,t.enableJobProgressWorkaround=void 0,t.errors=[],t.jobs=new Map,t.jobsByInstance=new Map,t.jobCallback=new Map,t.lastSeenJob=-1,t.loop=t.loop.bind((0,a.Z)(t)),t.reset=t.reset.bind((0,a.Z)(t)),t.restartLoop=t.restartLoop.bind((0,a.Z)(t)),t}return t.reset=function(e){var t=this;void 0===e&&(e=!0),e&&(this.jobs=new Map,this.jobsByInstance=new Map),this.reloadAccessibleInstances().then(this.restartLoop).catch((function(e){t.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(e)}))}))},t.init=function(){var e=this;window.clients.JobsController=this,b.Z.on("purgeCache",this.reset),h.Z.on("instanceChange",(function(){return e.reset(!1)})),Z.Z.addHook((0,n.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.reset(!1));case 1:case"end":return t.stop()}}),t)})))),b.Z.getServerInfo().then((function(t){t.code===v.G.OK&&(e.enableJobProgressWorkaround=(0,c.satisfies)(t.payload.version,"<4.11.0"))})).catch((function(e){return console.error(e)}))},t.reloadAccessibleInstances=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n,o,a,s,i,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),r=[],e.next=4,h.Z.listInstances({pageSize:100});case 4:if((n=e.sent).code!==v.G.ERROR){e.next=10;break}return this.errors.push(n.error),e.abrupt("return");case 10:r.push.apply(r,n.payload.content);case 11:o=2;case 12:if(!(o<=n.payload.totalPages)){e.next=25;break}return e.next=15,h.Z.listInstances({page:o,pageSize:100});case 15:if((a=e.sent).code!==v.G.ERROR){e.next=21;break}return this.errors.push(a.error),e.abrupt("return");case 21:r.push.apply(r,a.payload.content);case 22:o++,e.next=12;break;case 25:return s=new Map,i=r.filter((function(e){return e.online})).map((function(e){return f.Z.getCurrentInstancePermissionSet(e.id).then((function(t){t.code!==v.G.ERROR?s.set(e.id,e):t.error.code!==g.jK.HTTP_ACCESS_DENIED&&c.errors.push(t.error)}))})),e.next=29,Promise.all(i);case 29:this.accessibleInstances=s,t&&window.setTimeout((function(){c.reloadAccessibleInstances(!0)}),C.ZP.instanceprobetimer.value);case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.restartLoop=function(){var e=this,t=new Date(Date.now());this.currentLoop=t,window.setTimeout((function(){e.loop(t).catch((function(t){return e.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(t)}))}))}),0)},t._registerJob=function(e,t){var r,n=e;t&&(n.instanceid=t);var o=null!=(r=this.jobsByInstance.get(n.instanceid))?r:new Map;this.jobsByInstance.set(n.instanceid,o),o.set(n.id,n),this.jobs.set(n.id,n)},t.registerJob=function(e,t){this._registerJob(e,t),this.restartLoop()},t.loop=function(){var e=(0,n.Z)(u().mark((function e(t){var r,o,a,s,i,c,d,l,h,f,b,R,Z,P,I,S=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.currentLoop){e.next=2;break}return e.abrupt("return");case 2:for(this.errors=[],r=0,o=[],a=this.lastSeenJob,s=function(){var e=c.value,s=function(){var o=(0,n.Z)(u().mark((function n(o){var s,i,c,d,l,p,h,f,g;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(i=E(o);!(c=i()).done;)d=c.value,S._registerJob(d),a=Math.max(a,d.id);return l=o.map((function(e){return e.id})),p=Array.from(S.jobs.values()).filter((function(e){return!e.stoppedAt})).filter((function(t){return t.instanceid===e})).map((function(e){return e.id})),h=p.filter((function(e){return!l.includes(e)})),f=null!=(s=S.jobsByInstance.get(e))?s:new Map,S.jobsByInstance.set(e,f),g=[],h.forEach((function(t){g.push(m.Z.getJob(e,t).then((function(e){e.code!==v.G.ERROR?(f.set(e.payload.id,e.payload),S.jobs.set(e.payload.id,e.payload)):S.errors.push(e.error)})))})),n.next=10,Promise.all(g);case 10:if(t===S.currentLoop){n.next=12;break}return n.abrupt("return");case 12:r+=o.length;case 13:case"end":return n.stop()}}),n)})));return function(e){return o.apply(this,arguments)}}(),i=function(t){var r;t.code===g.jK.HTTP_DATA_INEGRITY&&(null==(r=t.originalErrorMessage)?void 0:r.errorCode)===p.jK.InstanceOffline?(console.log("[JobsController] Clearing instance "+e+" as it is now offline"),S.accessibleInstances.delete(e),S.reloadAccessibleInstances().catch((function(e){S.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(e)}))}))):S.errors.push(t)},d=-1===S.lastSeenJob?m.Z.listActiveJobs:m.Z.listJobs;o.push(d(e,{page:1,pageSize:10}).then(function(){var r=(0,n.Z)(u().mark((function r(n){var o,a,c,l,p,h;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t===S.currentLoop){r.next=2;break}return r.abrupt("return");case 2:if(n.code!==v.G.OK){r.next=32;break}o=n.payload.content,a=2;case 5:if(!(a<=n.payload.totalPages)){r.next=26;break}c=E(o);case 7:if((l=c()).done){r.next=13;break}if(!(l.value.id<=S.lastSeenJob)){r.next=11;break}return r.abrupt("break",26);case 11:r.next=7;break;case 13:return r.next=15,d(e,{page:a,pageSize:10});case 15:if((p=r.sent).code!==v.G.ERROR){r.next=21;break}return i(p.error),r.abrupt("return");case 21:(h=n.payload.content).push.apply(h,p.payload.content),o=n.payload.content;case 23:a++,r.next=5;break;case 26:if(t===S.currentLoop){r.next=28;break}return r.abrupt("return");case 28:return r.next=30,s(n.payload.content.filter((function(e){return e.id>S.lastSeenJob||S.jobs.has(e.id)})));case 30:r.next=33;break;case 32:i(n.error);case 33:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){console.error(e)})))},i=E(this.accessibleInstances.keys());!(c=i()).done;)s();return e.next=10,Promise.all(o);case 10:for(this.lastSeenJob=a,o.length=0,d=function(){var e=h.value;S.enableJobProgressWorkaround&&void 0===e.progress&&!e.stoppedAt&&S.accessibleInstances.has(e.instanceid)&&o.push(m.Z.getJob(e.instanceid,e.id).then((function(r){var n;t===S.currentLoop&&(r.code===v.G.OK?e.progress=r.payload.progress:r.error.code===g.jK.HTTP_DATA_INEGRITY&&(null==(n=r.error.originalErrorMessage)?void 0:n.errorCode)===p.jK.InstanceOffline?(console.log("[JobsController] Clearing instance "+e.instanceid+" as it is now offline"),S.accessibleInstances.delete(e.instanceid),S.reloadAccessibleInstances().catch((function(e){S.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(e)}))}))):S.errors.push(r.error))}))),o.push(S.canCancel(e,S.errors).then((function(r){t===S.currentLoop&&(e.canCancel=r)})))},l=E(this.jobs.values());!(h=l()).done;)d();return e.next=16,Promise.all(o);case 16:if(t===this.currentLoop){e.next=18;break}return e.abrupt("return");case 18:this.emit("jobsLoaded"),f=E(this.jobs.values());case 20:if((b=f()).done){e.next=31;break}if((R=b.value).stoppedAt){e.next=24;break}return e.abrupt("continue",29);case 24:if(Z=this.jobCallback.get(R.id)){e.next=27;break}return e.abrupt("continue",29);case 27:for(P=E(Z);!(I=P()).done;)(0,I.value)(R);this.jobCallback.delete(R.id);case 29:e.next=20;break;case 31:this.fastmodecount&&t===this.currentLoop?(window.setTimeout((function(){S.loop(t).catch((function(e){return S.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(e)}))}))}),800),this.fastmodecount--,console.log("JobsController will remain in fastmode for "+this.fastmodecount+" cycles")):window.setTimeout((function(){S.loop(t).catch((function(e){return S.errors.push(new g.ZP(g.jK.APP_FAIL,{jsError:Error(e)}))}))}),1e3*(r?C.ZP.jobpollactive.value:C.ZP.jobpollinactive.value));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.canCancel=function(){var e=(0,n.Z)(u().mark((function e(t,r){var n,o,a,s,i,c,d,h,m,g,b,C,Z,E,P,I,S,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.canCancel){e.next=2;break}return e.abrupt("return",t.canCancel);case 2:if(void 0!==t.cancelRightsType){e.next=4;break}return e.abrupt("return",!0);case 4:e.t0=t.cancelRightsType,e.next=e.t0===p.KT.Administration?7:e.t0===p.KT.InstanceManager?17:e.t0===p.KT.Byond?27:e.t0===p.KT.ChatBots?37:e.t0===p.KT.Configuration?47:e.t0===p.KT.DreamDaemon?57:e.t0===p.KT.DreamMaker?67:e.t0===p.KT.InstancePermissionSet?77:e.t0===p.KT.Repository?87:97;break;case 7:return e.next=9,R.Z.getCurrentUser();case 9:if((n=e.sent).code!==v.G.OK){e.next=15;break}return o=t.cancelRight,e.abrupt("return",!!((0,l.Zg)(n.payload).administrationRights&o));case 15:return r.push(n.error),e.abrupt("return",!1);case 17:return e.next=19,R.Z.getCurrentUser();case 19:if((a=e.sent).code!==v.G.OK){e.next=25;break}return s=t.cancelRight,e.abrupt("return",!!((0,l.Zg)(a.payload).instanceManagerRights&s));case 25:return r.push(a.error),e.abrupt("return",!1);case 27:return e.next=29,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 29:if((i=e.sent).code!==v.G.OK){e.next=35;break}return c=t.cancelRight,e.abrupt("return",!!(i.payload.byondRights&c));case 35:return r.push(i.error),e.abrupt("return",!1);case 37:return e.next=39,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 39:if((d=e.sent).code!==v.G.OK){e.next=45;break}return h=t.cancelRight,e.abrupt("return",!!(d.payload.chatBotRights&h));case 45:return r.push(d.error),e.abrupt("return",!1);case 47:return e.next=49,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 49:if((m=e.sent).code!==v.G.OK){e.next=55;break}return g=t.cancelRight,e.abrupt("return",!!(m.payload.configurationRights&g));case 55:return r.push(m.error),e.abrupt("return",!1);case 57:return e.next=59,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 59:if((b=e.sent).code!==v.G.OK){e.next=65;break}return C=t.cancelRight,e.abrupt("return",!!(b.payload.dreamDaemonRights&C));case 65:return r.push(b.error),e.abrupt("return",!1);case 67:return e.next=69,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 69:if((Z=e.sent).code!==v.G.OK){e.next=75;break}return E=t.cancelRight,e.abrupt("return",!!(Z.payload.dreamMakerRights&E));case 75:return r.push(Z.error),e.abrupt("return",!1);case 77:return e.next=79,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 79:if((P=e.sent).code!==v.G.OK){e.next=85;break}return I=t.cancelRight,e.abrupt("return",!!(P.payload.instancePermissionSetRights&I));case 85:return r.push(P.error),e.abrupt("return",!1);case 87:return e.next=89,f.Z.getCurrentInstancePermissionSet(t.instanceid);case 89:if((S=e.sent).code!==v.G.OK){e.next=95;break}return y=t.cancelRight,e.abrupt("return",!!(S.payload.repositoryRights&y));case 95:return r.push(S.error),e.abrupt("return",!1);case 97:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),t.cancelJob=function(){var e=(0,n.Z)(u().mark((function e(t,r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.jobs.get(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,m.Z.deleteJob(n.instanceid,t);case 5:if((o=e.sent).code!==v.G.OK){e.next=10;break}return e.abrupt("return",!0);case 10:return r(o.error),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t.clearJob=function(e,t){var r;void 0===t&&(t=!1);var n=this.jobs.get(e);return!!n&&(null==(r=this.jobsByInstance.get(n.instanceid))||r.delete(e),this.jobs.delete(e),t||this.emit("jobsLoaded"),!0)},t.registerCallback=function(e,t){var r,n=null!=(r=this.jobCallback.get(e))?r:new Set;n.add(t),this.jobCallback.set(e,n)},(0,o.Z)(r,[{key:"fastmode",set:function(e){console.log("JobsController going in fastmode for "+e+" cycles"),this.fastmodecount=e,this.restartLoop()}}]),r}(d.TypedEmitter))},452:function(e,t,r){var n=r(1721);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).promiseHooks=new Set,t}(0,n.Z)(t,e);var r=t.prototype;return r.runHooks=function(e){var t=this;console.log("Running login hooks");for(var r,n=0,a=[],s=function(){var t=r.value,o=n;console.log("Running hook "+t.name+"("+o+")"),a.push(new Promise((function(r,n){t(e).then((function(){console.log("Done hook "+t.name+"("+o+")"),r()})).catch((function(e){console.error("Error running hook "+t.name+"("+o+"): ",e),n(e)}))}))),n++},i=o(this.promiseHooks);!(r=i()).done;)s();Promise.all(a).then((function(){console.log("Running post login event"),t.emit("loginSuccess",e)})).catch((function(){return console.error("An error occured while running login hooks")}))},r.addHook=function(e){this.promiseHooks.add(e)},r.removeHook=function(e){this.promiseHooks.delete(e)},t}(r(2527).TypedEmitter);t.Z=new s},7961:function(e,t,r){r.d(t,{zQ:function(){return n},mf:function(){return o}});var n,o,a=r(6755);!function(e){e.ALWAYS="always",e.AUTO="auto",e.NEVER="never"}(n||(n={})),function(e){e.AUTO="auto",e.COLLAPSE="collapse",e.EXPAND="expand"}(o||(o={}));var s={githubtoken:{id:"config.githubtoken",type:"pwd",value:""},apipath:{id:"config.apipath",type:"str",value:a.cV},jobpollinactive:{id:"config.jobpollinactive",type:"num",value:15},jobpollactive:{id:"config.jobpollactive",type:"num",value:5},jobswidgetdisplay:{id:"config.jobswidgetdisplay",type:"enum",possibleValues:n,value:n.AUTO},instanceprobetimer:{id:"config.instanceprobetimer",type:"num",value:60},itemsperpage:{id:"config.itemsperpage",type:"num",value:25,min:1,max:100},instanceeditsidebar:{id:"config.instanceeditsidebar",type:"enum",possibleValues:o,value:o.AUTO},showjson:{id:"config.showjson",type:"bool",value:"DEV"===a.IK}};t.ZP=s}}]);
//# sourceMappingURL=764.da5736732a2e3bc5a30c.bundle.js.map