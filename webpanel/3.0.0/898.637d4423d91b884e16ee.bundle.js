"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[898],{4898:function(e,t,r){r.r(t);var s=r(5861),a=r(7326),n=r(1721),i=r(7757),o=r.n(i),u=r(7294),c=r(5005),l=r(1555),m=r(2258),h=r(4012),p=r(5977),d=r(3803),E=r(6942),f=r(4615),v=r(1320),Z=r(3e3),g=r(5855),w=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={errors:[],password1:"",password2:"",username:"",sysuser:""},r.submitTGS=r.submitTGS.bind((0,a.Z)(r)),r.submitSYS=r.submitSYS.bind((0,a.Z)(r)),r}(0,n.Z)(t,e);var r=t.prototype;return r.validate=function(){var e=!1;return this.state.password1.length<this.context.serverInfo.minimumPasswordLength?(e=!0,this.setState({lengthError:!0})):this.setState({lengthError:!1}),this.state.password2!==this.state.password1?(e=!0,this.setState({matchError:!0})):this.setState({matchError:!1}),e},r.submitTGS=function(){var e=(0,s.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.validate()){e.next=3;break}return e.abrupt("return");case 3:if(this.state.username){e.next=5;break}return e.abrupt("return");case 5:return this.setState({creating:!0}),e.next=8,E.Z.createUser({name:this.state.username,password:this.state.password1});case 8:(r=e.sent).code==d.G.OK?this.props.postCreateAction(r.payload,this.props.history):(this.addError(r.error),this.setState({creating:!1}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.submitSYS=function(){var e=(0,s.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.sysuser){e.next=3;break}return e.abrupt("return");case 3:return this.setState({creating:!0}),e.next=6,E.Z.createUser({systemIdentifier:this.state.sysuser});case 6:(r=e.sent).code==d.G.OK?this.props.postCreateAction(r.payload,this.props.history):(this.addError(r.error),this.setState({creating:!1}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.addError=function(e){this.setState((function(t){var r=Array.from(t.errors);return r.push(e),{errors:r}}))},r.render=function(){var e=this;if(this.state.creating)return u.createElement(g.Z,{text:"loading.user.create"});return u.createElement("div",{className:"text-center"},this.state.errors.map((function(t,r){if(t)return u.createElement(Z.ZP,{key:r,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.errors);return t[r]=void 0,{errors:t}}))}})})),u.createElement("h3",null,u.createElement(h.Z,{id:"routes.usercreate"})),u.createElement(l.Z,{className:"mx-auto",lg:5,md:8},u.createElement(m.Z,{onSubmit:this.submitTGS},u.createElement(m.Z.Group,{controlId:"username"},u.createElement(m.Z.Label,null,u.createElement(h.Z,{id:"login.username"})),u.createElement(m.Z.Control,{required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username})),u.createElement(m.Z.Group,{controlId:"password1"},u.createElement(m.Z.Label,null,u.createElement(h.Z,{id:"login.password"})),u.createElement(m.Z.Control,{type:"password",onChange:function(t){return e.setState({password1:t.target.value})},value:this.state.password1,isInvalid:this.state.matchError||this.state.lengthError}),u.createElement(m.Z.Control.Feedback,{type:"invalid"},this.state.lengthError?u.createElement(u.Fragment,null,u.createElement(h.Z,{id:"login.password.repeat.short"}),this.context.serverInfo.minimumPasswordLength):"")),u.createElement(m.Z.Group,{controlId:"password2"},u.createElement(m.Z.Label,null,u.createElement(h.Z,{id:"login.password.repeat"})),u.createElement(m.Z.Control,{type:"password",onChange:function(t){return e.setState({password2:t.target.value})},value:this.state.password2,isInvalid:this.state.matchError||this.state.lengthError}),u.createElement(m.Z.Control.Feedback,{type:"invalid"},this.state.matchError?u.createElement(h.Z,{id:"login.password.repeat.match"}):"")),u.createElement(c.Z,{type:"submit"},u.createElement(h.Z,{id:"view.user.create.tgs"}))),u.createElement("hr",null),u.createElement(m.Z,{onSubmit:this.submitSYS},u.createElement(m.Z.Group,{controlId:"sysuser"},u.createElement(m.Z.Label,null,u.createElement(h.Z,{id:"generic.systemidentifier"})),u.createElement(m.Z.Control,{required:!0,onChange:function(t){return e.setState({sysuser:t.target.value})},value:this.state.sysuser})),u.createElement(c.Z,{type:"submit"},u.createElement(h.Z,{id:"view.user.create.sys"})))))},t}(u.Component);w.defaultProps={postCreateAction:function(e,t){var r;v.Mq.selecteduserid=e.id,t.push(null!=(r=v.$w.useredit.link)?r:v.$w.useredit.route)}},w.contextType=f.f,t.default=(0,p.EN)(w)}}]);
//# sourceMappingURL=898.637d4423d91b884e16ee.bundle.js.map