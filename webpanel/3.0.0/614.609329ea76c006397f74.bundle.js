"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[614],{8425:function(e,t,n){n.d(t,{t:function(){return o}});var r=n(7294),a=n(5171),s=n.n(a),i=n(7961);function c(e){return r.createElement(s(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function o(e){return i.ZP.showjson.value?r.createElement("div",{className:"text-left"},r.createElement(c,{obj:e.obj})):r.createElement(r.Fragment,null)}},7614:function(e,t,n){n.r(t),n.d(t,{default:function(){return se}});var r=n(3366),a=n(7462),s=n(5861),i=n(3144),c=n(7326),o=n(1721),l=n(7757),u=n.n(l),d=n(98),m=n(2619),p=n(7814),E=n(7294),h=n(8375),f=n(7977),v=n(5005),Z=n(1555),g=n(2258),x=n(4716),b=n(2318),w=n(5293),y=n(4051),N=n(6841),O=(n(5638),n(4289)),k=n(3361),C=n(3982),S=n(1244),A=n(7184),P=n(8752),G=n(5103),j=n(3439),K=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function I(e){var t=e.props,n=t.title,r=t.eventKey,a=t.disabled,s=t.tabClassName,i=t.id;return null==n?null:E.createElement(S.Z,{as:C.Z,eventKey:r,disabled:a,id:i,className:s},n)}var R=function(e){var t=(0,O.Ch)(e,{activeKey:"onSelect"}),n=t.id,s=t.onSelect,i=t.transition,c=t.mountOnEnter,o=t.unmountOnExit,l=t.children,u=t.activeKey,d=void 0===u?function(e){var t;return(0,j.E)(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(l):u,m=(0,r.Z)(t,K);return E.createElement(A.Z,{id:n,activeKey:d,onSelect:s,transition:i,mountOnEnter:c,unmountOnExit:o},E.createElement(k.Z,(0,a.Z)({},m,{role:"tablist",as:"nav"}),(0,j.U)(l,I)),E.createElement(P.Z,null,(0,j.U)(l,(function(e){var t=(0,a.Z)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,E.createElement(G.Z,t)}))))};R.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},R.displayName="Tabs";var U=R,T=n(3489),_=n(4012),F=n(8272),L=n(5977),M=n(3727),z=n(8509),V=n(6846),$=n(3803),D=n(6942),B=n(4803),q=n(4615),W={},J=n(6964),H=n(1320),Q=n(3e3),X=n(8425),Y=n(5855),ee=["ref"],te=["ref"],ne=["ref"],re=["ref"],ae=function(e){function t(t,n){var r,a;if((a=e.call(this,t)||this).createGroup=a.createGroup.bind((0,c.Z)(a)),a.changeGroup=a.changeGroup.bind((0,c.Z)(a)),!n.user)throw Error("UserEdit: this.context.user is null!");return a.state={errors:[],loading:!0,saving:!1,permsadmin:{},permsinstance:{},tab:null!=(r=t.match.params.tab)?r:"info",groups:n.user.group?[Object.assign({users:[]},n.user.group)]:[],createGroupName:"",newOAuthConnections:[]},H.Mq.selecteduserid=parseInt(t.match.params.id),H.Mq.selectedusertab=t.match.params.tab,a}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t;e.match.params.tab!==this.props.match.params.tab&&this.setState({tab:null!=(t=this.props.match.params.tab)?t:"info"})},n.componentDidMount=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(this.props.match.params.id),e.next=3,D.Z.getUser(t);case 3:n=e.sent,e.t0=n.code,e.next=e.t0===$.G.ERROR?7:e.t0===$.G.OK?9:11;break;case 7:return this.addError(n.error),e.abrupt("break",11);case 9:return this.loadUser(n.payload),e.abrupt("break",11);case 11:return e.next=13,this.loadGroups();case 13:this.setState({loading:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadGroups=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canRead){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,B.Z.listGroups({page:1,pageSize:100});case 4:if((t=e.sent).code!==$.G.OK){e.next=24;break}n=[].concat(t.payload.content),r=2;case 8:if(!(r<=t.payload.totalPages)){e.next=21;break}return e.next=11,B.Z.listGroups({page:r,pageSize:100});case 11:if((a=e.sent).code!==$.G.ERROR){e.next=17;break}return this.addError(a.error),e.abrupt("return");case 17:n.push.apply(n,a.payload.content);case 18:r++,e.next=8;break;case 21:this.setState({groups:n}),e.next=25;break;case 24:this.addError(t.error);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadUser=function(e){this.setState({user:e,newOAuthConnections:e.oAuthConnections?Array.from(e.oAuthConnections):[]}),this.loadEnums()},n.loadEnums=function(){var e=this;Object.entries(z.oj).forEach((function(t){var n=t[0],r=t[1];if(isNaN(parseInt(n))){var s=n.toLowerCase(),i=r;if("none"!=s){var c=!!((0,J.Zg)(e.state.user).administrationRights&i);e.setState((function(e){var t;return{permsadmin:(0,a.Z)({},e.permsadmin,(t={},t[s]={currentVal:c,bitflag:i},t))}}))}}})),Object.entries(z.c2).forEach((function(t){var n=t[0],r=t[1];if(isNaN(parseInt(n))){var s=n.toLowerCase(),i=r;if("none"!=s){var c=!!((0,J.Zg)(e.state.user).instanceManagerRights&i);e.setState((function(e){var t;return{permsinstance:(0,a.Z)({},e.permsinstance,(t={},t[s]={currentVal:c,bitflag:i},t))}}))}}}))},n.addError=function(e){this.setState((function(t){var n=Array.from(t.errors);return n.push(e),{errors:n}}))},n.render=function(){var e,t,n=this;if(this.state.loading)return E.createElement(Y.Z,{text:"loading.user.load"});if(this.state.saving)return E.createElement(Y.Z,{text:"loading.user.save"});return E.createElement("div",{className:"text-center"},E.createElement(X.t,{obj:this.state.user}),this.state.errors.map((function(e,t){if(e)return E.createElement(Q.ZP,{key:t,error:e,onClose:function(){return n.setState((function(e){var n=Array.from(e.errors);return n[t]=void 0,{errors:n}}))}})})),this.state.user?E.createElement(E.Fragment,null,this.canEdit?"":E.createElement(h.Z,{className:"clearfix",variant:"error"},E.createElement(_.Z,{id:"view.user.edit.cantedit"})),this.state.user.systemIdentifier?E.createElement(f.Z,{variant:"primary",className:"mx-1"},E.createElement(_.Z,{id:"generic.system.short"})):E.createElement(f.Z,{variant:"primary",className:"mx-1"},E.createElement(_.Z,{id:"generic.tgs"})),this.state.user.enabled?E.createElement(f.Z,{variant:"success",className:"mx-1"},E.createElement(_.Z,{id:"generic.enabled"})):E.createElement(f.Z,{variant:"danger",className:"mx-1"},E.createElement(_.Z,{id:"generic.disabled"})),this.state.user.group?E.createElement(f.Z,{variant:"warning",className:"mx-1"},E.createElement(_.Z,{id:"generic.grouped"})):null,E.createElement("h3",{className:"text-capitalize"},this.state.user.name),E.createElement(v.Z,{as:M.rU,to:null!=(e=H.$w.userlist.link)?e:H.$w.userlist.route},E.createElement(_.Z,{id:"generic.goback"})),E.createElement(U,{activeKey:this.state.tab,onSelect:function(e){if(e){var t;if(H.Mq.selectedusertab=e,!W.setupMode)n.props.history.push(null!=(t=H.$w.useredit.link)?t:H.$w.useredit.route);n.setState({tab:e})}},id:"test",className:"justify-content-center mb-3 mt-4 flex-column flex-md-row"},E.createElement(N.Z,{eventKey:"info",title:E.createElement(_.Z,{id:"generic.info"})},E.createElement(Z.Z,{lg:5,className:"text-center text-md-left mx-auto"},E.createElement(y.Z,{xs:1,md:2},E.createElement(Z.Z,null,E.createElement("h5",{className:"m-0"},E.createElement(_.Z,{id:"generic.userid"}))),E.createElement(Z.Z,{className:"text-capitalize mb-2"},this.state.user.id)),this.state.user.systemIdentifier?E.createElement(y.Z,{xs:1,md:2},E.createElement(Z.Z,null,E.createElement("h5",{className:"m-0"},E.createElement(_.Z,{id:"generic.systemidentifier"}))),E.createElement(Z.Z,{className:"mb-2 text-sm-break"},this.state.user.systemIdentifier)):"",E.createElement(y.Z,{xs:1,md:2},E.createElement(Z.Z,null,E.createElement("h5",{className:"m-0"},E.createElement(_.Z,{id:"generic.enabled"}))),E.createElement(Z.Z,{className:"text-capitalize mb-2"},this.state.user.enabled.toString())),E.createElement(y.Z,{xs:1,md:2},E.createElement(Z.Z,null,E.createElement("h5",{className:"m-0"},E.createElement(_.Z,{id:"generic.created"}))),E.createElement(w.Z,{overlay:E.createElement(T.Z,{id:this.state.user.name+"-tooltip"},new Date(this.state.user.createdAt).toLocaleString())},(function(e){var t=e.ref,s=(0,r.Z)(e,ee);return E.createElement(Z.Z,(0,a.Z)({className:"text-capitalize mb-2"},s),E.createElement("span",{ref:t},E.createElement(F.Z,{value:(new Date(n.state.user.createdAt).getTime()-Date.now())/1e3,numeric:"auto",updateIntervalInSeconds:1})))}))),E.createElement(y.Z,{xs:1,md:2},E.createElement(Z.Z,null,E.createElement("h5",{className:"m-0"},E.createElement(_.Z,{id:"generic.createdby"}))),E.createElement(w.Z,{overlay:E.createElement(T.Z,{id:this.state.user.name+"-tooltip-createdby"},E.createElement(_.Z,{id:"generic.userid"}),this.state.user.createdBy.id)},(function(e){var t=e.ref,s=(0,r.Z)(e,te);return E.createElement(Z.Z,(0,a.Z)({className:"text-capitalize mb-2"},s),E.createElement("span",{ref:t},n.state.user.createdBy.name))}))),E.createElement("div",{className:"text-center mt-3"},this.canEdit||this.canEditOwnPassword?E.createElement(v.Z,{className:"mr-2",as:M.rU,to:(null!=(t=H.$w.passwd.link)?t:H.$w.passwd.route)+this.state.user.id.toString()},E.createElement(_.Z,{id:"routes.passwd"})):"",this.canEdit?E.createElement(v.Z,{variant:this.state.user.enabled?"danger":"success",onClick:(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({saving:!0}),e.next=3,D.Z.editUser({enabled:!n.state.user.enabled,id:n.state.user.id});case 3:(t=e.sent).code==$.G.OK?n.loadUser(t.payload):n.addError(t.error),n.setState({saving:!1});case 6:case"end":return e.stop()}}),e)})))},E.createElement(_.Z,{id:this.state.user.enabled?"generic.disable":"generic.enable"})):""))),E.createElement(N.Z,{eventKey:"adminperms",title:E.createElement(_.Z,{id:"perms.admin"})},this.renderPerms("permsadmin","admin")),E.createElement(N.Z,{eventKey:"instanceperms",title:E.createElement(_.Z,{id:"perms.instance"})},this.renderPerms("permsinstance","instance")),E.createElement(N.Z,{eventKey:"group",title:E.createElement(_.Z,{id:"perms.group"})},this.renderGroups()),this.renderOAuth())):"")},n.renderOAuth=function(){var e,t,n,r,i,c=this,o=this.context.serverInfo.oAuthProviderInfos,l=null!=(e=this.state.newOAuthConnections)?e:null==(t=this.state.user)?void 0:t.oAuthConnections;if("admin"===(null==(n=this.state.user)?void 0:n.name.toLowerCase())||null==l||!o||!Object.keys(o).length)return null;var d=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.setState({saving:!0}),c.state.user){e.next=4;break}return c.addError(new V.ZP(V.jK.APP_FAIL,{jsError:Error("this.state.user is null in user edit save")})),e.abrupt("return");case 4:return e.next=6,D.Z.editUser({id:c.state.user.id,oAuthConnections:c.state.newOAuthConnections});case 6:(t=e.sent).code==$.G.OK?c.loadUser(t.payload):c.addError(t.error),c.setState({saving:!1});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=this.canEdit||this.canEditOwnOAuth;return E.createElement(N.Z,{eventKey:"oauth",title:E.createElement(_.Z,{id:"view.user.edit.oauth.connections"})},E.createElement("h3",{className:"mb-3"},E.createElement(_.Z,{id:"view.user.edit.oauth.current"})),E.createElement("div",null,this.state.newOAuthConnections.map((function(e,t){return E.createElement("div",{className:"justify-content-center d-flex",key:t},E.createElement(b.Z,{className:"w-75 mb-1"},E.createElement(b.Z.Prepend,null,E.createElement(b.Z.Text,null,E.createElement("span",null,E.createElement(_.Z,{id:"view.user.edit.oauth.provider"})))),E.createElement(g.Z.Control,{className:"flex-grow-1 flex-md-grow-0 w-50 w-md-auto ",as:"select",custom:!0,disabled:!h,onChange:function(e){var n=e.target.value;c.setState((function(e){return{newOAuthConnections:e.newOAuthConnections.map((function(e,r){return r!==t?e:(0,a.Z)({},e,{provider:n})}))}}))}},Object.keys(o).map((function(t){return E.createElement(_.Z,{key:t,id:"view.user.edit.oauth.provider."+t.toLowerCase()},(function(n){return E.createElement("option",{value:t,selected:e.provider===t},n)}))}))),E.createElement(b.Z.Text,{className:"rounded-0"},E.createElement(_.Z,{id:"view.user.edit.oauth.id"})),E.createElement(x.Z,{className:"",value:e.externalUserId,onChange:function(e){var n=e.target.value;c.setState((function(e){return{newOAuthConnections:e.newOAuthConnections.map((function(e,r){return r!==t?e:(0,a.Z)({},e,{externalUserId:n})}))}}))},disabled:!h}),E.createElement(b.Z.Append,{className:""},E.createElement(v.Z,{variant:"danger",className:"text-darker",hidden:!h,onClick:function(){c.setState((function(e){return{newOAuthConnections:e.newOAuthConnections.filter((function(e,n){return t!==n}))}}))}},E.createElement("div",null,E.createElement(p.G,{icon:m.$}))))))}))),h?E.createElement("div",{className:"text-center mt-3"},E.createElement(v.Z,{className:"mr-2",onClick:function(){c.setState((function(e){return{newOAuthConnections:[].concat(e.newOAuthConnections,[{provider:Object.keys(o)[0],externalUserId:""}])}}))}},E.createElement(_.Z,{id:"view.user.edit.oauth.add"})),E.createElement(v.Z,{onClick:d,variant:"success",disabled:this.state.newOAuthConnections.some((function(e){return 0===e.externalUserId.trim().length}))||this.state.newOAuthConnections.every((function(e,t){var n,r,a,s,i,o;return e.externalUserId===(null==(n=(null!=(r=null==(a=c.state.user)?void 0:a.oAuthConnections)?r:[])[t])?void 0:n.externalUserId)&&e.provider===(null==(s=(null!=(i=null==(o=c.state.user)?void 0:o.oAuthConnections)?i:[])[t])?void 0:s.provider)}))&&this.state.newOAuthConnections.length===(null==(r=this.state.user)||null==(i=r.oAuthConnections)?void 0:i.length)},E.createElement(_.Z,{id:"generic.savepage"}))):"")},n.renderGroups=function(){var e,t=this;return this.state.user&&this.state.groups?E.createElement("div",null,this.canRead?null:E.createElement(h.Z,{className:"clearfix",variant:"error"},E.createElement(_.Z,{id:"perms.group.cantlist"})),E.createElement("h3",{className:"mb-3"},E.createElement(_.Z,{id:"perms.group.current"}),this.state.user.group?this.state.user.group.name:E.createElement(_.Z,{id:"perms.group.none"})),E.createElement("div",{onChange:this.changeGroup},E.createElement(b.Z,{className:"justify-content-center mb-3",as:"label",htmlFor:"group_none"},E.createElement(b.Z.Prepend,null,E.createElement(b.Z.Radio,{id:"group_none",name:"group",defaultChecked:void 0===(null==(e=this.state.user.group)?void 0:e.id),disabled:!this.canEdit})),E.createElement(b.Z.Append,{className:"w-40 overflow-auto"},E.createElement(b.Z.Text,{className:"flex-fill"},E.createElement(_.Z,{id:"perms.group.none"})))),this.state.groups.map((function(e){var n,s,i,c;return E.createElement(b.Z,{className:"justify-content-center mb-1",key:e.id},E.createElement(b.Z.Prepend,null,E.createElement(b.Z.Radio,{id:"group-"+e.id.toString(),name:"group",defaultChecked:(null==(n=t.state.user.group)?void 0:n.id)===e.id,disabled:!t.canEdit})),E.createElement(b.Z.Append,{className:"w-40 overflow-auto"},E.createElement(b.Z.Text,{className:"flex-fill",as:"label",htmlFor:"group-"+e.id.toString()},E.createElement("span",null,e.name),E.createElement("div",{className:"text-right ml-auto"},E.createElement(_.Z,{id:"generic.numusers",values:{count:t.canRead?null==(s=e.users)?void 0:s.length:"???"}}))),E.createElement(w.Z,{overlay:E.createElement(T.Z,{id:e.id+"-tooltip"},E.createElement(_.Z,{id:"perms.group.delete.warning"})),show:!!(null!=(i=e.users)&&i.length&&t.canEdit||e.id===(null==(c=t.state.user.group)?void 0:c.id))&&void 0},(function(n){var s,i,c=n.ref,o=(0,r.Z)(n,ne);return E.createElement(v.Z,(0,a.Z)({variant:"danger",className:"text-darker",disabled:!(null==(s=e.users)||!s.length)||!t.canEdit||e.id===(null==(i=t.state.user.group)?void 0:i.id),onClick:function(){t.deleteGroup(e.id)}},o),E.createElement("div",{ref:c},E.createElement(p.G,{icon:m.$})))}))))}))),E.createElement(b.Z,{className:"justify-content-center mb-1 mt-5"},E.createElement(b.Z.Prepend,null,E.createElement(v.Z,{variant:"primary",onClick:this.createGroup,disabled:!this.canEdit||!this.state.createGroupName.length},E.createElement(p.G,{icon:d.r8}))),E.createElement(x.Z,{className:"w-40 overflow-auto flex-grow-0",value:this.state.createGroupName,onChange:function(e){t.setState({createGroupName:e.target.value})},disabled:!this.canEdit}))):E.createElement(Q.ZP,{error:new V.ZP(V.jK.APP_FAIL,{jsError:Error("Assertion failed, user or group is null")})})},n.changeGroup=function(){var e=(0,s.Z)(u().mark((function e(t){var n,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.user){e.next=3;break}return this.addError(new V.ZP(V.jK.APP_FAIL,{jsError:Error("this.state.user is null in changegroup")})),e.abrupt("return");case 3:if(this.setState({loading:!0}),"group_none"!==(n=t.target.id)){e.next=18;break}return e.next=8,D.Z.editUser({id:this.state.user.id,permissionSet:(0,J.Zg)(this.state.user)});case 8:if((r=e.sent).code!==$.G.OK){e.next=15;break}return e.next=12,this.loadGroups();case 12:this.loadUser(r.payload),e.next=16;break;case 15:this.addError(r.error);case 16:e.next=29;break;case 18:return a=parseInt(n.substr(6)),e.next=21,D.Z.editUser({id:this.state.user.id,group:{id:a}});case 21:if((s=e.sent).code!==$.G.OK){e.next=28;break}return e.next=25,this.loadGroups();case 25:this.loadUser(s.payload),e.next=29;break;case 28:this.addError(s.error);case 29:this.setState({loading:!1});case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.deleteGroup=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,B.Z.deleteGroup(t);case 3:(n=e.sent).code===$.G.OK?this.setState((function(e){return{groups:e.groups.filter((function(e){return e.id!==t}))}})):this.addError(n.error),this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createGroup=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,B.Z.createGroup(this.state.createGroupName,(0,J.Zg)(this.state.user));case 3:(t=e.sent).code===$.G.OK?this.setState((function(e){return{groups:e.groups.concat([t.payload])}})):this.addError(t.error),this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.renderPerms=function(e,t){var n,i=this,c={},o=function(e,t,n){e.current&&t.current&&(e.current.checked!==n?t.current.classList.add("font-weight-bold"):t.current.classList.remove("font-weight-bold"))},l=function(t){return function(){for(var n=0,r=Object.entries(c);n<r.length;n++){var a=r[n],s=a[0],l=a[1];if(!l.input.current)return;l.input.current.checked=t,o(l.input,l.field,i.state[e][s].currentVal)}}},d=function(){var t=(0,s.Z)(u().mark((function t(){var n,r,a,s,o,l,d,m,p,E,h,f,v;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.setState({saving:!0}),n=0,r=0,a=Object.entries(c);case 3:if(!(r<a.length)){t.next=11;break}if(s=a[r],o=s[0],(l=s[1]).input.current){t.next=7;break}return t.abrupt("continue",8);case 7:n+=l.input.current.checked?i.state[e][o].bitflag:0;case 8:r++,t.next=3;break;case 11:if(i.state.user){t.next=14;break}return i.addError(new V.ZP(V.jK.APP_FAIL,{jsError:Error("this.state.user is null in user edit save")})),t.abrupt("return");case 14:if(!i.state.user.group){t.next=29;break}return m=Object.assign(Object.assign({},i.state.user.group.permissionSet),((d={})["permsadmin"==e?"AdministrationRights":"InstanceManagerRights"]=n,d)),t.next=18,B.Z.updateGroup({id:i.state.user.group.id,permissionSet:m});case 18:if((p=t.sent).code!=$.G.OK){t.next=26;break}return t.next=22,D.Z.getUser(i.state.user.id);case 22:(E=t.sent).code==$.G.OK?i.loadUser(E.payload):i.addError(E.error),t.next=27;break;case 26:i.addError(p.error);case 27:t.next=34;break;case 29:return f=Object.assign(Object.assign({},i.state.user.permissionSet),((h={})["permsadmin"==e?"AdministrationRights":"InstanceManagerRights"]=n,h)),t.next=32,D.Z.editUser({id:i.state.user.id,permissionSet:f});case 32:(v=t.sent).code==$.G.OK?i.loadUser(v.payload):i.addError(v.error);case 34:i.setState({saving:!1});case 35:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return E.createElement(E.Fragment,null,null!=(n=this.state.user)&&n.group?E.createElement(h.Z,{variant:"warning"},E.createElement(_.Z,{id:"perms.group.warning",values:{group:this.state.user.group.name+" ("+this.state.user.group.id+")"}})):null,this.canEdit?E.createElement(E.Fragment,null,E.createElement("h5",null,E.createElement(_.Z,{id:"generic.setall"})),E.createElement(v.Z,{onClick:l(!0)},E.createElement(_.Z,{id:"generic.true"}))," ",E.createElement(v.Z,{onClick:l(!1)},E.createElement(_.Z,{id:"generic.false"}))," ",E.createElement(v.Z,{onClick:function(){for(var t=0,n=Object.entries(c);t<n.length;t++){var r=n[t],a=r[0],s=r[1];s.input.current&&(s.input.current.checked=i.state[e][a].currentVal,o(s.input,s.field,i.state[e][a].currentVal))}}},E.createElement(_.Z,{id:"generic.reset"}))):"",E.createElement(Z.Z,{md:8,lg:7,xl:6,className:"mx-auto"},E.createElement("hr",null),Object.entries(this.state[e]).map((function(e){var n=e[0],s=e[1],l=E.createRef(),u=E.createRef();return c[n]={input:l,field:u},E.createElement(b.Z,{key:n,as:"label",htmlFor:n,className:"mb-0"},E.createElement(b.Z.Prepend,{className:"flex-grow-1 overflow-auto"},E.createElement(w.Z,{overlay:E.createElement(T.Z,{id:"perms."+t+"."+n+".desc"},E.createElement(_.Z,{id:"perms."+t+"."+n+".desc"}))},(function(e){var c=e.ref,d=(0,r.Z)(e,re);return E.createElement(b.Z.Text,{className:"flex-fill",ref:u},E.createElement("div",d,E.createElement(_.Z,{id:"perms."+t+"."+n})),E.createElement("div",{className:"ml-auto d-flex align-items-center"},E.createElement(g.Z.Check,{inline:!0,type:"switch",custom:!0,id:n,className:"d-flex justify-content-center align-content-center mx-2",label:"",ref:l,disabled:!i.canEdit,defaultChecked:s.currentVal,onChange:function(){o(l,u,s.currentVal)}}),E.createElement("div",(0,a.Z)({},d,{ref:c}),E.createElement(p.G,{fixedWidth:!0,icon:"info"}))))}))))})),E.createElement("hr",null)),this.canEdit?E.createElement(v.Z,{onClick:d},E.createElement(_.Z,{id:"generic.savepage"})):"")},(0,i.Z)(t,[{key:"canEdit",get:function(){return!!((0,J.Zg)(this.context.user).administrationRights&z.oj.WriteUsers)}},{key:"canRead",get:function(){return!!((0,J.Zg)(this.context.user).administrationRights&z.oj.ReadUsers)}},{key:"canEditOwnPassword",get:function(){var e=parseInt(this.props.match.params.id);return!!((0,J.Zg)(this.context.user).administrationRights&z.oj.EditOwnPassword)&&this.context.user.id===e}},{key:"canEditOwnOAuth",get:function(){var e=parseInt(this.props.match.params.id);return!!((0,J.Zg)(this.context.user).administrationRights&z.oj.EditOwnOAuthConnections)&&this.context.user.id===e}}]),t}(E.Component);ae.contextType=q.f;var se=(0,L.EN)(ae)},7977:function(e,t,n){var r=n(7462),a=n(3366),s=n(4184),i=n.n(s),c=n(7294),o=n(6792),l=["bsPrefix","variant","pill","className","as"],u=c.forwardRef((function(e,t){var n=e.bsPrefix,s=e.variant,u=e.pill,d=e.className,m=e.as,p=void 0===m?"span":m,E=(0,a.Z)(e,l),h=(0,o.vE)(n,"badge");return c.createElement(p,(0,r.Z)({ref:t},E,{className:i()(d,h,u&&h+"-pill",s&&h+"-"+s)}))}));u.displayName="Badge",u.defaultProps={pill:!1},t.Z=u},2318:function(e,t,n){var r=n(3366),a=n(7462),s=n(4184),i=n.n(s),c=n(7294),o=n(4680),l=n(6792),u=["bsPrefix","size","hasValidation","className","as"],d=(0,o.Z)("input-group-append"),m=(0,o.Z)("input-group-prepend"),p=(0,o.Z)("input-group-text",{Component:"span"}),E=c.forwardRef((function(e,t){var n=e.bsPrefix,s=e.size,o=e.hasValidation,d=e.className,m=e.as,p=void 0===m?"div":m,E=(0,r.Z)(e,u);return n=(0,l.vE)(n,"input-group"),c.createElement(p,(0,a.Z)({ref:t},E,{className:i()(d,n,s&&n+"-"+s,o&&"has-validation")}))}));E.displayName="InputGroup",E.Text=p,E.Radio=function(e){return c.createElement(p,null,c.createElement("input",(0,a.Z)({type:"radio"},e)))},E.Checkbox=function(e){return c.createElement(p,null,c.createElement("input",(0,a.Z)({type:"checkbox"},e)))},E.Append=d,E.Prepend=m,t.Z=E},4051:function(e,t,n){var r=n(7462),a=n(3366),s=n(4184),i=n.n(s),c=n(7294),o=n(6792),l=["bsPrefix","className","noGutters","as"],u=["xl","lg","md","sm","xs"],d=c.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,d=e.noGutters,m=e.as,p=void 0===m?"div":m,E=(0,a.Z)(e,l),h=(0,o.vE)(n,"row"),f=h+"-cols",v=[];return u.forEach((function(e){var t,n=E[e];delete E[e];var r="xs"!==e?"-"+e:"";null!=(t=null!=n&&"object"==typeof n?n.cols:n)&&v.push(""+f+r+"-"+t)})),c.createElement(p,(0,r.Z)({ref:t},E,{className:i().apply(void 0,[s,h,d&&"no-gutters"].concat(v))}))}));d.displayName="Row",d.defaultProps={noGutters:!1},t.Z=d},6841:function(e,t,n){var r=n(1721),a=n(7294),s=n(7184),i=n(8752),c=n(5103),o=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")},t}(a.Component);o.Container=s.Z,o.Content=i.Z,o.Pane=c.Z,t.Z=o},7184:function(e,t,n){var r=n(7294),a=n(4289),s=n(4426),i=n(5017);t.Z=function(e){var t=(0,a.Ch)(e,{activeKey:"onSelect"}),n=t.id,c=t.generateChildId,o=t.onSelect,l=t.activeKey,u=t.transition,d=t.mountOnEnter,m=t.unmountOnExit,p=t.children,E=(0,r.useMemo)((function(){return c||function(e,t){return n?n+"-"+t+"-"+e:null}}),[n,c]),h=(0,r.useMemo)((function(){return{onSelect:o,activeKey:l,transition:u,mountOnEnter:d||!1,unmountOnExit:m||!1,getControlledId:function(e){return E(e,"tabpane")},getControllerId:function(e){return E(e,"tab")}}}),[o,l,u,d,m,E]);return r.createElement(s.Z.Provider,{value:h},r.createElement(i.Z.Provider,{value:o||null},p))}},8752:function(e,t,n){var r=n(7462),a=n(3366),s=n(4184),i=n.n(s),c=n(7294),o=n(6792),l=["bsPrefix","as","className"],u=c.forwardRef((function(e,t){var n=e.bsPrefix,s=e.as,u=void 0===s?"div":s,d=e.className,m=(0,a.Z)(e,l),p=(0,o.vE)(n,"tab-content");return c.createElement(u,(0,r.Z)({ref:t},m,{className:i()(d,p)}))}));t.Z=u},5103:function(e,t,n){var r=n(7462),a=n(3366),s=n(4184),i=n.n(s),c=n(7294),o=n(6792),l=n(4426),u=n(5017),d=n(9280),m=["activeKey","getControlledId","getControllerId"],p=["bsPrefix","className","active","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit","transition","as","eventKey"];var E=c.forwardRef((function(e,t){var n=function(e){var t=(0,c.useContext)(l.Z);if(!t)return e;var n=t.activeKey,s=t.getControlledId,i=t.getControllerId,o=(0,a.Z)(t,m),p=!1!==e.transition&&!1!==o.transition,E=(0,u.h)(e.eventKey);return(0,r.Z)({},e,{active:null==e.active&&null!=E?(0,u.h)(n)===E:e.active,id:s(e.eventKey),"aria-labelledby":i(e.eventKey),transition:p&&(e.transition||o.transition||d.Z),mountOnEnter:null!=e.mountOnEnter?e.mountOnEnter:o.mountOnEnter,unmountOnExit:null!=e.unmountOnExit?e.unmountOnExit:o.unmountOnExit})}(e),s=n.bsPrefix,E=n.className,h=n.active,f=n.onEnter,v=n.onEntering,Z=n.onEntered,g=n.onExit,x=n.onExiting,b=n.onExited,w=n.mountOnEnter,y=n.unmountOnExit,N=n.transition,O=n.as,k=void 0===O?"div":O,C=(n.eventKey,(0,a.Z)(n,p)),S=(0,o.vE)(s,"tab-pane");if(!h&&!N&&y)return null;var A=c.createElement(k,(0,r.Z)({},C,{ref:t,role:"tabpanel","aria-hidden":!h,className:i()(E,S,{active:h})}));return N&&(A=c.createElement(N,{in:h,onEnter:f,onEntering:v,onEntered:Z,onExit:g,onExiting:x,onExited:b,mountOnEnter:w,unmountOnExit:y},A)),c.createElement(l.Z.Provider,{value:null},c.createElement(u.Z.Provider,{value:null},A))}));E.displayName="TabPane",t.Z=E}}]);
//# sourceMappingURL=614.609329ea76c006397f74.bundle.js.map