!function(){var e,t,r,n,o,a={7888:function(e,t,r){"use strict";var n=r(1721),o=r(7294),a=r(5005),i=r(4012),s=r(5977),c=r(9635),l=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.Z)(t,e),t.prototype.render=function(){var e=this;return o.createElement(c.Z,{title:"generic.accessdenied"},o.createElement(a.Z,{variant:"danger",className:"float-right",onClick:function(){e.props.history.goBack()}},o.createElement(i.Z,{id:"generic.goback"})))},t}(o.Component);t.Z=(0,s.EN)(l)},3e3:function(e,t,r){"use strict";r.d(t,{hP:function(){return m},iT:function(){return p}});var n=r(1721),o=r(8359),a=r(7294),i=r(8375),s=r(5005),c=r(7959),l=r(4012),u=r(6846),d=r(6755),f=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={popup:!1},r}return(0,n.Z)(t,e),t.prototype.render=function(){var e,t,r=this;if(!this.props.error)return"";var n=function(){return r.setState({popup:!1})};return a.createElement(i.Z,{className:"clearfix",variant:"error",dismissible:!!this.props.onClose,onClose:this.props.onClose},a.createElement(l.Z,{id:this.props.error.code||"error.app.undefined"}),a.createElement("hr",null),a.createElement(s.Z,{variant:"danger",className:"float-right",onClick:function(){return r.setState({popup:!0})}},a.createElement(l.Z,{id:"generic.details"})),a.createElement(c.Z,{centered:!0,show:this.state.popup,onHide:n,size:"lg"},a.createElement(c.Z.Header,{closeButton:!0},a.createElement(c.Z.Title,null,a.createElement(l.Z,{id:this.props.error.code||"error.app.undefined"}))),a.createElement(c.Z.Body,{className:"text-danger pb-0"},(null==(e=this.props.error.desc)?void 0:e.type)===u._T.LOCALE?a.createElement(l.Z,{id:this.props.error.desc.desc||"error.api.empty"}):null!=(t=this.props.error.desc)&&t.desc?this.props.error.desc.desc:"",a.createElement("hr",null),a.createElement(o.Z,null,a.createElement("code",{className:"bg-darker d-block pre-wrap p-2 pre-scrollable"},("Webpanel Version: "+d.q4+"\nWebpanel Mode: "+d.IK+"\nAPI Version: "+d.Gn+"\n\nError Code: "+this.props.error.code+"\nError Description: "+(this.props.error.desc?this.props.error.desc.desc:"No description")+"\n\nAdditional Information:\n"+this.props.error.extendedInfo).replace(/\\/g,"\\\\")))),a.createElement(c.Z.Footer,null,a.createElement("span",{className:"font-italic mr-auto"},a.createElement(l.Z,{id:"generic.debugwarn"})),a.createElement(s.Z,{variant:"secondary",onClick:n},a.createElement(l.Z,{id:"generic.close"})))))},t}(a.Component);function p(e,t){(0,e[1])((function(e){var r=Array.from(e);return r.push(t),r}))}function m(e){var t=e[0],r=e[1];return t.map((function(e,t){if(e)return a.createElement(f,{key:t,error:e,onClose:function(){return r((function(e){var r=Array.from(e);return r[t]=void 0,r}))}})}))}t.ZP=f},9635:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7294),o=r(8375),a=r(4012);function i(e){return n.createElement(o.Z,{className:"clearfix",variant:"error"},n.createElement(a.Z,{id:e.title}),e.body?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(a.Z,{id:e.body})):e.children?n.createElement(n.Fragment,null,n.createElement("hr",null),e.children):null)}},3128:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var n=r(7462),o=r(3366),a=r(1721),i=r(7814),s=r(7294),c=r(5005),l=r(5293),u=r(1479),d=r(729),f=r(1318),p=r(7863),m=r(3489),h=r(4012),v=r(8272),g=r(8359),b=r(7959),E=r(8509);function y(e){var t=(0,s.useState)(!1),r=t[0],n=t[1];return s.createElement(s.Fragment,null,s.createElement(c.Z,{variant:"danger",className:"d-inline-block",onClick:function(){return n(!0)},size:"sm"},s.createElement(h.Z,{id:"generic.errordetails",values:{info:void 0!==e.job.errorCode&&null!==e.job.errorCode?E.jK[e.job.errorCode]:"NoCode"}})),s.createElement(b.Z,{centered:!0,show:r,onHide:function(){return n(!1)},size:"lg"},s.createElement(b.Z.Header,{closeButton:!0},s.createElement(b.Z.Title,null,s.createElement(h.Z,{id:e.job.description}))),s.createElement(b.Z.Body,{className:"text-danger pb-0"},s.createElement(h.Z,{id:"view.instance.jobs.error"}),":"," ",void 0!==e.job.errorCode&&null!==e.job.errorCode?E.jK[e.job.errorCode]:"NoCode",s.createElement("hr",null),s.createElement(g.Z,null,s.createElement("code",{className:"bg-darker d-block pre-wrap p-2 pre-scrollable"},e.job.exceptionDetails))),s.createElement(b.Z.Footer,null,s.createElement(c.Z,{variant:"secondary",onClick:function(){return n(!1)}},s.createElement(h.Z,{id:"generic.close"})))))}var Z=["ref"],w=["ref"],I=["ref"],x=["ref"],C=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e,t=this,r=this.props.job,a=new Date(r.startedAt),g=(a.getTime()-Date.now())/1e3,b=(new Date(null!=(e=r.stoppedAt)?e:0).getTime()-Date.now())/1e3,E=void 0!==r.errorCode||void 0!==r.exceptionDetails?"danger":r.cancelled?"warning":r.stoppedAt?"success":"info";return s.createElement(d.Z,{className:"mx-auto",key:r.id,style:{maxWidth:this.props.width},onClose:function(){t.props.onClose&&t.props.onClose(r)}},s.createElement(p.Z,{closeButton:!!r.stoppedAt&&!!this.props.onClose,className:"bg-"+E},"#",r.id,": ",r.description),s.createElement(f.Z,{className:"pt-1 text-white"},r.stage?s.createElement("div",{className:"mb-2"},"\u25b6",r.stage):null,s.createElement(h.Z,{id:"app.job.started"}),s.createElement(l.Z,{overlay:s.createElement(m.Z,{id:r.id+"-tooltip-started"},a.toLocaleString())},(function(e){var t=e.ref,r=(0,o.Z)(e,Z);return s.createElement("span",(0,n.Z)({},r,{ref:t}),s.createElement(v.Z,{value:g,numeric:"auto",updateIntervalInSeconds:1}))})),s.createElement("br",null),s.createElement(h.Z,{id:"app.job.startedby"}),s.createElement(l.Z,{overlay:s.createElement(m.Z,{id:r.id+"-tooltip-startedby"},s.createElement(h.Z,{id:"generic.userid"}),r.startedBy.id)},(function(e){var t=e.ref,a=(0,o.Z)(e,w);return s.createElement("span",(0,n.Z)({ref:t},a),r.startedBy.name)})),s.createElement("br",null),s.createElement("br",null),r.stoppedAt?s.createElement(s.Fragment,null,s.createElement(h.Z,{id:"app.job.stopped"}),s.createElement(l.Z,{overlay:s.createElement(m.Z,{id:r.id+"-tooltip-stopped"},a.toLocaleString())},(function(e){var t=e.ref,r=(0,o.Z)(e,I);return s.createElement("span",(0,n.Z)({},r,{ref:t}),s.createElement(v.Z,{value:b,numeric:"auto",updateIntervalInSeconds:1}))})),s.createElement("br",null)):"",r.cancelledBy?s.createElement(s.Fragment,null,s.createElement(h.Z,{id:"app.job.stoppedby"}),s.createElement(l.Z,{overlay:s.createElement(m.Z,{id:r.id+"-tooltip-createdby"},s.createElement(h.Z,{id:"generic.userid"}),r.startedBy.id)},(function(e){var t=e.ref,a=(0,o.Z)(e,x);return s.createElement("span",(0,n.Z)({ref:t},a),r.cancelledBy.name)})),s.createElement("br",null)):"",void 0!==r.errorCode||void 0!==r.exceptionDetails?s.createElement(y,{job:r}):"",s.createElement("div",{className:"d-flex mt-2",style:{height:"1.5rem"}},s.createElement(u.Z,{className:"text-darker font-weight-bold flex-grow-1 h-unset",animated:!r.stoppedAt,label:"number"==typeof r.progress?r.progress.toString()+"%":void 0,now:"number"==typeof r.progress?r.progress:100,striped:!0,variant:E}),r.canCancel&&!r.stoppedAt?s.createElement(c.Z,{style:{padding:"0 1em"},className:"ml-1",variant:"danger",onClick:function(){return t.props.onCancel(r)}},s.createElement(i.G,{icon:"times",className:"d-block"})):null)))},t}(s.Component)},271:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});var n=r(7462),o=r(5861),a=r(7326),i=r(1721),s=r(7757),c=r.n(s),l=r(7294),u=r(5293),d=r(3489),f=r(4012),p=r(1090),m=r(6352),h=r(3803),v=r(7961),g=r(9521),b=r(3e3),E=r(3128),y=r(5855);function Z(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){function t(t){var r;return(r=e.call(this,t)||this).widgetRef=l.createRef(),r.handleUpdate=r.handleUpdate.bind((0,a.Z)(r)),r.onCancel=r.onCancel.bind((0,a.Z)(r)),r.onClose=r.onClose.bind((0,a.Z)(r)),r.state={jobs:g.Z.jobsByInstance,errors:[],ownerrors:[],loading:!0,instances:new Map},r}(0,i.Z)(t,e);var r=t.prototype;return r.addError=function(e){var t=this;this.setState((function(r){var n=Array.from(r.ownerrors);return n.push(e),t.widgetRef.current&&(t.widgetRef.current.scrollTop=0),{ownerrors:n}}))},r.componentDidMount=function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.Z.on("jobsLoaded",this.handleUpdate),e.next=3,this.handleUpdate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.componentWillUnmount=function(){g.Z.removeListener("jobsLoaded",this.handleUpdate)},r.handleUpdate=function(){var e=(0,o.Z)(c().mark((function e(){var t,r,n,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,m.Z.listInstances({pageSize:100});case 3:if((r=e.sent).code!==h.G.ERROR){e.next=9;break}return this.addError(r.error),e.abrupt("return");case 9:t.push.apply(t,r.payload.content);case 10:n=2;case 11:if(!(n<=r.payload.totalPages)){e.next=24;break}return e.next=14,m.Z.listInstances({page:n,pageSize:100});case 14:if((o=e.sent).code!==h.G.ERROR){e.next=20;break}return this.addError(o.error),e.abrupt("return");case 20:t.push.apply(t,o.payload.content);case 21:n++,e.next=11;break;case 24:a=new Map,t.forEach((function(e){return a.set(e.id,e)})),this.setState({jobs:g.Z.jobsByInstance,errors:g.Z.errors,loading:!1,instances:a});case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.onCancel=function(){var e=(0,o.Z)(c().mark((function e(t){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.cancelJob(t.id,(function(e){return r.addError(e)}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:g.Z.fastmode=5;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onClose=function(e){g.Z.clearJob(e.id)},r.render=function(){if(!this.props.widget)return this.nested();for(var e,t,r=0,n=Z(this.state.jobs.values());!(e=n()).done;){r+=e.value.size}return t=v.ZP.jobswidgetdisplay.value!==v.zQ.NEVER&&(v.ZP.jobswidgetdisplay.value===v.zQ.ALWAYS||(r>0||this.state.errors.length>0)),l.createElement("div",{style:{position:"fixed",top:0,bottom:0,right:0,left:0,pointerEvents:"none"}},l.createElement(p.s,{className:"jobswidget "+(t?"":"invisible"),style:{pointerEvents:"auto",bottom:0,right:0},default:{width:"30vw",height:"50vh",x:document.documentElement.clientWidth-Math.min(.3*document.documentElement.clientWidth,350)-20,y:document.documentElement.clientHeight-.5*document.documentElement.clientHeight-20},maxWidth:350,minHeight:50,minWidth:110,bounds:"parent"},l.createElement("div",{className:"fancyscroll overflow-auto h-100",ref:this.widgetRef},l.createElement("h5",{className:"text-center text-darker font-weight-bold"},l.createElement(f.Z,{id:"view.instance.jobs.title"})),this.nested())))},r.nested=function(){var e=this;return l.createElement("div",{className:this.props.widget?"d-sm-block":""},this.state.loading?l.createElement(y.Z,{text:"loading.instance.jobs.list"}):"",this.state.ownerrors.map((function(t,r){if(t)return l.createElement(b.ZP,{key:r,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.ownerrors);return t[r]=void 0,{ownerrors:t}}))}})})),this.state.errors.map((function(t,r){return l.createElement("div",{key:r,style:{maxWidth:e.props.widget?350:"unset"}},l.createElement(b.ZP,{error:t}))})),Array.from(this.state.jobs).sort((function(e,t){return e[0]-t[0]})).map((function(t){var r,o,a=t[0],i=t[1];return l.createElement(l.Fragment,{key:a},l.createElement("div",{className:"bg-dark p-2 text-center"},l.createElement(u.Z,{overlay:function(e){return function(t){return l.createElement(d.Z,(0,n.Z)({id:"tooltip-instance-"+e},t),e)}}(a)},l.createElement(l.Fragment,null,null!=(r=null==(o=e.state.instances.get(a))?void 0:o.name)?r:"Unknown"," ","(",l.createElement(f.Z,{id:"view.instance.jobs.jobtotal",values:{amount:i.size}}),")"))),Array.from(i,(function(e){return e[1]})).sort((function(e,t){return t.id-e.id})).map((function(t){return l.createElement(E.Z,{job:t,width:e.props.width,key:t.id,onClose:e.onClose,onCancel:e.onCancel})})))})))},t}(l.Component);I.defaultProps={widget:!0}},5855:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(7462),o=r(3366),a=r(1721),i=r(7294),s=r(6968),c=r(4012),l=r(9697),u=r(4537),d=["variant","animation","center","className","width","widthUnit","text","children"],f=function(e){function t(t){return e.call(this,t)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.variant,r=e.animation,a=e.center,f=e.className,p=e.width,m=e.widthUnit,h=e.text,v=e.children,g=(0,o.Z)(e,d),b={width:""+p+m,height:""+p+m};return i.createElement(u.Z,null,i.createElement(l.Z,{appear:!0,classNames:"anim-fade",addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},i.createElement("div",{className:a?"text-center":""},i.createElement(s.Z,(0,n.Z)({variant:t||"secondary",className:a?"d-block mx-auto "+(null!=f?f:""):f,style:b,animation:r||"border"},g)),h?i.createElement(c.Z,{id:h}):"",v)))},t}(i.Component);f.defaultProps={animation:"border",width:"50",widthUnit:"vmin",center:!0}},6709:function(e,t,r){"use strict";r.r(t);var n=r(5861),o=r(7326),a=r(1721),i=r(7757),s=r.n(i),c=r(6566),l=r(8658),u=r(7814),d=r(7294),f=r(5005),p=r(1555),m=r(5881),h=r(2258),v=r(4012),g=r(5977),b=r(8509),E=r(1895),y=r(6846),Z=r(3803),w=r(5631),I=r(2522),x=r(4615),C=r(4870),A=r(9991),k=r(1320),S=r(3e3),L=r(5855),N=function(e){function t(t){var r;return(r=e.call(this,t)||this).submit=r.submit.bind((0,o.Z)(r)),console.log(k.Mq.oautherrors),r.state={busy:!1,validated:!1,username:"",password:"",errors:Array.from(k.Mq.oautherrors)},r}(0,a.Z)(t,e);var r=t.prototype;return r.componentDidMount=function(){this.tryLoginDefault()},r.tryLoginDefault=function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.login({type:E.P.Password,userName:"admin",password:"ISolemlySwearToDeleteTheDataDirectory"});case 2:e.sent.code===Z.G.OK&&this.setState({redirectSetup:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.addError=function(e){this.setState((function(t){var r=Array.from(t.errors);return r.push(e),{errors:r}}))},r.render=function(){var e,t,r,n,o,a,i,s,g,E,y=this;if(this.state.busy||I.Z.isTokenValid())return d.createElement(L.Z,{text:"loading.login"});if(!this.context.serverInfo)return d.createElement(L.Z,{text:"loading.serverinfo"});var Z=((e={})[b.O4.GitHub]=d.createElement(u.G,{icon:l.zh,style:{width:"1.2em"}}),e[b.O4.Discord]=d.createElement(u.G,{icon:c.om,style:{width:"1.2em"}}),e[b.O4.TGForums]=d.createElement("img",{src:A,alt:"tglogo",style:{width:"1.2em"}}),e[b.O4.Keycloak]=d.createElement("img",{src:C,alt:"keycloaklogo",style:{width:"1.2em"}}),e),w={GitHub:"#161b22",Discord:"#7289da",TGForums:void 0,Keycloak:void 0};return d.createElement(p.Z,{className:"mx-auto",lg:5,md:8},this.state.errors.map((function(e,t){if(e)return d.createElement(S.ZP,{key:t,error:e,onClose:function(){return y.setState((function(e){var r=Array.from(e.errors);return r[t]=void 0,{errors:r}}))}})})),d.createElement(m.Z,{body:!0},d.createElement(m.Z.Title,null,d.createElement(v.Z,{id:"login.header"})),d.createElement(m.Z,{body:!0},d.createElement(m.Z.Title,null,d.createElement(v.Z,{id:"login.type.generic"})),d.createElement(h.Z,{validated:this.state.validated,onSubmit:this.submit},d.createElement(h.Z.Group,{controlId:"username"},d.createElement(h.Z.Label,null,d.createElement(v.Z,{id:"login.username"})),d.createElement(h.Z.Control,{type:"text",placeholder:"Enter username",onChange:function(e){return y.setState({username:e.target.value})},value:this.state.username,required:!0})),d.createElement(h.Z.Group,{controlId:"password"},d.createElement(h.Z.Label,null,d.createElement(v.Z,{id:"login.password"})),d.createElement(h.Z.Control,{type:"password",placeholder:"Password",onChange:function(e){return y.setState({password:e.target.value})},value:this.state.password,required:!0})),d.createElement(f.Z,{type:"submit",block:!0},d.createElement(v.Z,{id:"login.submit"})))),((null==(t=this.context.serverInfo)||null==(r=t.oAuthProviderInfos)?void 0:r.Discord)||(null==(n=this.context.serverInfo)||null==(o=n.oAuthProviderInfos)?void 0:o.GitHub)||(null==(a=this.context.serverInfo)||null==(i=a.oAuthProviderInfos)?void 0:i.Keycloak)||(null==(s=this.context.serverInfo)||null==(g=s.oAuthProviderInfos)?void 0:g.TGForums))&&d.createElement(d.Fragment,null,d.createElement("hr",null),d.createElement(m.Z,{body:!0},d.createElement(m.Z.Title,null,d.createElement(v.Z,{id:"login.type.oauth"})),Object.keys(null!=(E=this.context.serverInfo.oAuthProviderInfos)?E:{}).map((function(e){var t=w[e];return d.createElement(f.Z,{key:e,block:!0,style:t?{background:t}:void 0,onClick:function(){return y.startOAuth(e)}},Z[e],d.createElement("span",{className:"ml-1"},d.createElement(v.Z,{id:"login.oauth",values:{provider:e}})))}))))))},r.startOAuth=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,o,a,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.serverInfo){e.next=3;break}return this.addError(new y.ZP(y.jK.APP_FAIL,{jsError:Error("serverInfo is null in startOAuth")})),e.abrupt("return");case 3:n=new Uint8Array(10),window.crypto.getRandomValues(n),o=Array.from(n,(function(e){return e.toString(16).padStart(2,"0")})).join(""),a=void 0,i=encodeURIComponent,e.t0=t,e.next=e.t0===b.O4.Discord?11:e.t0===b.O4.GitHub?13:e.t0===b.O4.Keycloak?15:e.t0===b.O4.TGForums?17:19;break;case 11:return a="https://discord.com/api/oauth2/authorize?response_type=code&client_id="+i(this.context.serverInfo.oAuthProviderInfos.Discord.clientId)+"&scope=identify&state="+i(o)+"&redirect_uri="+i(this.context.serverInfo.oAuthProviderInfos.Discord.redirectUri),e.abrupt("break",19);case 13:return a="https://github.com/login/oauth/authorize?client_id="+i(this.context.serverInfo.oAuthProviderInfos.GitHub.clientId)+"&redirect_uri="+i(this.context.serverInfo.oAuthProviderInfos.GitHub.redirectUri)+"&state="+i(o)+"&allow_signup=false",e.abrupt("break",19);case 15:return a=this.context.serverInfo.oAuthProviderInfos.Keycloak.serverUrl+"/protocol/openid-connect/auth?response_type=code&client_id="+i(this.context.serverInfo.oAuthProviderInfos.Keycloak.clientId)+"&scope=openid&state="+i(o)+"&redirect_uri="+i(this.context.serverInfo.oAuthProviderInfos.Keycloak.redirectUri),e.abrupt("break",19);case 17:return a="https://tgstation13.org/phpBB/oauth.php?session_public_token="+i(this.context.serverInfo.oAuthProviderInfos.TGForums.clientId),e.abrupt("break",19);case 19:return c=JSON.parse(null!=(r=window.sessionStorage.getItem("oauth"))?r:"{}"),t===b.O4.TGForums?c.tgforums={provider:t,url:this.props.location.pathname,state:this.context.serverInfo.oAuthProviderInfos.TGForums.clientId}:c[o]={provider:t,url:this.props.location.pathname},window.sessionStorage.setItem("oauth",JSON.stringify(c)),window.location.href=a,e.abrupt("return",new Promise((function(e){return e()})));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.submit=function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({busy:!0}),e.next=4,w.Z.login({type:E.P.Password,userName:this.state.username,password:this.state.password});case 4:(r=e.sent).code==Z.G.ERROR?(this.setState({busy:!1}),this.addError(r.error)):this.props.postLoginAction&&this.props.postLoginAction();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(d.Component);N.contextType=x.f,t.default=(0,g.EN)(N)},4615:function(e,t,r){"use strict";r.d(t,{f:function(){return n}});var n=r(7294).createContext(void 0)},6755:function(e,t,r){"use strict";r.d(t,{Gn:function(){return n},q4:function(){return o},IK:function(){return a},UG:function(){return i},cV:function(){return s}});var n="9.3.0",o="3.0.0",a="PROD",i="/app/",s="/"},5790:function(e,t,r){"use strict";r(1340),r(5029),r(5547),r(4462),r(7689);var n=r(3935),o=r(7806),a=r(9521),i=r(5861),s=r(7326),c=r(1721),l=r(7757),u=r.n(l),d=r(3379),f=r.n(d),p=r(9087),m={insert:"head",singleton:!1},h=(f()(p.Z,m),p.Z.locals,r(7294)),v=r(8375),g=r(682),b=r(4012),E=r(9558),y=r(3727),Z=r(1895),w=r(6846),I=r(3803),x=r(5631),C=r(6942),A=r(2522),k=r(452),S=r(7814),L=r(5005),N=r(5040),j=r(3361),O=r(103),P=r(5977),T=r(9697),G=r(4615),U=r(6964),R=r(601),D=r(1320),_=function(e){function t(t){var r,n,o;return(o=e.call(this,t)||this).logoutClick=o.logoutClick.bind((0,s.Z)(o)),o.loginSuccess=o.loginSuccess.bind((0,s.Z)(o)),o.logout=o.logout.bind((0,s.Z)(o)),o.refresh=o.refresh.bind((0,s.Z)(o)),o.state={loggedIn:!!A.Z.isTokenValid(),routes:[],categories:D.Nz,focusedCategory:null!=(r=null==(n=o.props.category)?void 0:n.name)?r:""},o}(0,c.Z)(t,e);var r=t.prototype;return r.loginSuccess=function(){this.setState({loggedIn:!0})},r.logout=function(){this.setState({loggedIn:!1})},r.refresh=function(e){this.setState({routes:e})},r.componentDidMount=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.Z.on("loginSuccess",this.loginSuccess),x.Z.on("logout",this.logout),e.t0=this,e.next=5,R.Z.getRoutes();case 5:e.t1=e.sent,e.t2={routes:e.t1},e.t0.setState.call(e.t0,e.t2),R.Z.on("refresh",this.refresh);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.componentWillUnmount=function(){k.Z.removeListener("loginSuccess",this.loginSuccess),x.Z.removeListener("logout",this.logout),R.Z.removeListener("refresh",this.refresh)},r.componentDidUpdate=function(e){var t;void 0!==this.props.category&&this.props.category.key!==(null==(t=e.category)?void 0:t.key)&&this.setState({focusedCategory:this.props.category.name})},r.render=function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(O.Z,{className:"shadow-lg",expand:this.state.loggedIn?"lg":void 0,collapseOnSelect:!0,variant:"dark",bg:"primary"},h.createElement(O.Z.Brand,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.home.link)?t:D.$w.home.route,{reload:!0})},className:"mr-auto"},this.renderVersion()),h.createElement(O.Z.Toggle,{className:"mr-2","aria-controls":"responsive-navbar-nav"}),h.createElement(O.Z.Collapse,{className:"text-right mr-2",style:{minWidth:"0px"}},h.createElement(j.Z,{className:"mr-auto overflow-auto fancyscroll"},this.state.loggedIn?Object.values(this.state.categories).map((function(t){if(t.leader.cachedAuth)return h.createElement("div",{key:t.name,className:"d-flex",onMouseEnter:function(){var r=window.setTimeout((function(){e.setState({focusedCategory:t.name,focusTimer:void 0})}),130);e.setState({focusTimer:r})},onMouseLeave:function(){window.clearTimeout(e.state.focusTimer),e.setState({focusTimer:void 0})},onClick:function(){window.clearTimeout(e.state.focusTimer),e.setState({focusedCategory:t.name,focusTimer:void 0})}},h.createElement(j.Z.Item,null,h.createElement(j.Z.Link,{onClick:function(){var r;e.props.history.push(null!=(r=t.leader.link)?r:t.leader.route,{reload:!0})},active:(0,U.JW)(e.props.location.pathname,t.leader.route,!t.leader.navbarLoose)},h.createElement(b.Z,{id:t.leader.name}))),Object.values(t.routes).filter((function(e){return e.cachedAuth})).length>=2?h.createElement(T.Z,{in:e.state.focusedCategory===t.name,classNames:"anim-collapse",className:"nowrap anim-collapse-all",addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},onMouseEnter:function(){e.setState({focusedCategory:t.name})}},h.createElement("div",null,h.createElement(j.Z,null,h.createElement("div",{className:"py-2 d-none d-lg-inline"},h.createElement(S.G,{icon:"angle-right"})),h.createElement(j.Z,{className:"bg-darkblue mx-1 rounded"},t.routes.map((function(t){if(!t.catleader&&t.cachedAuth&&t.visibleNavbar)return h.createElement(j.Z.Item,{key:t.name},h.createElement(j.Z.Link,{onClick:function(){var r;e.props.history.push(null!=(r=t.link)?r:t.route,{reload:!0})},active:(0,U.JW)(e.props.location.pathname,t.route,!t.navbarLoose)},h.createElement(b.Z,{id:t.name})))})),h.createElement("div",{className:"py-2 d-none d-lg-inline mr-1"},h.createElement(S.G,{icon:"grip-lines-vertical"})))))):"")})):h.createElement(j.Z.Item,null,h.createElement(j.Z.Link,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.home.link)?t:D.$w.home.route,{reload:!0})},active:!0},h.createElement(b.Z,{id:"routes.login"})))),this.renderUser())))},r.renderVersion=function(){var e;return null!=(e=this.context.serverInfo)&&e.version?h.createElement(h.Fragment,null,h.createElement(b.Z,{id:"generic.appname"})," v",this.context.serverInfo.version):h.createElement(b.Z,{id:"loading.loading"})},r.renderUser=function(){var e=this;return this.state.loggedIn?h.createElement(j.Z.Item,{className:"ml-auto"},h.createElement(N.Z,null,h.createElement(N.Z.Toggle,{id:"user-dropdown",type:"button",variant:"primary","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.context.user?this.context.user.name:h.createElement(b.Z,{id:"loading.loading"})),h.createElement(N.Z.Menu,{alignRight:!0,className:"text-right"},h.createElement(N.Z.Item,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.info.link)?t:D.$w.info.route,{reload:!0})}},h.createElement(b.Z,{id:"routes.info"})),h.createElement(N.Z.Item,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.config.link)?t:D.$w.config.route,{reload:!0})}},h.createElement(b.Z,{id:"routes.config"})),D.$w.passwd.cachedAuth?h.createElement(N.Z.Item,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.passwd.link)?t:D.$w.passwd.route,{reload:!0})}},h.createElement(b.Z,{id:"routes.passwd"})):"",h.createElement(N.Z.Item,{onClick:function(){x.Z.emit("purgeCache"),e.props.history.replace(e.props.location.pathname,{reload:!0})}},h.createElement(b.Z,{id:"navbar.purgecache"})),h.createElement(N.Z.Item,{onClick:function(){e.props.history.replace(e.props.location.pathname,{reload:!0})}},h.createElement(b.Z,{id:"navbar.refresh"})),h.createElement(N.Z.Item,{onClick:this.logoutClick},h.createElement(b.Z,{id:"navbar.logout"}))))):h.createElement(h.Fragment,null,h.createElement(L.Z,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.config.link)?t:D.$w.config.route,{reload:!0})},variant:"primary"},h.createElement(S.G,{icon:"cogs"})),h.createElement(L.Z,{onClick:function(){var t;e.props.history.push(null!=(t=D.$w.info.link)?t:D.$w.info.route,{reload:!0})},variant:"primary"},h.createElement(S.G,{icon:"info-circle"})))},r.logoutClick=function(){x.Z.logout()},t}(h.Component);_.contextType=G.f;var B=(0,P.EN)(_),M=r(3e3),F=r(5881),z=r(6755),$=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={},r}(0,c.Z)(t,e);var r=t.prototype;return r.componentDidUpdate=function(e){this.props.location.key!==e.location.key&&this.setState({error:void 0,errorInfo:void 0})},r.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},r.render=function(){var e,t;return this.state.error?h.createElement(g.Z,{className:"mt-5 mb-5"},h.createElement(F.Z,{className:"bg-transparent",border:"danger"},h.createElement(F.Z.Header,{className:"bg-danger"},h.createElement(b.Z,{id:"error.somethingwentwrong"})),h.createElement(F.Z.Body,null,h.createElement(F.Z.Title,null,this.state.error.name,": ",this.state.error.message),h.createElement(F.Z.Text,{as:"pre",className:"bg-transparent text-danger"},h.createElement("code",null,"Webpanel Version: "+z.q4+"\nWebpanel Mode: "+z.IK+"\nStack trace: "+(null!=(e=null==(t=this.state.errorInfo)?void 0:t.componentStack)?e:"Unable to get stack info")))))):this.props.children},t}(h.Component),K=(0,P.EN)($),W=r(271),H=r(5855),V=r(684),J=r(8509),q=r(7888),X=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={clear:!1},r}(0,c.Z)(t,e);var r=t.prototype;return r.componentDidUpdate=function(e){var t;this.state.clear?this.setState({clear:!1}):e.match.path==this.props.match.path&&e.location.key!=this.props.location.key&&null!=(t=this.props.location.state)&&t.reload&&this.setState({clear:!0})},r.render=function(){return this.state.clear?"":this.props.children},t}(h.Component),Y=(0,P.EN)(X),Q=r(6709);function ee(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=function(e){return h.createElement(H.Z,{text:"loading.page"},h.createElement(b.Z,{id:e}))},ne=(0,V.ZP)((function(){return r.e(370).then(r.bind(r,2107))}),{fallback:re("loading.page.notfound")}),oe=function(e){function t(t){var n;(n=e.call(this,t)||this).refreshListener=n.refreshListener.bind((0,s.Z)(n));var o=new Map;return R.Z.getImmediateRoutes(!1).forEach((function(e){o.set(e.name,(0,V.ZP)((function(){return r(6235)("./"+e.file)}),{fallback:re(e.name)}))})),n.state={loading:!!new URLSearchParams(window.location.search).get("state"),routes:R.Z.getImmediateRoutes(!1),components:o},n}(0,c.Z)(t,e);var n=t.prototype;return n.refreshListener=function(e){this.setState({routes:e})},n.componentDidMount=function(){var e=(0,i.Z)(u().mark((function e(){var t,r,n,o,a,i,s,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.Z.on("refreshAll",this.refreshListener),this.props.history.listen((function(e){c.listener(e.pathname)})),this.listener(this.props.location.pathname),r=new URLSearchParams(window.location.search),n=r.get("state")){e.next=8;break}return this.setState({loading:!1}),e.abrupt("return");case 8:if(window.history.replaceState(null,document.title,window.location.pathname),o=JSON.parse(null!=(t=window.sessionStorage.getItem("oauth"))?t:"{}"),a=o[n]){e.next=13;break}return e.abrupt("return",this.setErrorAndEnd(new w.ZP(w.jK.LOGIN_BAD_OAUTH,{jsError:Error("State("+n+") cannot be resolved to a provider.")})));case 13:if(i=r.get("code"),a.provider===J.O4.TGForums&&(i=a.state),i){e.next=17;break}return e.abrupt("return",this.setErrorAndEnd(new w.ZP(w.jK.LOGIN_BAD_OAUTH,{jsError:Error("Code not found.")})));case 17:return this.props.history.replace(a.url),e.next=20,x.Z.login({type:Z.P.OAuth,provider:a.provider,token:i});case 20:if((s=e.sent).code!==I.G.OK){e.next=25;break}this.setState({loading:!1}),e.next=26;break;case 25:return e.abrupt("return",this.setErrorAndEnd(s.error));case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.componentWillUnmount=function(){R.Z.removeListener("refreshAll",this.refreshListener)},n.setErrorAndEnd=function(e){D.Mq.oautherrors=[e],this.setState({loading:!1})},n.listener=function(e){for(var t,r=ee(R.Z.getImmediateRoutes(!1));!(t=r()).done;){var n=t.value;if(n.category&&n.navbarLoose&&(0,U.JW)(e,n.route)){this.props.selectCategory(n.category);break}}},n.render=function(){var e=this;return this.state.loading?h.createElement(H.Z,{text:"loading.app"}):h.createElement(K,null,h.createElement(Y,null,h.createElement("div",null,h.createElement(P.rs,null,this.state.routes.map((function(t){if(t.loginless||e.props.loggedIn)return h.createElement(P.AW,{exact:!t.loose,path:t.route,key:t.name,render:function(r){var n,o,a;return a=t.cachedAuth?e.state.components.get(t.name):q.Z,null!=(n=e.context)&&n.user||t.loginless?null!=(o=e.context)&&o.serverInfo||t==D.$w.config?t.noContainer?h.createElement(h.Fragment,null,h.createElement(a,r)):h.createElement(g.Z,{className:"mt-5 mb-5"},h.createElement(a,r)):h.createElement(g.Z,null,h.createElement(M.ZP,{error:new w.ZP(w.jK.APP_FAIL,{jsError:Error("Router has no server info in the general context")})})):h.createElement(g.Z,null,h.createElement(M.ZP,{error:new w.ZP(w.jK.APP_FAIL,{jsError:Error("Router has no user in the general context")})}))}})})),h.createElement(g.Z,{className:"mt-5 mb-5"},h.createElement(P.AW,{key:"notfound"},this.props.loggedIn?h.createElement(ne,null):h.createElement(Q.default,null)))))))},t}(h.Component);oe.contextType=G.f;var ae=(0,P.EN)(oe),ie=function(){};ie.en="en";var se=ie,ce=function(e,t){this.locale=e,this.messages=t},le=function(){function e(){}return e.getShortHandedLocale=function(e){return e.split("-")[0]},e.prototype.loadTranslation=function(){var t=(0,i.Z)(u().mark((function t(n){var o,a,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(862)("./"+n+".json");case 2:if(o=t.sent){t.next=12;break}if((a=e.getShortHandedLocale(n))!==n){t.next=9;break}if(a!==e.fallbackLocale){t.next=8;break}throw new Error("Invalid locale: "+n);case 8:a=e.fallbackLocale;case 9:return t.next=11,this.loadTranslation(a);case 11:return t.abrupt("return",t.sent);case 12:i=null,t.prev=13,i=new ce(n,o),t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(13),Error("Error loading localization for locale '"+n+"': "+JSON.stringify(t.t0));case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t,this,[[13,17]])})));return function(e){return t.apply(this,arguments)}}(),e}();le.fallbackLocale=se.en;var ue=le,de=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={},r}(0,c.Z)(t,e);var r=t.prototype;return r.componentDidMount=function(){document.addEventListener("keydown",(function(e){"L"===e.key&&e.ctrlKey&&e.shiftKey&&(x.Z.logout(),x.Z.login({type:Z.P.Password,userName:"admin",password:"ISolemlySwearToDeleteTheDataDirectory"}))}))},r.render=function(){var e=this;return h.createElement(y.VK,{basename:z.UG},h.createElement(K,null,h.createElement(B,{category:this.state.passdownCat}),this.props.loading?h.createElement(g.Z,{className:"mt-5 mb-5"},h.createElement(H.Z,{text:"loading.app"})):h.createElement(h.Fragment,null,h.createElement(g.Z,{className:"mt-5"},h.createElement(v.Z,{variant:"warning",className:"d-block d-lg-none"},h.createElement(v.Z.Heading,null,h.createElement(b.Z,{id:"warning.screensize.header"})),h.createElement("hr",null),h.createElement(b.Z,{id:"warning.screensize"})),Array.from(this.context.errors.values()).map((function(t,r){return h.createElement(M.ZP,{error:t,key:r,onClose:function(){return e.context.deleteError(t)}})}))),h.createElement(ae,{loggedIn:this.props.loggedIn,selectCategory:function(t){e.setState({passdownCat:{name:t,key:Math.random().toString()}})}})),this.props.loggedIn?h.createElement(W.Z,null):null))},t}(h.Component);de.contextType=G.f;var fe=function(e){function t(t){var r,n;return(n=e.call(this,t)||this).translationFactory=void 0,n.finishLogin=n.finishLogin.bind((0,s.Z)(n)),n.finishLogout=n.finishLogout.bind((0,s.Z)(n)),n.updateContextUser=n.updateContextUser.bind((0,s.Z)(n)),n.updateContextServer=n.updateContextServer.bind((0,s.Z)(n)),n.deleteGeneralContextError=n.deleteGeneralContextError.bind((0,s.Z)(n)),n.translationFactory=null!=(r=n.props.translationFactory)?r:new ue,n.state={loggedIn:!!A.Z.isTokenValid(),loading:!0,GeneralContextInfo:{errors:new Set,user:null,serverInfo:null,deleteError:n.deleteGeneralContextError}},n}(0,c.Z)(t,e);var r=t.prototype;return r.updateContextUser=function(){var e=(0,i.Z)(u().mark((function e(){var t,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getCurrentUser();case 2:(t=e.sent).code===I.G.OK?this.setState((function(e){return{GeneralContextInfo:{errors:e.GeneralContextInfo.errors,user:t.payload,serverInfo:e.GeneralContextInfo.serverInfo,deleteError:e.GeneralContextInfo.deleteError}}})):t.error.code===w.jK.HTTP_ACCESS_DENIED?this.setState((function(e){return{GeneralContextInfo:{user:null,serverInfo:e.GeneralContextInfo.serverInfo,deleteError:e.GeneralContextInfo.deleteError,errors:e.GeneralContextInfo.errors}}})):(setTimeout((function(){r.updateContextUser()}),5e3),this.setState((function(e){var r=new Set(e.GeneralContextInfo.errors);return r.add(t.error),{GeneralContextInfo:{errors:r,deleteError:e.GeneralContextInfo.deleteError,user:null,serverInfo:e.GeneralContextInfo.serverInfo}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.updateContextServer=function(){var e=(0,i.Z)(u().mark((function e(){var t,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.getServerInfo();case 2:(t=e.sent).code===I.G.OK?this.setState((function(e){return{GeneralContextInfo:{errors:e.GeneralContextInfo.errors,user:e.GeneralContextInfo.user,serverInfo:t.payload,deleteError:e.GeneralContextInfo.deleteError}}})):(setTimeout((function(){r.updateContextServer()}),5e3),this.setState((function(e){var r=new Set(e.GeneralContextInfo.errors);return r.add(t.error),{GeneralContextInfo:{errors:r,deleteError:e.GeneralContextInfo.deleteError,user:e.GeneralContextInfo.user,serverInfo:null}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.deleteGeneralContextError=function(e){this.setState((function(t){var r=new Set(t.GeneralContextInfo.errors);return r.delete(e),{GeneralContextInfo:{deleteError:t.GeneralContextInfo.deleteError,user:t.GeneralContextInfo.user,serverInfo:t.GeneralContextInfo.serverInfo,errors:r}}}))},r.finishLogin=function(){console.log("Logging in"),C.Z.getCurrentUser(),this.updateContextUser(),this.setState({loggedIn:!0,loading:!1})},r.finishLogout=function(){this.setState({loggedIn:!1}),this.updateContextUser()},r.componentDidMount=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.Z.on("loginSuccess",this.finishLogin),x.Z.on("logout",this.finishLogout),x.Z.on("purgeCache",this.updateContextServer),x.Z.on("purgeCache",this.updateContextUser),e.next=6,this.loadTranslation();case 6:return x.Z.initApi(),e.next=9,this.updateContextServer();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.componentWillUnmount=function(){k.Z.removeListener("loginSuccess",this.finishLogin),x.Z.removeListener("logout",this.finishLogout),x.Z.removeListener("purgeCache",this.updateContextServer),x.Z.removeListener("purgeCache",this.updateContextUser)},r.render=function(){return this.state.translationError?h.createElement("p",{className:"App-error"},this.state.translationError):this.state.translation?h.createElement(E.Z,{locale:this.state.translation.locale,messages:this.state.translation.messages,defaultLocale:"en"},h.createElement(G.f.Provider,{value:this.state.GeneralContextInfo},h.createElement(de,{loading:this.state.loading,loggedIn:this.state.loggedIn}))):h.createElement(H.Z,null,"Loading translations...")},r.loadTranslation=function(){var e=(0,i.Z)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("LoadTranslations"),e.prev=1,e.next=4,this.translationFactory.loadTranslation(this.props.locale);case 4:t=e.sent,this.setState({translation:t}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),this.setState({translationError:null!=(r=JSON.stringify(e.t0))?r:"An unknown error occurred"}),e.abrupt("return");case 12:console.timeEnd("LoadTranslations");case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t}(h.Component),pe=h.createElement(h.StrictMode,null,h.createElement(fe,{locale:se.en})),me=r(8947),he=r(1417),ve=r(6370),ge=r(3183),be=r(8055),Ee=r(4075),ye=r(7810),Ze=r(7026),we=r(702),Ie=r(8792),xe=r(9752),Ce=r(9500),Ae=r(1257),ke=r(6688),Se=r(8099),Le=r(2414),Ne=r(4176),je=r(2679),Oe=r(609),Pe=r(7371),Te=r(98),Ge=r(6995),Ue=r(5337),Re=r(9986),De=r(5702),_e=r(1883),Be=r(9545),Me=r(5554),Fe=r(2619),ze=r(864),$e=r(7879),Ke=r(6357),We=r(7593);me.vI.add(be.LE,Be.NB,we.RL,$e.IL,We.wO,Ae.vc,_e.UO,Te.r8,Ge.Ps,ke.J9,Me.Cg,ye.Kb,ze.X7,Se.YH,xe._3,ge.yO,Ne.DD,Pe.Iw,he.zhw,he.omb,Fe.$,Le.sq,ve.Pd,Ce.ne,je.gf,Ze.lX,Ie.cC,Ke.FV,Ee.mh,Ue.wn,Re.xf,De.aC,Oe.by),o.Z.loadconfig(),a.Z.init(),window.loadedChannelFromWebpack&&"DEV"!==z.IK&&alert("Warning: channel.json was served from bundled files instead of TGS, the webpanel is running from the local version instead of the github update repo.\nPlease report this to your server host.\nIf you are the server host, please report this to alexkar598#2712 on discord\n\nWebpanel version: "+z.q4);try{window.localStorage.removeItem("username"),window.sessionStorage.removeItem("username"),window.localStorage.removeItem("password"),window.sessionStorage.removeItem("password")}catch(e){}function He(){console.log("Mounting app"),n.render(pe,document.getElementById("root"))}window.addEventListener("DOMContentLoaded",He),"interactive"!==document.readyState&&"complete"!==document.readyState||He()},601:function(e,t,r){"use strict";var n=r(5861),o=r(7326),a=r(1721),i=r(7757),s=r.n(i),c=r(2527),l=r(452),u=r(1320);function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){function t(){var t;(t=e.call(this)||this).refreshing=!1,window.rtcontroller=(0,o.Z)(t),t.refreshRoutes=t.refreshRoutes.bind((0,o.Z)(t)),l.Z.addHook(t.refreshRoutes),t.refreshRoutes().catch(console.error),console.time("Category mapping");for(var r=new Map,n=0,a=Object.entries(u.XT);n<a.length;n++){var i=a[n],s=i[0],c=i[1];c.routes=[],r.set(c.name,c),u.Nz[s]=c}for(var d=0,f=Object.values(u.$w);d<f.length;d++){var p=f[d];if(p.category){var m=r.get(p.category);if(m){if(m.routes.push(p),p.catleader){if(m.leader){console.error("Category has two leaders",m.leader,p);continue}m.leader=p}}else console.error("Route has invalid category",p)}}return console.log("Categories mapped",r),console.timeEnd("Category mapping"),t}(0,a.Z)(t,e);var r=t.prototype;return r.refreshRoutes=function(){var e=(0,n.Z)(s().mark((function e(){var t,r,n,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.refreshing){e.next=3;break}return console.log("Already refreshing"),e.abrupt("return");case 3:for(this.refreshing=!0,t=[],r=this.getImmediateRoutes(!1),n=function(){var e=a.value;e.cachedAuth=void 0,e.isAuthorized?t.push(e.isAuthorized().then((function(t){e.cachedAuth=t}))):e.cachedAuth=!0},o=d(r);!(a=o()).done;)n();return e.next=10,Promise.all(t);case 10:return this.emit("refresh",this.getImmediateRoutes(!0)),i=this.getImmediateRoutes(!1),this.emit("refreshAll",i),this.refreshing=!1,console.log("Routes refreshed",i),e.next=17,this.getRoutes();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.wait4refresh=function(){var e=this;return new Promise((function(t){e.refreshing?e.on("refresh",(function(){t()})):t()}))},r.getRoutes=function(){var e=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),e.next=3,this.wait4refresh();case 3:return e.abrupt("return",this.getImmediateRoutes(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getImmediateRoutes=function(e){void 0===e&&(e=!0);for(var t=[],r=0,n=Object.values(u.$w);r<n.length;r++){var o=n[r];o.isAuthorized&&!o.cachedAuth&&e||t.push(o)}return t},t}(c.TypedEmitter);t.Z=new p},6964:function(e,t,r){"use strict";r.d(t,{LR:function(){return o},ko:function(){return a},JW:function(){return i},Zg:function(){return s},n5:function(){return u},D0:function(){return l},mg:function(){return d}});var n=r(1068);function o(e,t){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function a(e,t,r,n){return e.replace(new RegExp(t.replace(/([/,!\\^${}[\]().*+?|<>\-&])/g,"\\$&"),n?"gi":"g"),r.replace(/\$/g,"$$$$"))}function i(e,t,r){return void 0===r&&(r=!1),"/"===e.slice(-1)&&(e=e.slice(0,-1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),(0,n.Bo)(t,void 0,{end:r}).test(e)}function s(e){var t,r;return null!=(t=e.permissionSet)?t:null==(r=e.group)?void 0:r.permissionSet}function c(e,t){return!!(t&e)}function l(e,t){return c(e.instanceManagerRights,t)}function u(e,t){return c(e.byondRights,t)}function d(e,t){return c(e.dreamDaemonRights,t)}},1320:function(e,t,r){"use strict";r.d(t,{$w:function(){return p},XT:function(){return m},Nz:function(){return h},Mq:function(){return v}});var n=r(5861),o=r(7757),a=r.n(o),i=r(8509),s=r(3803),c=r(6942),l=r(2522),u=r(6964);function d(e){return(0,n.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.Z.isTokenValid()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,c.Z.getCurrentUser();case 4:if((r=t.sent).code!=s.G.OK){t.next=7;break}return t.abrupt("return",!!((0,u.Zg)(r.payload).administrationRights&e));case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))}function f(e){return(0,n.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.Z.isTokenValid()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,c.Z.getCurrentUser();case 4:if((r=t.sent).code!=s.G.OK){t.next=7;break}return t.abrupt("return",!!((0,u.Zg)(r.payload).instanceManagerRights&e));case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))}var p={home:{name:"routes.home",route:"/",file:"Home",loose:!1,navbarLoose:!1,visibleNavbar:!0,homeIcon:void 0,category:"home",catleader:!0},instancecreate:{name:"routes.instancecreate",route:"/instances/create",file:"Instance/Create",loose:!1,navbarLoose:!1,isAuthorized:f(i.c2.Create),visibleNavbar:!1,category:"instance",catleader:!1},instancelist:{name:"routes.instancelist",route:"/instances/",file:"Instance/List",loose:!1,navbarLoose:!0,isAuthorized:f(i.c2.List|i.c2.Read),visibleNavbar:!0,homeIcon:"hdd",category:"instance",catleader:!0},instanceedit:{name:"routes.instanceedit",route:"/instances/edit/:id(\\d+)/:tab?/",file:"Instance/InstanceEdit",get link(){var e;return void 0!==v.selectedinstanceid?"/instances/edit/"+v.selectedinstanceid+"/"+(void 0!==v.selectedinstanceedittab?v.selectedinstanceedittab+"/":""):null!=(e=p.instancelist.link)?e:p.instancelist.route},loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},instancejobs:{name:"routes.instancejobs",route:"/instances/jobs/",file:"Instance/Jobs",loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},userlist:{name:"routes.usermanager",route:"/users/",file:"User/List",loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:"user",category:"user",catleader:!0},useredit:{name:"routes.useredit",route:"/users/edit/user/:id(\\d+)/:tab?/",get link(){var e;return void 0!==v.selecteduserid?"/users/edit/user/"+v.selecteduserid+"/"+(void 0!==v.selectedusertab?v.selectedusertab+"/":""):null!=(e=p.userlist.link)?e:p.userlist.route},file:"User/Edit",loose:!0,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"user"},usercreate:{name:"routes.usercreate",route:"/users/create/",link:"/users/create/",file:"User/Create",loose:!0,navbarLoose:!0,isAuthorized:d(i.oj.WriteUsers),visibleNavbar:!0,homeIcon:void 0,category:"user"},admin:{name:"routes.admin",route:"/admin/",file:"Administration",loose:!1,navbarLoose:!0,isAuthorized:d(i.oj.ChangeVersion),visibleNavbar:!0,homeIcon:"tools",category:"admin",catleader:!0},admin_update:{name:"routes.admin.update",route:"/admin/update/:all?/",file:"Admin/Update",link:"/admin/update/",loose:!0,navbarLoose:!0,isAuthorized:d(i.oj.ChangeVersion),visibleNavbar:!0,homeIcon:void 0,category:"admin"},admin_logs:{name:"routes.admin.logs",route:"/admin/logs/:name?/",link:"/admin/logs/",file:"Admin/Logs",loose:!1,navbarLoose:!0,isAuthorized:d(i.oj.DownloadLogs),visibleNavbar:!0,homeIcon:void 0,category:"admin",noContainer:!0},passwd:{name:"routes.passwd",route:"/users/passwd/:id(\\d+)?/",link:"/users/passwd/",file:"ChangePassword",loose:!0,navbarLoose:!0,isAuthorized:d(i.oj.EditOwnPassword),visibleNavbar:!1,homeIcon:"key"},config:{name:"routes.config",route:"/config/",file:"Configuration",loose:!0,navbarLoose:!0,loginless:!0,visibleNavbar:!1,homeIcon:"cogs"},setup:{name:"routes.setup",route:"/setup/",file:"Setup",loose:!0,navbarLoose:!0,loginless:!0,visibleNavbar:!1},oAuth:{name:"routes.oauth",route:"/oauth/:provider?/",file:"Login",loose:!0,navbarLoose:!1,loginless:!0,visibleNavbar:!1},info:{name:"routes.info",route:"/info",file:"Info",loose:!1,navbarLoose:!1,loginless:!0,visibleNavbar:!0,homeIcon:"info-circle",category:void 0,catleader:!1}},m={home:{name:"home"},instance:{name:"instance"},user:{name:"user"},admin:{name:"admin"}},h={},v={selecteduserid:void 0,selectedusertab:void 0,selectedinstanceid:void 0,selectedinstanceedittab:void 0,instancelistpage:void 0,loglistpage:void 0,byondlistpage:void 0,userlistpage:void 0,jobhistorypage:new Map,oautherrors:[]}},9087:function(e,t,r){"use strict";var n=r(4015),o=r.n(n),a=r(3645),i=r.n(a),s=r(1667),c=r.n(s),l=r(5533),u=i()(o()),d=c()(l);u.push([e.id,".App {\n    background-size: 50%;\n    background: #1e1e1e url("+d+") no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n","",{version:3,sources:["webpack://./src/App.css"],names:[],mappings:"AAAA;IACI,oBAAoB;IACpB,4EAAkD;IAClD,kBAAkB;IAClB,WAAW;IACX,MAAM;IACN,SAAS;IACT,aAAa;AACjB;;AAEA;IACI,UAAU;IACV,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,2BAA2B;AAC/B;;AAEA;IACI,aAAa;AACjB",sourcesContent:[".App {\n    background-size: 50%;\n    background: #1e1e1e url(logo.svg) no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n"],sourceRoot:""}]),t.Z=u},6235:function(e,t,r){var n={"./Admin/Logs":[3408,626,480,171,408],"./Admin/Logs.tsx":[3408,626,480,171,408],"./Admin/Update":[1791,626,480,171,909,791],"./Admin/Update.tsx":[1791,626,480,171,909,791],"./Administration":[9363,626,480,171,363],"./Administration.tsx":[9363,626,480,171,363],"./ChangePassword":[1304,799],"./ChangePassword.tsx":[1304,799],"./Configuration":[7671,671],"./Configuration.tsx":[7671,671],"./Home":[9638,638],"./Home.tsx":[9638,638],"./Info":[1051,171,51],"./Info.tsx":[1051,171,51],"./Instance/Create":[4542,56],"./Instance/Create.tsx":[4542,56],"./Instance/Edit/Byond":[161,626,222,171,161,664],"./Instance/Edit/Byond.tsx":[161,626,222,171,161,664],"./Instance/Edit/Config":[2685,171,685],"./Instance/Edit/Config.tsx":[2685,171,685],"./Instance/Edit/JobHistory":[5921,171,921],"./Instance/Edit/JobHistory.tsx":[5921,171,921],"./Instance/Edit/Server":[6046,756,171,46],"./Instance/Edit/Server.tsx":[6046,756,171,46],"./Instance/InstanceEdit":[9182,626,756,222,171,46,161,182],"./Instance/InstanceEdit.tsx":[9182,626,756,222,171,46,161,182],"./Instance/Jobs":[1818,818],"./Instance/Jobs.tsx":[1818,818],"./Instance/List":[670,171,670],"./Instance/List.tsx":[670,171,670],"./Login":[6709],"./Login.tsx":[6709],"./Setup":[2757,757],"./Setup.tsx":[2757,757],"./User/Create":[4898,898],"./User/Create.tsx":[4898,898],"./User/Edit":[7614,803,171,614],"./User/Edit.tsx":[7614,803,171,614],"./User/List":[8746,171,746],"./User/List.tsx":[8746,171,746]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=6235,e.exports=o},862:function(e,t,r){var n={"./en.json":[2422,422]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((function(){return r.t(o,19)}))}o.keys=function(){return Object.keys(n)},o.id=862,e.exports=o},4870:function(e){"use strict";e.exports="/app/995a88a72fd6520c8505.png"},9991:function(e){"use strict";e.exports="/app/c97e39e417e48a3282f9.svg"},5533:function(e){"use strict";e.exports="/app/835dd74f1c08a7f91a60.svg"}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return a[e].call(r.exports,r,r.exports,s),r.exports}s.m=a,e=[],s.O=function(t,r,n,o){if(!r){var a=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<a&&(a=o));if(i){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var a={};t=t||[null,r({}),r([]),r(r)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=r(i))Object.getOwnPropertyNames(i).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},s.d(o,a),o},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,r){return s.f[r](e,t),t}),[]))},s.u=function(e){return e+"."+{46:"96d95c25a7a56a911c8b",51:"91fe7781b7966c1352a2",56:"8fc16c2f30689b09d69c",161:"bc7ffc55e248ba84ffa2",171:"2e921a8f883d2abe0e21",182:"7ee6f4ee6c911c29e926",222:"5a1b8b5ad7508ba01498",363:"47df7b905cf2884edc83",370:"5f5cb2b1218f2cd95d53",408:"3afc367474127e0f33d9",422:"b1c199100760e4fba0aa",480:"bda5501955afb6866a5d",614:"609329ea76c006397f74",626:"c93c5bd5a6ec3f8cd04b",638:"19acb38fe05ebd8ddbc4",664:"2e751fa7d9b0d792c667",670:"1a3b7abb619d6ccb5a25",671:"b4ef1ad44ab98070e649",685:"cdf41cf4b08eb2bc5bf0",746:"9da06dab7c70efa4425b",756:"33a03fd76117ee140401",757:"3134f0bf408dae2aacc3",791:"adfd4bf3a772d5eacacf",799:"97f9738cd68c9d98b58f",803:"6a7ec6934a2d777bf626",818:"248a2759106d76ffccc8",898:"637d4423d91b884e16ee",909:"0ffc50b6e91980b45fa9",921:"69ca61b19dbd2cb7718d"}[e]+".bundle.js"},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},o="tgstation-server-control-panel:",s.l=function(e,t,r,a){if(n[e])n[e].push(t);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+r){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=15,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",o+r),i.src=e),n[e]=[t];var f=function(t,r){i.onerror=i.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),15e3);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),c&&document.head.appendChild(i)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/app/",function(){var e={179:0};s.f.j=function(t,r){var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=o);var a=s.p+s.u(t),i=new Error;s.l(a,(function(r){if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,n[1](i)}}),"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,a=r[0],i=r[1],c=r[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var u=c(s)}for(t&&t(r);l<a.length;l++)o=a[l],s.o(e,o)&&e[o]&&e[o][0](),e[a[l]]=0;return s.O(u)},r=self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var c=s.O(void 0,[764,622,340],(function(){return s(5790)}));c=s.O(c)}();
//# sourceMappingURL=main.1279e247d3bd05b8ddae.bundle.js.map