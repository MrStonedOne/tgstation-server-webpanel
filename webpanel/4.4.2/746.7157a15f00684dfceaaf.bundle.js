"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[746],{8425:function(e,t,a){a.d(t,{t:function(){return c}});var r=a(7294),s=a(5171),n=a.n(s),l=a(7961);function i(e){return r.createElement(n(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function c(e){return l.ZP.showjson.value?r.createElement("div",{className:"text-left"},r.createElement(i,{obj:e.obj})):r.createElement(r.Fragment,null)}},9905:function(e,t,a){a.d(t,{Z:function(){return O}});var r=a(7814),s=a(7294),n=a(5005),l=a(2258),i=a(5293),c=a(7462),o=a(3366),m=a(4184),p=a.n(m),d=a(6792),u=a(8358),h=["active","disabled","className","style","activeLabel","children"],g=["children"],E=s.forwardRef((function(e,t){var a=e.active,r=e.disabled,n=e.className,l=e.style,i=e.activeLabel,m=e.children,d=(0,o.Z)(e,h),g=a||r?"span":u.Z;return s.createElement("li",{ref:t,style:l,className:p()(n,"page-item",{active:a,disabled:r})},s.createElement(g,(0,c.Z)({className:"page-link",disabled:r},d),m,a&&i&&s.createElement("span",{className:"sr-only"},i)))}));E.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},E.displayName="PageItem";var v=E;function f(e,t,a){function r(e){var r=e.children,n=(0,o.Z)(e,g);return s.createElement(E,n,s.createElement("span",{"aria-hidden":"true"},r||t),s.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),r.displayName=e,r}var P=f("First","\xab"),Z=f("Prev","\u2039","Previous"),b=f("Ellipsis","\u2026","More"),y=f("Next","\u203a"),N=f("Last","\xbb"),x=["bsPrefix","className","children","size"],w=s.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,n=e.children,l=e.size,i=(0,o.Z)(e,x),m=(0,d.vE)(a,"pagination");return s.createElement("ul",(0,c.Z)({ref:t},i,{className:p()(r,m,l&&m+"-"+l)}),n)}));w.First=P,w.Prev=Z,w.Ellipsis=b,w.Item=v,w.Next=y,w.Last=N;var k=w,C=(a(5638),["as","bsPrefix","className","children"]),S=s.forwardRef((function(e,t){var a=e.as,r=void 0===a?"div":a,n=e.bsPrefix,l=e.className,i=e.children,m=(0,o.Z)(e,C);return n=(0,d.vE)(n,"popover-header"),s.createElement(r,(0,c.Z)({ref:t},m,{className:p()(n,l)}),i)})),M=["as","bsPrefix","className","children"],R=s.forwardRef((function(e,t){var a=e.as,r=void 0===a?"div":a,n=e.bsPrefix,l=e.className,i=e.children,m=(0,o.Z)(e,M);return n=(0,d.vE)(n,"popover-body"),s.createElement(r,(0,c.Z)({ref:t},m,{className:p()(l,n)}),i)})),G=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],I=s.forwardRef((function(e,t){var a=e.bsPrefix,r=e.placement,n=e.className,l=e.style,i=e.children,m=e.content,u=e.arrowProps,h=(e.popper,e.show,(0,o.Z)(e,G)),g=(0,d.vE)(a,"popover"),E=((null==r?void 0:r.split("-"))||[])[0];return s.createElement("div",(0,c.Z)({ref:t,role:"tooltip",style:l,"x-placement":E,className:p()(n,g,E&&"bs-popover-"+E)},h),s.createElement("div",(0,c.Z)({className:"arrow"},u)),m?s.createElement(R,null,i):i)}));I.defaultProps={placement:"right"},I.Title=S,I.Content=R;var L=I,j=a(4012);function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},U.apply(this,arguments)}class O extends s.PureComponent{constructor(e){super(e),this.state={showGoto:!1,gotoValue:e.currentPage}}render(){const e=[],t=Math.max(this.props.totalPages-this.props.currentPage-1,0),a=Math.max(this.props.currentPage-2,0),c=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-t,2),2),o=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-a,2),this.props.totalPages-1);for(let t=c;t<=o;t++)e.push(s.createElement(k.Item,{key:t,active:t===this.props.currentPage,onClick:()=>this.props.selectPage(t)},t));const m=this.props.totalPages>7?s.createElement(k.Ellipsis,{disabled:!0}):null,p=s.createElement(L,{id:"popover-gotopage"},s.createElement(L.Title,null,s.createElement(j.Z,{id:"generic.goto.title"})),s.createElement(L.Content,null,s.createElement("form",{className:"d-flex",onSubmit:e=>{e.preventDefault(),this.props.selectPage(this.state.gotoValue),this.setState({showGoto:!1})}},s.createElement(l.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:e=>this.setState({gotoValue:parseInt(e.target.value)}),custom:!0}),s.createElement(n.Z,{type:"submit"},s.createElement(j.Z,{id:"generic.goto"}))))),{selectPage:d,totalPages:u,currentPage:h,...g}=this.props;return s.createElement("div",U({className:"text-center",style:{position:"sticky",bottom:"1.5em"}},g),s.createElement(k,{className:"justify-content-center"},s.createElement(k.Prev,{disabled:this.props.currentPage<=1,onClick:()=>this.props.selectPage(Math.max(this.props.currentPage-1,1))}),s.createElement(k.Item,{active:this.props.currentPage<=1,onClick:()=>this.props.selectPage(1)},"1"),m,e,m,this.props.totalPages>=2?s.createElement(k.Item,{active:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(this.props.totalPages)},this.props.totalPages):null,this.props.totalPages>7?s.createElement(i.Z,{show:this.state.showGoto,placement:"top",overlay:p},s.createElement(k.Item,{onClick:()=>this.setState((e=>({showGoto:!e.showGoto})))},s.createElement(r.G,{icon:"search"}))):null,s.createElement(k.Next,{disabled:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(Math.min(this.props.currentPage+1,this.props.totalPages))})))}}},8746:function(e,t,a){a.r(t);var r=a(7294),s=a(8375),n=a(7977),l=a(5005),i=a(5293),c=a(5147),o=a(3489),m=a(4012),p=a(8272),d=a(5977),u=a(3727),h=a(8509),g=a(3803),E=a(6942),v=a(6964),f=a(1320),P=a(3e3),Z=a(8425),b=a(5855),y=a(9905);t.default=(0,d.EN)(class extends r.Component{constructor(e){super(e),this.state={errors:[],users:[],loading:!0,canList:!1,page:f.Mq.userlistpage??1}}addError(e){this.setState((t=>{const a=Array.from(t.errors);return a.push(e),{errors:a}}))}async loadUsers(){if(this.setState({loading:!0}),this.state.canList){const e=await E.Z.listUsers({page:this.state.page});switch(e.code){case g.G.OK:this.state.page>e.payload.totalPages&&0!==e.payload.totalPages&&this.setState({page:1}),this.setState({users:e.payload.content,maxPage:e.payload.totalPages});break;case g.G.ERROR:this.addError(e.error)}}else{const e=await E.Z.getCurrentUser();e.code===g.G.OK?this.setState({users:[e.payload]}):this.addError(e.error)}this.setState({loading:!1})}async componentDidUpdate(e,t){t.page!==this.state.page&&(f.Mq.userlistpage=this.state.page,await this.loadUsers())}async componentDidMount(){const e=await E.Z.getCurrentUser();if(e.code==g.G.OK){const t=!!((0,v.Zg)(e.payload).administrationRights&h.oj.ReadUsers);this.setState({canList:t}),await this.loadUsers()}else this.addError(e.error);this.setState({loading:!1})}render(){return this.state.loading?r.createElement(b.Z,{text:"loading.userlist"}):r.createElement("div",{className:"text-center"},r.createElement(Z.t,{obj:this.state.users}),this.state.canList?"":r.createElement(s.Z,{className:"clearfix",variant:"error"},r.createElement(m.Z,{id:"view.user.list.cantlist"})),this.state.errors.map(((e,t)=>{if(e)return r.createElement(P.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const a=Array.from(e.errors);return a[t]=void 0,{errors:a}}))})})),r.createElement(c.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:!0},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,r.createElement(m.Z,{id:"generic.name"})),r.createElement("th",null,r.createElement(m.Z,{id:"generic.details"})),r.createElement("th",null,r.createElement(m.Z,{id:"generic.group"})),r.createElement("th",null,r.createElement(m.Z,{id:"generic.created"})),r.createElement("th",null,r.createElement(m.Z,{id:"generic.createdby"})),r.createElement("th",null,r.createElement(m.Z,{id:"generic.action"})))),r.createElement("tbody",null,this.state.users.map((e=>{const t=new Date(e.createdAt),a=(t.getTime()-Date.now())/1e3;return r.createElement("tr",{key:e.id},r.createElement("td",null,e.id),r.createElement("td",null,e.name),r.createElement("td",null,e.systemIdentifier?r.createElement(n.Z,{variant:"primary",className:"mx-1"},r.createElement(m.Z,{id:"generic.system.short"})):r.createElement(n.Z,{variant:"primary",className:"mx-1"},r.createElement(m.Z,{id:"generic.tgs"})),e.enabled?r.createElement(n.Z,{variant:"success",className:"mx-1"},r.createElement(m.Z,{id:"generic.enabled"})):r.createElement(n.Z,{variant:"danger",className:"mx-1"},r.createElement(m.Z,{id:"generic.disabled"})),e.group?r.createElement(n.Z,{variant:"warning",className:"mx-1"},r.createElement(m.Z,{id:"generic.grouped"})):null),e.group?r.createElement(i.Z,{overlay:r.createElement(o.Z,{id:`${e.name}-tooltip-group`},r.createElement(m.Z,{id:"generic.groupid",values:{id:e.group.id}}))},(({ref:t,...a})=>r.createElement("td",a,r.createElement("span",{ref:t},e.group.name)))):r.createElement("td",null),r.createElement(i.Z,{overlay:r.createElement(o.Z,{id:`${e.name}-tooltip`},t.toLocaleString())},(({ref:e,...t})=>r.createElement("td",t,r.createElement("span",{ref:e},r.createElement(p.Z,{value:a,numeric:"auto",updateIntervalInSeconds:1}))))),r.createElement(i.Z,{overlay:r.createElement(o.Z,{id:`${e.name}-tooltip-createdby`},r.createElement(m.Z,{id:"generic.userid"}),e.createdBy.id)},(({ref:t,...a})=>r.createElement("td",a,r.createElement("span",{ref:t},e.createdBy.name)))),r.createElement("td",{className:"align-middle p-0"},r.createElement(l.Z,{onClick:()=>{f.Mq.selecteduserid=e.id,this.props.history.push(f.$w.useredit.link??f.$w.useredit.route)}},r.createElement(m.Z,{id:"generic.edit"}))))})))),r.createElement(y.Z,{selectPage:e=>this.setState({page:e}),totalPages:this.state.maxPage??1,currentPage:this.state.page}),r.createElement(l.Z,{as:u.rU,to:f.$w.usercreate.link??f.$w.usercreate.route},r.createElement(m.Z,{id:"routes.usercreate"})))}})},7977:function(e,t,a){var r=a(7462),s=a(3366),n=a(4184),l=a.n(n),i=a(7294),c=a(6792),o=["bsPrefix","variant","pill","className","as"],m=i.forwardRef((function(e,t){var a=e.bsPrefix,n=e.variant,m=e.pill,p=e.className,d=e.as,u=void 0===d?"span":d,h=(0,s.Z)(e,o),g=(0,c.vE)(a,"badge");return i.createElement(u,(0,r.Z)({ref:t},h,{className:l()(p,g,m&&g+"-pill",n&&g+"-"+n)}))}));m.displayName="Badge",m.defaultProps={pill:!1},t.Z=m},5147:function(e,t,a){var r=a(7462),s=a(3366),n=a(4184),l=a.n(n),i=a(7294),c=a(6792),o=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],m=i.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,m=e.striped,p=e.bordered,d=e.borderless,u=e.hover,h=e.size,g=e.variant,E=e.responsive,v=(0,s.Z)(e,o),f=(0,c.vE)(a,"table"),P=l()(n,f,g&&f+"-"+g,h&&f+"-"+h,m&&f+"-striped",p&&f+"-bordered",d&&f+"-borderless",u&&f+"-hover"),Z=i.createElement("table",(0,r.Z)({},v,{className:P,ref:t}));if(E){var b=f+"-responsive";return"string"==typeof E&&(b=b+"-"+E),i.createElement("div",{className:b},Z)}return Z}));t.Z=m}}]);
//# sourceMappingURL=746.7157a15f00684dfceaaf.bundle.js.map