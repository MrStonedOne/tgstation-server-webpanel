"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[711,964],{88964:function(t,e,n){n.r(e);var r=n(67294),o=n(5977),a=n(48155),i=n(15402),c=n(38592),u=n(49896),s=n(42540),l=n(43307),f=n(81251),d=n(80919),p=n(54651);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function g(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(w,t);var e,n,o,u,m,y,h=(m=w,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(m);if(y){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function w(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),(e=h.call(this,t)).editInstance=e.editInstance.bind(O(e)),e.state={errors:[]},e}return e=w,n=[{key:"addError",value:function(t){this.setState((function(e){var n=Array.from(e.errors);return n.push(t),{errors:n}}))}},{key:"editInstance",value:(o=function*(t){var e=yield i.Z.editInstance(v(v({},t),{},{id:this.context.instance.id}));e.code===c.G.OK?this.context.reloadInstance():this.addError(e.error)},u=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=o.apply(t,e);function i(t){b(a,n,r,i,c,"next",t)}function c(t){b(a,n,r,i,c,"throw",t)}i(void 0)}))},function(t){return u.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=function(e){return(0,s.D0)((0,s.Zg)(t.context.user),e)},n={name:{name:"fields.instance.name",type:f.fS.String,defaultValue:this.context.instance.name,disabled:!e(a.c2.Rename)},path:{name:"fields.instance.path",type:f.fS.String,defaultValue:this.context.instance.path,disabled:!e(a.c2.Relocate)},chatBotLimit:{name:"fields.instance.chatbotlimit",type:f.fS.Number,min:0,defaultValue:this.context.instance.chatBotLimit,disabled:!e(a.c2.SetChatBotLimit)},autoUpdateInterval:{name:"fields.instance.autoupdate",type:f.fS.Number,min:0,defaultValue:this.context.instance.autoUpdateInterval,disabled:!e(a.c2.SetAutoUpdate)},configurationType:{name:"fields.instance.filemode",type:f.fS.Enum,enum:a.c7,defaultValue:this.context.instance.configurationType,disabled:!e(a.c2.SetConfiguration)}};return r.createElement("div",{className:"text-center"},r.createElement(p.t,{obj:this.context}),this.state.errors.map((function(e,n){if(e)return r.createElement(l.ZP,{key:n,error:e,onClose:function(){return t.setState((function(t){var e=Array.from(t.errors);return e[n]=void 0,{errors:e}}))}})})),r.createElement(d.Z,{fields:n,onSave:this.editInstance}))}}],n&&E(e.prototype,n),w}(r.Component);w.contextType=u.g,e.default=(0,o.EN)(w)},41606:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var r=n(67294),o=n(41106),a=n(38592),i=n(71460),c=n(49896),u=n(3429),s=n(43307),l=n(33543),f=n(54651),d=n(71739),p=n(9657);function m(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)}))}}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(){var t,e=r.useContext(c.g),n=v((0,r.useState)([]),2),m=n[0],h=n[1],b=v((0,r.useState)([]),2),E=b[0],S=b[1],g=v((0,r.useState)(!0),2),O=g[0],x=g[1],w=v((0,r.useState)(null!==(t=u.Mq.jobhistorypage.get(e.instance.id))&&void 0!==t?t:1),2),P=w[0],Z=w[1],j=v((0,r.useState)(void 0),2),C=j[0],I=j[1];function k(){return(k=y((function*(){var t=yield o.Z.listJobs(e.instance.id,{page:P});t.code===a.G.OK?(P>t.payload.totalPages&&0!==t.payload.totalPages&&Z(1),h(t.payload.content),I(t.payload.totalPages)):A(t.error),x(!1)}))).apply(this,arguments)}function A(t){S((function(e){var n=Array.from(e);return n.push(t),n}))}function R(t){return N.apply(this,arguments)}function N(){return(N=y((function*(t){var e=yield o.Z.deleteJob(t.instanceid,t.id);e.code===a.G.OK?i.Z.fastmode=5:A(e.error)}))).apply(this,arguments)}return(0,r.useEffect)((function(){u.Mq.jobhistorypage.set(e.instance.id,P),x(!0),function(){k.apply(this,arguments)}()}),[P]),(0,r.useEffect)((function(){}),[E]),O?r.createElement(d.Z,{text:"loading.instance.jobs.list"}):r.createElement("div",null,r.createElement(f.t,{obj:m}),E.map((function(t,e){if(t)return r.createElement(s.ZP,{key:e,error:t,onClose:function(){return S((function(t){var n=Array.from(t);return n[e]=void 0,n}))}})})),m.sort((function(t,e){return e.id-t.id})).filter((function(t){return!!t.stoppedAt})).map((function(t){return r.createElement(l.Z,{job:t,key:t.id,onCancel:R})})),r.createElement(p.Z,{selectPage:function(t){return Z(t)},totalPages:null!=C?C:1,currentPage:P}))}},63711:function(t,e,n){n.r(e);var r=n(67814),o=n(67294),a=n(15881),i=n(13361),c=n(56841),u=n(44012),s=n(5977),l=n(48155),f=n(15402),d=n(60083),p=n(38592),m=n(7205),y=n(32826),v=n(49896),h=n(3429),b=n(3652),E=n(71739),S=n(76515),g=n(59012),O=n(88964),x=n(41606),w=n(78883);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){C(a,r,o,i,c,"next",t)}function c(t){C(a,r,o,i,c,"throw",t)}i(void 0)}))}}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}function R(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return N(t)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var T=l.D8.ReadActive|l.D8.ListInstalled|l.D8.InstallOfficialOrChangeActiveVersion|l.D8.InstallCustomVersion,K=l.py.SetPort|l.py.SetAutoStart|l.py.SetSecurity|l.py.ReadMetadata|l.py.SetWebClient|l.py.SoftRestart|l.py.SoftShutdown|l.py.Restart|l.py.Shutdown|l.py.Start|l.py.SetStartupTimeout|l.py.SetHeartbeatInterval|l.py.CreateDump|l.py.SetTopicTimeout|l.py.SetAdditionalParameters|l.py.SetVisibility,D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(x,t);var e,n,s,l,y,g,O=(y=x,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(y);if(g){var n=_(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function x(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x),(n=O.call(this,t)).reloadInstance=n.reloadInstance.bind(N(n)),n.deleteContextError=n.deleteContextError.bind(N(n)),h.Mq.selectedinstanceid=parseInt(n.props.match.params.id),n.state={tab:null!==(e=t.match.params.tab)&&void 0!==e?e:x.tabs[0][0],errors:new Set,instance:null,instancePermissionSet:null,reloadInstance:n.reloadInstance,deleteError:n.deleteContextError,instanceid:parseInt(n.props.match.params.id)},n}return e=x,n=[{key:"deleteContextError",value:function(t){this.setState((function(e){var n=new Set(e.errors);return n.delete(t),{errors:n}}))}},{key:"componentDidMount",value:(l=I((function*(){yield this.reloadInstance()})),function(){return l.apply(this,arguments)})},{key:"componentDidUpdate",value:function(t){this.props.match.params.tab&&t.match.params.tab!=this.props.match.params.tab&&this.setState({tab:this.props.match.params.tab})}},{key:"reloadInstance",value:(s=I((function*(){this.setState({instance:null,instancePermissionSet:null});var t=yield f.Z.getInstance(this.state.instanceid);if(t.code===p.G.OK){this.setState({instance:t.payload});var e=yield d.Z.getCurrentInstancePermissionSet(this.state.instanceid);e.code===p.G.OK?this.setState({instancePermissionSet:e.payload}):this.setState((function(t){var n=new Set(t.errors);return n.add(e.error),{instancePermissionSet:null,errors:n}}))}else this.setState((function(e){var n=new Set(e.errors);return n.add(t.error),{instance:null,errors:n}}))})),function(){return s.apply(this,arguments)})},{key:"render",value:function(){var t=this;return this.state.instance&&this.state.instancePermissionSet?o.createElement(v.g.Provider,{value:Object.assign({user:this.context.user,serverInfo:this.context.serverInfo},this.state)},o.createElement(a.Z,null,o.createElement(a.Z.Header,{className:"text-center mb-2 sticky-top"},o.createElement("h3",null,o.createElement(u.Z,{id:"view.instanceedit.title",values:{instanceid:this.props.match.params.id,instancename:this.state.instance.name}})),o.createElement("h5",{className:"text-white-50"},o.createElement(u.Z,{id:"view.instanceedit.tabs.".concat(this.state.tab)}))),o.createElement(c.Z.Container,{mountOnEnter:!0,unmountOnExit:!0,id:"instanceedit",activeKey:this.state.tab},o.createElement("div",{className:"d-flex flex-row"},o.createElement(a.Z.Body,{className:"flex-grow-0"},o.createElement(i.Z,{defaultActiveKey:t.state.tab,onSelect:function(e){var n,r,o;e=null!==(n=e)&&void 0!==n?n:x.tabs[0][0],h.Mq.selectedinstanceedittab=e,t.props.history.push(null!==(r=h.$w.instanceedit.link)&&void 0!==r?r:h.$w.instanceedit.route),t.setState({tab:null!==(o=e)&&void 0!==o?o:x.tabs[0][0]})},fill:!0,variant:"pills",activeKey:t.state.tab,className:"flex-nowrap text-nowrap flex-column hover-bar sticky-top "+(m.ZP.instanceeditsidebar.value===m.mf.COLLAPSE?"pin-close":m.ZP.instanceeditsidebar.value===m.mf.EXPAND?"pin-open":""),style:{top:"8em"}},x.tabs.map((function(e){var n=Z(e,4),a=n[0],c=n[1],s=n[2],l=n[3];if(!t.state.instancePermissionSet)throw Error("this.state.instancePermissionSet is null in instanceedit nav map");var f=!l,d=!s(t.state.instancePermissionSet,t.context);return o.createElement(i.Z.Item,{key:a},o.createElement(i.Z.Link,{eventKey:a,bsPrefix:"nav-link instanceedittab",className:(f?"no-access text-white":"")+(d?"no-access text-white font-italic":"")+" text-left"},o.createElement(o.Fragment,null,o.createElement(r.G,{icon:d?"lock":c,fixedWidth:!0}),o.createElement("div",{className:"tab-text d-inline-block "+(d?"font-weight-lighter":"")},o.createElement("span",{className:"pl-1"},o.createElement(u.Z,{id:"view.instanceedit.tabs.".concat(a)}))))))})))),o.createElement(a.Z.Body,{className:"bg-body"},o.createElement(c.Z.Content,null,x.tabs.map((function(e){var n=Z(e,4),r=n[0],a=n[2],i=n[3];if(!t.state.instancePermissionSet)throw Error("this.state.instancePermissionSet is null in render card map");return o.createElement(c.Z.Pane,{eventKey:r,key:r},i?a(t.state.instancePermissionSet,t.context)?o.createElement(i,null):o.createElement(b.Z,null):o.createElement(S.Z,null))})))))))):o.createElement(E.Z,{text:"loading.instance"})}}],n&&k(e.prototype,n),x}(o.Component);D.tabs=[["info","info",function(){return!0}],["repository","code-branch",function(){return!0}],["deployment","hammer",function(){return!0}],["dd","server",function(t){return!!(t.dreamDaemonRights&K)},w.default],["byond","list-ul",function(t){return!!(t.byondRights&T)},g.default],["chatbots","comments",function(){return!0}],["files","folder-open",function(){return!0}],["users","users",function(){return!0}],["jobs","stream",function(){return!0},x.default],["config","cogs",function(){return!0},O.default]],D.contextType=y.f,e.default=(0,s.EN)(D)},56841:function(t,e,n){var r=n(51721),o=n(67294),a=n(97184),i=n(28752),c=n(75103),u=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.render=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")},e}(o.Component);u.Container=a.Z,u.Content=i.Z,u.Pane=c.Z,e.Z=u},97184:function(t,e,n){var r=n(67294),o=n(14289),a=n(24426),i=n(45017);e.Z=function(t){var e=(0,o.Ch)(t,{activeKey:"onSelect"}),n=e.id,c=e.generateChildId,u=e.onSelect,s=e.activeKey,l=e.transition,f=e.mountOnEnter,d=e.unmountOnExit,p=e.children,m=(0,r.useMemo)((function(){return c||function(t,e){return n?n+"-"+e+"-"+t:null}}),[n,c]),y=(0,r.useMemo)((function(){return{onSelect:u,activeKey:s,transition:l,mountOnEnter:f||!1,unmountOnExit:d||!1,getControlledId:function(t){return m(t,"tabpane")},getControllerId:function(t){return m(t,"tab")}}}),[u,s,l,f,d,m]);return r.createElement(a.Z.Provider,{value:y},r.createElement(i.Z.Provider,{value:u||null},p))}},28752:function(t,e,n){var r=n(87462),o=n(63366),a=n(94184),i=n.n(a),c=n(67294),u=n(76792),s=["bsPrefix","as","className"],l=c.forwardRef((function(t,e){var n=t.bsPrefix,a=t.as,l=void 0===a?"div":a,f=t.className,d=(0,o.Z)(t,s),p=(0,u.vE)(n,"tab-content");return c.createElement(l,(0,r.Z)({ref:e},d,{className:i()(f,p)}))}));e.Z=l},75103:function(t,e,n){var r=n(87462),o=n(63366),a=n(94184),i=n.n(a),c=n(67294),u=n(76792),s=n(24426),l=n(45017),f=n(41068),d=["activeKey","getControlledId","getControllerId"],p=["bsPrefix","className","active","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit","transition","as","eventKey"],m=c.forwardRef((function(t,e){var n=function(t){var e=(0,c.useContext)(s.Z);if(!e)return t;var n=e.activeKey,a=e.getControlledId,i=e.getControllerId,u=(0,o.Z)(e,d),p=!1!==t.transition&&!1!==u.transition,m=(0,l.h)(t.eventKey);return(0,r.Z)({},t,{active:null==t.active&&null!=m?(0,l.h)(n)===m:t.active,id:a(t.eventKey),"aria-labelledby":i(t.eventKey),transition:p&&(t.transition||u.transition||f.Z),mountOnEnter:null!=t.mountOnEnter?t.mountOnEnter:u.mountOnEnter,unmountOnExit:null!=t.unmountOnExit?t.unmountOnExit:u.unmountOnExit})}(t),a=n.bsPrefix,m=n.className,y=n.active,v=n.onEnter,h=n.onEntering,b=n.onEntered,E=n.onExit,S=n.onExiting,g=n.onExited,O=n.mountOnEnter,x=n.unmountOnExit,w=n.transition,P=n.as,Z=void 0===P?"div":P,j=(n.eventKey,(0,o.Z)(n,p)),C=(0,u.vE)(a,"tab-pane");if(!y&&!w&&x)return null;var I=c.createElement(Z,(0,r.Z)({},j,{ref:e,role:"tabpanel","aria-hidden":!y,className:i()(m,C,{active:y})}));return w&&(I=c.createElement(w,{in:y,onEnter:v,onEntering:h,onEntered:b,onExit:E,onExiting:S,onExited:g,mountOnEnter:O,unmountOnExit:x},I)),c.createElement(s.Z.Provider,{value:null},c.createElement(l.Z.Provider,{value:null},I))}));m.displayName="TabPane",e.Z=m}}]);
//# sourceMappingURL=711.8ea7b847ab61cd8019d7.js.map