(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[12,327],{9657:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var r=n(67814),o=n(67294),a=n(35005),s=n(32258),i=n(86828),l=n(22122),c=n(19756),u=n(94184),p=n.n(u),f=n(76792),m=n(48358),d=o.forwardRef((function(e,t){var n=e.active,r=e.disabled,a=e.className,s=e.style,i=e.activeLabel,u=e.children,f=(0,c.Z)(e,["active","disabled","className","style","activeLabel","children"]),d=n||r?"span":m.Z;return o.createElement("li",{ref:t,style:s,className:p()(a,"page-item",{active:n,disabled:r})},o.createElement(d,(0,l.Z)({className:"page-link",disabled:r},f),u,n&&i&&o.createElement("span",{className:"sr-only"},i)))}));d.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},d.displayName="PageItem";var h=d;function v(e,t,n){function r(e){var r=e.children,a=(0,c.Z)(e,["children"]);return o.createElement(d,a,o.createElement("span",{"aria-hidden":"true"},r||t),o.createElement("span",{className:"sr-only"},n))}return void 0===n&&(n=e),r.displayName=e,r}var y=v("First","«"),g=v("Prev","‹","Previous"),b=v("Ellipsis","…","More"),P=v("Next","›"),E=v("Last","»"),w=o.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,s=e.size,i=(0,c.Z)(e,["bsPrefix","className","children","size"]),u=(0,f.vE)(n,"pagination");return o.createElement("ul",(0,l.Z)({ref:t},i,{className:p()(r,u,s&&u+"-"+s)}),a)}));w.First=y,w.Prev=g,w.Ellipsis=b,w.Item=h,w.Next=P,w.Last=E;var x=w,Z=(n(55638),o.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.bsPrefix,s=e.className,i=e.children,u=(0,c.Z)(e,["as","bsPrefix","className","children"]);return a=(0,f.vE)(a,"popover-header"),o.createElement(r,(0,l.Z)({ref:t},u,{className:p()(a,s)}),i)}))),O=o.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.bsPrefix,s=e.className,i=e.children,u=(0,c.Z)(e,["as","bsPrefix","className","children"]);return a=(0,f.vE)(a,"popover-body"),o.createElement(r,(0,l.Z)({ref:t},u,{className:p()(s,a)}),i)})),N=o.forwardRef((function(e,t){var n=e.bsPrefix,r=e.placement,a=e.className,s=e.style,i=e.children,u=e.content,m=e.arrowProps,d=(e.popper,e.show,(0,c.Z)(e,["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"])),h=(0,f.vE)(n,"popover"),v=((null==r?void 0:r.split("-"))||[])[0];return o.createElement("div",(0,l.Z)({ref:t,role:"tooltip",style:s,"x-placement":v,className:p()(a,h,v&&"bs-popover-"+v)},d),o.createElement("div",(0,l.Z)({className:"arrow"},m)),u?o.createElement(O,null,i):i)}));N.defaultProps={placement:"right"},N.Title=Z,N.Content=O;var S=N,j=n(44012);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(p,e);var t,n,l,c,u=(l=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(l);if(c){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this,e)).state={showGoto:!1,gotoValue:e.currentPage},t}return t=p,(n=[{key:"render",value:function(){for(var e=this,t=[],n=Math.max(this.props.totalPages-this.props.currentPage-1,0),l=Math.max(this.props.currentPage-2,0),c=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-n,2),2),u=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-l,2),this.props.totalPages-1),p=function(n){t.push(o.createElement(x.Item,{key:n,active:n===e.props.currentPage,onClick:function(){return e.props.selectPage(n)}},n))},f=c;f<=u;f++)p(f);var m=this.props.totalPages>7?o.createElement(x.Ellipsis,{disabled:!0}):null,d=o.createElement(S,{id:"popover-gotopage"},o.createElement(S.Title,null,o.createElement(j.Z,{id:"generic.goto.title"})),o.createElement(S.Content,null,o.createElement("form",{className:"d-flex",onSubmit:function(t){t.preventDefault(),e.props.selectPage(e.state.gotoValue),e.setState({showGoto:!1})}},o.createElement(s.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:function(t){return e.setState({gotoValue:parseInt(t.target.value)})},custom:!0}),o.createElement(a.Z,{type:"submit"},o.createElement(j.Z,{id:"generic.goto"}))))),h=this.props,v=(h.selectPage,h.totalPages,h.currentPage,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(h,["selectPage","totalPages","currentPage"]));return o.createElement("div",V({className:"text-center"},v),o.createElement(x,{className:"justify-content-center"},o.createElement(x.Prev,{disabled:1===this.props.currentPage,onClick:function(){return e.props.selectPage(Math.max(e.props.currentPage-1,1))}}),o.createElement(x.Item,{active:1===this.props.currentPage,onClick:function(){return e.props.selectPage(1)}},"1"),m,t,m,this.props.totalPages>=2?o.createElement(x.Item,{active:this.props.currentPage===this.props.totalPages,onClick:function(){return e.props.selectPage(e.props.totalPages)}},this.props.totalPages):null,this.props.totalPages>7?o.createElement(i.Z,{show:this.state.showGoto,placement:"top",overlay:d},o.createElement(x.Item,{onClick:function(){return e.setState((function(e){return{showGoto:!e.showGoto}}))}},o.createElement(r.G,{icon:"search"}))):null,o.createElement(x.Next,{disabled:this.props.currentPage===this.props.totalPages,onClick:function(){return e.props.selectPage(Math.min(e.props.currentPage+1,e.props.totalPages))}})))}}])&&C(t.prototype,n),p}(o.PureComponent)},59012:function(e,t,n){"use strict";n.r(t);var r=n(67814),o=n(67294),a=n(35005),s=n(32258),i=n(94716),l=n(62318),c=n(86828),u=n(43489),p=n(44012),f=n(91201),m=n(48155),d=n(36800),h=n(38592),v=n(49896),y=n(3429),g=n(3652),b=n(43307),P=n(71739),E=n(9657);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){Z(a,r,o,s,i,"next",e)}function i(e){Z(a,r,o,s,i,"throw",e)}s(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(_,e);var t,n,v,w,Z,V,C,R=(V=_,C=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(V);if(C){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function _(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(n=R.call(this,e)).state={versions:[],errors:[],activeVersion:"",latestVersion:"",selectedVersion:"",loading:!0,page:null!==(t=y.Mq.byondlistpage)&&void 0!==t?t:1},n}return t=_,(n=[{key:"addError",value:function(e){this.setState((function(t){var n=Array.from(t.errors);return n.push(e),{errors:n}}))}},{key:"loadVersions",value:(Z=O((function*(){var e=yield f.Z.listAllVersions(this.context.instance.id,{page:this.state.page});if(e.code===h.G.OK){if(this.state.page>e.payload.totalPages)return void this.setState({page:e.payload.totalPages});this.setState({versions:e.payload.content,maxPage:e.payload.totalPages});var t=yield f.Z.getActiveVersion(this.context.instance.id);t.code===h.G.OK?this.setState({activeVersion:t.payload.version}):this.addError(t.error)}else this.addError(e.error)})),function(){return Z.apply(this,arguments)})},{key:"componentDidUpdate",value:(w=O((function*(e,t){t.page!==this.state.page&&(y.Mq.byondlistpage=this.state.page,yield this.loadVersions())})),function(e,t){return w.apply(this,arguments)})},{key:"componentDidMount",value:(v=O((function*(){var e=this;yield this.loadVersions(),fetch("https://secure.byond.com/download/version.txt").then((function(e){return e.text()})).then((function(e){return e.split("\n")})).then((function(e){return e[0]})).then((function(t){e.setState({latestVersion:t,selectedVersion:t,loading:!1})})).catch((function(t){e.addError(new d.ZP(d.jK.APP_FAIL,{jsError:Error(t)})),e.setState({loading:!1})}))})),function(){return v.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return this.state.loading?o.createElement(P.Z,{text:"loading.instance"}):this.context.instancePermissionSet.byondRights&m.D8.ListInstalled&&this.context.instancePermissionSet.byondRights&m.D8.ReadActive?o.createElement("div",{className:"text-center"},o.createElement("h1",null,o.createElement(p.Z,{id:"view.instance.hosting.byond"})),this.state.errors.map((function(e,n){if(e)return o.createElement(b.Z,{key:n,error:e,onClose:function(){return t.setState((function(e){var t=Array.from(e.errors);return t[n]=void 0,{errors:t}}))}})})),o.createElement("div",{onChange:function(){var e=O((function*(e){t.setState({loading:!0});var n=yield f.Z.switchActive(t.context.instance.id,e.target.value);n.code===h.G.OK?yield t.loadVersions():t.addError(n.error),t.setState({loading:!1})}));return function(t){return e.apply(this,arguments)}}()},this.state.versions.map((function(e){return o.createElement(l.Z,{className:"w-md-25 mb-1 mx-auto d-flex",key:e.version},o.createElement(l.Z.Prepend,null,o.createElement(l.Z.Radio,{disabled:!(t.context.instancePermissionSet.byondRights&m.D8.InstallOfficialOrChangeActiveVersion),name:"byond",id:e.version,value:e.version,defaultChecked:e.version===t.state.activeVersion})),o.createElement(l.Z.Append,{className:"flex-grow-1 m-0",as:"label",htmlFor:e.version},o.createElement(c.Z,{overlay:(n="view.instance.hosting.byond.custom",o.createElement(u.Z,{id:n},o.createElement(p.Z,{id:n}))),show:!e.version.endsWith(".0")&&void 0},(function(t){var n=t.ref,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["ref"]);return o.createElement(l.Z.Text,x({className:"w-100"},a),e.version.endsWith(".0")?e.version.substr(0,e.version.length-2):e.version,e.version.endsWith(".0")?null:o.createElement("div",{className:"ml-auto",ref:n},o.createElement(r.G,{fixedWidth:!0,icon:"info"})))}))));var n}))),o.createElement(E.Z,{className:"mt-4",selectPage:function(e){return t.setState({page:e})},totalPages:null!==(e=this.state.maxPage)&&void 0!==e?e:1,currentPage:this.state.page}),o.createElement("hr",null),o.createElement("h4",null,o.createElement(p.Z,{id:"view.instance.hosting.byond.add"})),o.createElement(l.Z,{className:"w-md-50 w-lg-25 mb-3 mx-auto"},o.createElement(i.Z,{type:"number",defaultValue:this.state.latestVersion.split(".")[0],onChange:function(e){t.setState((function(t){var n=t.selectedVersion.split(".");return n[0]=e.target.value,{selectedVersion:n.join(".")}}))}}),o.createElement(l.Z.Text,{className:"rounded-0"},"."),o.createElement(i.Z,{type:"number",defaultValue:this.state.latestVersion.split(".")[1],onChange:function(e){t.setState((function(t){var n=t.selectedVersion.split(".");return n[1]=e.target.value,{selectedVersion:n.join(".")}}))}}),o.createElement(l.Z.Append,null,o.createElement(a.Z,{variant:"success",onClick:O((function*(){t.setState({loading:!0});var e=yield f.Z.switchActive(t.context.instance.id,t.state.selectedVersion,t.state.customFile?yield t.state.customFile.arrayBuffer():void 0);e.code===h.G.ERROR?t.addError(e.error):(t.setState({customFile:null}),yield t.loadVersions()),t.setState({loading:!1})}))},o.createElement(r.G,{icon:"plus"})))),o.createElement(s.Z,null,o.createElement(s.Z.File,{custom:!0,id:"test",className:"w-md-50 w-lg-25 text-left",label:this.state.customFile?this.state.customFile.name:o.createElement(p.Z,{id:"view.instance.hosting.byond.upload"}),accept:".zip",onChange:function(e){t.setState({customFile:e.target.files?e.target.files[0]:null})}}))):o.createElement(g.Z,null)}}])&&N(t.prototype,n),_}(o.Component);V.contextType=v.g,t.default=V},49896:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=n(67294).createContext(void 0)},62318:function(e,t,n){"use strict";var r=n(19756),o=n(22122),a=n(94184),s=n.n(a),i=n(67294),l=n(44680),c=n(76792),u=(0,l.Z)("input-group-append"),p=(0,l.Z)("input-group-prepend"),f=(0,l.Z)("input-group-text",{Component:"span"}),m=i.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,l=e.className,u=e.as,p=void 0===u?"div":u,f=(0,r.Z)(e,["bsPrefix","size","className","as"]);return n=(0,c.vE)(n,"input-group"),i.createElement(p,(0,o.Z)({ref:t},f,{className:s()(l,n,a&&n+"-"+a)}))}));m.displayName="InputGroup";var d=(0,o.Z)({},m,{Text:f,Radio:function(e){return i.createElement(f,null,i.createElement("input",(0,o.Z)({type:"radio"},e)))},Checkbox:function(e){return i.createElement(f,null,i.createElement("input",(0,o.Z)({type:"checkbox"},e)))},Append:u,Prepend:p});t.Z=d}}]);
//# sourceMappingURL=12.d75f559f7e26ead70f90.js.map