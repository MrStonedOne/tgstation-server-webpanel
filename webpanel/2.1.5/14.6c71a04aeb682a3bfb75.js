(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{345:function(e,t,n){"use strict";n.r(t);var a=n(697),r=n(696),o=n(64),i=n(0),s=n.n(i),c=n(37),l=n(117),u=n(72),d=n(17),f=n(715),m=n(10),h=n(3),p=n(9),y=n(121),v=n(34),b=n(14),E=n(63),w=n(54);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){g(o,a,r,i,s,"next",e)}function s(e){g(o,a,r,i,s,"throw",e)}i(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(j,e);var t,n,i,d,y,R,g,I=x(j);function j(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,j),(t=I.call(this,e)).restart=t.restart.bind(_(t)),t.state={busy:!1},t}return t=j,(n=[{key:"componentDidMount",value:(g=S((function*(){this.setState({busy:!0});var e=[];console.time("DataLoad"),e.push(this.loadAdminInfo()),e.push(this.loadServerInfo()),yield Promise.all(e),console.timeEnd("DataLoad"),this.setState({busy:!1})})),function(){return g.apply(this,arguments)})},{key:"loadServerInfo",value:(R=S((function*(){console.time("ServerLoad");var e=yield p.a.getServerInfo();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:this.setState({serverInfo:e.payload})}console.timeEnd("ServerLoad")})),function(){return R.apply(this,arguments)})},{key:"loadAdminInfo",value:(y=S((function*(){console.time("AdminLoad");var e=yield f.a.getAdminInfo();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:this.setState({adminInfo:e.payload})}console.timeEnd("AdminLoad")})),function(){return y.apply(this,arguments)})},{key:"restart",value:(d=S((function*(){this.setState({showRebootModal:!1,busy:!0}),console.time("Reboot");var e=yield f.a.restartServer();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:window.location.reload()}this.setState({busy:!1}),console.timeEnd("Reboot")})),function(){return d.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.state.busy)return s.a.createElement(w.a,{text:"loading.admin"});if(this.context.loading)return s.a.createElement(w.a,{text:"loading.user.load"});var t=function(){return e.setState({showRebootModal:!1})},n=!!(Object(v.d)(this.context.user).administrationRights&m.a.RestartHost),i=!!(Object(v.d)(this.context.user).administrationRights&m.a.ChangeVersion),d=!!(Object(v.d)(this.context.user).administrationRights&m.a.DownloadLogs);return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{error:this.state.error,onClose:function(){return e.setState({error:void 0})}}),this.state.adminInfo&&this.state.serverInfo?s.a.createElement("div",{className:"text-center"},s.a.createElement("h3",{className:" text-secondary"},s.a.createElement(u.a,{id:"view.admin.hostos"}),s.a.createElement(o.a,{fixedWidth:!0,icon:this.state.serverInfo.windowsHost?r.faWindows:a.faLinux})),s.a.createElement("h5",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.remote"}),s.a.createElement("a",{href:this.state.adminInfo.trackedRepositoryUrl},this.state.adminInfo.trackedRepositoryUrl)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.current"}),s.a.createElement("span",{className:this.state.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.state.serverInfo.version)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.latest"}),s.a.createElement("span",{className:this.state.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.state.adminInfo.latestVersion)),s.a.createElement("hr",null),s.a.createElement(c.a,{className:"mr-2",variant:"danger",disabled:!n,onClick:function(){return e.setState({showRebootModal:!0})}},s.a.createElement(u.a,{id:"view.admin.reboot.button"})),s.a.createElement(c.a,{className:"mr-2",variant:"primary",disabled:!i,onClick:function(){e.props.history.push(b.b.admin_update.link||b.b.admin_update.route)}},s.a.createElement(u.a,{id:"view.admin.update.button"})),s.a.createElement(c.a,{variant:"primary",disabled:!d,onClick:function(){e.props.history.push(b.b.admin_logs.link||b.b.admin_logs.route)}},s.a.createElement(u.a,{id:"view.admin.logs.button"})),s.a.createElement(l.a,{show:this.state.showRebootModal,onHide:t,size:"lg",centered:!0},s.a.createElement(l.a.Header,{closeButton:!0},s.a.createElement(l.a.Title,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.title"}))),s.a.createElement(l.a.Body,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.body"})),s.a.createElement(l.a.Footer,null,s.a.createElement(c.a,{onClick:t},s.a.createElement(u.a,{id:"generic.close"})),s.a.createElement(c.a,{variant:"danger",onClick:this.restart},s.a.createElement(u.a,{id:"view.admin.reboot.button"}))))):"")}}])&&O(t.prototype,n),i&&O(t,i),j}(s.a.Component);C.contextType=y.a,t.default=Object(d.f)(C)}}]);
//# sourceMappingURL=14.6c71a04aeb682a3bfb75.js.map