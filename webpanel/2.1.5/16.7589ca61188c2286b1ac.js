(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{358:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(37),i=n(139),c=n(77),s=n(697),l=n(75),u=n(13),f=n(189),m=n(2),p=n(65),h=n(19),d=n(54),v=n(48);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(g,e);var t,n,r,u,p,y=x(g);function g(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(r=y.call(this,e)).state={loading:!1,errors:[],prefix:null!==(n=t.serverInfo.validInstancePaths)&&void 0!==n&&n.length?t.serverInfo.validInstancePaths[0]:void 0},r.submit=r.submit.bind(P(r)),r}return t=g,(n=[{key:"addError",value:function(e){this.setState((function(t){var n=Array.from(t.errors);return n.push(e),{errors:n}}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return a.a.createElement(v.a,{text:"view.instance.create.loading"});var t=this.context.serverInfo.validInstancePaths;return a.a.createElement("div",{className:"text-center"},this.state.errors.map((function(t,n){if(t)return a.a.createElement(d.a,{key:n,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.errors);return t[n]=void 0,{errors:t}}))}})})),a.a.createElement("h3",null,a.a.createElement(l.a,{id:"view.instance.create.title"})),a.a.createElement(c.a,{onSubmit:this.submit},a.a.createElement(i.a,{className:"mx-auto",lg:5,md:8},a.a.createElement(c.a.Group,{controlId:"name"},a.a.createElement(c.a.Label,null,a.a.createElement("h5",null,a.a.createElement(l.a,{id:"view.instance.create.name"}))),a.a.createElement(c.a.Control,{type:"text",onChange:function(t){var n=t.target.value;e.setState({instanceName:n})},value:this.state.instanceName,required:!0})),a.a.createElement(c.a.Group,{controlId:"path"},a.a.createElement(c.a.Label,null,a.a.createElement("h5",null,a.a.createElement(l.a,{id:"view.instance.create.path"}))),a.a.createElement(s.a,{className:"mb-1"},null!=t?a.a.createElement(s.a.Prepend,{className:"flex-grow-1 flex-grow-md-0"},a.a.createElement(s.a.Text,null,a.a.createElement("span",null,a.a.createElement(l.a,{id:"view.instance.create.path.prefix"}))),a.a.createElement(c.a.Control,{className:"rounded-0 flex-grow-1 flex-grow-md-0 flex-shrink-0 flex-shrink-md-1 w-auto",as:"select",custom:!0,required:!0,onChange:function(t){e.setState({prefix:t.target.value})}},t.map((function(t){return a.a.createElement("option",{key:t,value:t,selected:e.state.prefix==t},t,"/")})))):null,a.a.createElement(c.a.Control,{type:"text",className:"flex-grow-1 w-100 w-md-auto",required:!0,onChange:function(t){var n=t.target.value;e.setState({instancePath:n})},value:this.state.instancePath}))),a.a.createElement(o.a,{type:"submit",variant:"success"},a.a.createElement(l.a,{id:"view.instance.create.submit"})))))}},{key:"submit",value:(u=function*(){if(this.state.instancePath){var e=(this.state.prefix?this.state.prefix+"/":"")+this.state.instancePath;this.setState({loading:!0});var t=yield f.a.createInstance({name:this.state.instanceName,path:e});if(t.code===m.a.ERROR)return this.setState({loading:!1}),void this.addError(t.error);h.c.selectedinstanceid=t.payload.id,this.props.history.push(h.b.instancelist.link||h.b.instancelist.route)}},p=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=u.apply(e,t);function o(e){b(a,n,r,o,i,"next",e)}function i(e){b(a,n,r,o,i,"throw",e)}o(void 0)}))},function(){return p.apply(this,arguments)})}])&&E(t.prototype,n),r&&E(t,r),g}(a.a.Component);O.contextType=p.a,t.default=Object(u.f)(O)}}]);
//# sourceMappingURL=16.7589ca61188c2286b1ac.js.map