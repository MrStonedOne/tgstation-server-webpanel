(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{354:function(e,t,n){"use strict";n.r(t);var a=n(702),o=n(701),r=n(77),i=n(0),s=n.n(i),c=n(37),l=n(121),u=n(76),d=n(13),m=n(722),f=n(10),h=n(2),p=n(67),y=n(34),b=n(19),v=n(54),E=n(48);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){R(r,a,o,i,s,"next",e)}function s(e){R(r,a,o,i,s,"throw",e)}i(void 0)}))}}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(S,e);var t,n,i,d,p,w,R=k(S);function S(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(t=R.call(this,e)).restart=t.restart.bind(I(t)),t.state={busy:!1},t}return t=S,(n=[{key:"componentDidMount",value:(w=g((function*(){this.setState({busy:!0});var e=[];console.time("DataLoad"),e.push(this.loadAdminInfo()),yield Promise.all(e),console.timeEnd("DataLoad"),this.setState({busy:!1})})),function(){return w.apply(this,arguments)})},{key:"loadAdminInfo",value:(p=g((function*(){console.time("AdminLoad");var e=yield m.a.getAdminInfo();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:this.setState({adminInfo:e.payload})}console.timeEnd("AdminLoad")})),function(){return p.apply(this,arguments)})},{key:"restart",value:(d=g((function*(){this.setState({showRebootModal:!1,busy:!0}),console.time("Reboot");var e=yield m.a.restartServer();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:window.location.reload()}this.setState({busy:!1}),console.timeEnd("Reboot")})),function(){return d.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.state.busy)return s.a.createElement(E.a,{text:"loading.admin"});var t=function(){return e.setState({showRebootModal:!1})},n=!!(Object(y.d)(this.context.user).administrationRights&f.a.RestartHost),i=!!(Object(y.d)(this.context.user).administrationRights&f.a.ChangeVersion),d=!!(Object(y.d)(this.context.user).administrationRights&f.a.DownloadLogs);return s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{error:this.state.error,onClose:function(){return e.setState({error:void 0})}}),this.state.adminInfo?s.a.createElement("div",{className:"text-center"},s.a.createElement("h3",{className:" text-secondary"},s.a.createElement(u.a,{id:"view.admin.hostos"}),s.a.createElement(r.a,{fixedWidth:!0,icon:this.context.serverInfo.windowsHost?o.faWindows:a.faLinux})),s.a.createElement("h5",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.remote"}),s.a.createElement("a",{href:this.state.adminInfo.trackedRepositoryUrl},this.state.adminInfo.trackedRepositoryUrl)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.current"}),s.a.createElement("span",{className:this.context.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.context.serverInfo.version)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.latest"}),s.a.createElement("span",{className:this.context.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.state.adminInfo.latestVersion)),s.a.createElement("hr",null),s.a.createElement(c.a,{className:"mr-2",variant:"danger",disabled:!n,onClick:function(){return e.setState({showRebootModal:!0})}},s.a.createElement(u.a,{id:"view.admin.reboot.button"})),s.a.createElement(c.a,{className:"mr-2",variant:"primary",disabled:!i,onClick:function(){e.props.history.push(b.b.admin_update.link||b.b.admin_update.route)}},s.a.createElement(u.a,{id:"view.admin.update.button"})),s.a.createElement(c.a,{variant:"primary",disabled:!d,onClick:function(){e.props.history.push(b.b.admin_logs.link||b.b.admin_logs.route)}},s.a.createElement(u.a,{id:"view.admin.logs.button"})),s.a.createElement(l.a,{show:this.state.showRebootModal,onHide:t,size:"lg",centered:!0},s.a.createElement(l.a.Header,{closeButton:!0},s.a.createElement(l.a.Title,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.title"}))),s.a.createElement(l.a.Body,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.body"})),s.a.createElement(l.a.Footer,null,s.a.createElement(c.a,{onClick:t},s.a.createElement(u.a,{id:"generic.close"})),s.a.createElement(c.a,{variant:"danger",onClick:this.restart},s.a.createElement(u.a,{id:"view.admin.reboot.button"}))))):"")}}])&&x(t.prototype,n),i&&x(t,i),S}(s.a.Component);j.contextType=p.a,t.default=Object(d.f)(j)}}]);
//# sourceMappingURL=11.f7c9325613eb0795e676.js.map