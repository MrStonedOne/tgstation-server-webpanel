(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{344:function(e,t,a){"use strict";a.r(t);var n=a(696),r=a(695),o=a(56),i=a(0),s=a.n(i),c=a(37),l=a(117),u=a(71),d=a(17),f=a(714),m=a(10),h=a(3),p=a(9),y=a(46),v=a(34),b=a(13),E=a(72),w=a(55);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,a,n,r,o,i){try{var s=e[o](i),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function k(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){R(o,n,r,i,s,"next",e)}function s(e){R(o,n,r,i,s,"throw",e)}i(void 0)}))}}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C(e);if(t){var r=C(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return x(this,a)}}function x(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.default=Object(d.f)(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(N,e);var t,a,i,d,g,R,x,C,_,j,U=I(N);function N(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,N),(t=U.call(this,e)).restart=t.restart.bind(L(t)),t.state={busy:!1,canReboot:!1,canUpdate:!1,canLogs:!1},t}return t=N,(a=[{key:"componentDidMount",value:(j=k((function*(){this.setState({busy:!0});var e=[];console.time("DataLoad"),e.push(this.loadAdminInfo()),e.push(this.loadServerInfo()),e.push(this.checkRebootRights()),e.push(this.checkUpdateRights()),e.push(this.checkLogsRights()),yield Promise.all(e),console.timeEnd("DataLoad"),this.setState({busy:!1})})),function(){return j.apply(this,arguments)})},{key:"loadServerInfo",value:(_=k((function*(){console.time("ServerLoad");var e=yield p.a.getServerInfo();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:this.setState({serverInfo:e.payload})}console.timeEnd("ServerLoad")})),function(){return _.apply(this,arguments)})},{key:"loadAdminInfo",value:(C=k((function*(){console.time("AdminLoad");var e=yield f.a.getAdminInfo();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:this.setState({adminInfo:e.payload})}console.timeEnd("AdminLoad")})),function(){return C.apply(this,arguments)})},{key:"checkRebootRights",value:(x=k((function*(){var e=yield y.a.getCurrentUser();e.code===h.a.OK&&this.setState({canReboot:!!(Object(v.d)(e.payload).administrationRights&m.a.RestartHost)})})),function(){return x.apply(this,arguments)})},{key:"checkUpdateRights",value:(R=k((function*(){var e=yield y.a.getCurrentUser();e.code===h.a.OK&&this.setState({canUpdate:!!(Object(v.d)(e.payload).administrationRights&m.a.ChangeVersion)})})),function(){return R.apply(this,arguments)})},{key:"checkLogsRights",value:(g=k((function*(){var e=yield y.a.getCurrentUser();e.code===h.a.OK&&this.setState({canLogs:!!(Object(v.d)(e.payload).administrationRights&m.a.DownloadLogs)})})),function(){return g.apply(this,arguments)})},{key:"restart",value:(d=k((function*(){this.setState({showRebootModal:!1,busy:!0}),console.time("Reboot");var e=yield f.a.restartServer();switch(e.code){case h.a.ERROR:this.setState({error:e.error});break;case h.a.OK:window.location.reload()}this.setState({busy:!1}),console.timeEnd("Reboot")})),function(){return d.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.state.busy)return s.a.createElement(w.a,{text:"loading.admin"});var t=function(){return e.setState({showRebootModal:!1})};return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{error:this.state.error,onClose:function(){return e.setState({error:void 0})}}),this.state.adminInfo&&this.state.serverInfo?s.a.createElement("div",{className:"text-center"},s.a.createElement("h3",{className:" text-secondary"},s.a.createElement(u.a,{id:"view.admin.hostos"}),s.a.createElement(o.a,{fixedWidth:!0,icon:this.state.serverInfo.windowsHost?r.faWindows:n.faLinux})),s.a.createElement("h5",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.remote"}),s.a.createElement("a",{href:this.state.adminInfo.trackedRepositoryUrl},this.state.adminInfo.trackedRepositoryUrl)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.current"}),s.a.createElement("span",{className:this.state.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.state.serverInfo.version)),s.a.createElement("h3",{className:"text-secondary"},s.a.createElement(u.a,{id:"view.admin.version.latest"}),s.a.createElement("span",{className:this.state.serverInfo.version<this.state.adminInfo.latestVersion?"text-danger":""},this.state.adminInfo.latestVersion)),s.a.createElement("hr",null),s.a.createElement(c.a,{className:"mr-2",variant:"danger",disabled:!this.state.canReboot,onClick:function(){return e.setState({showRebootModal:!0})}},s.a.createElement(u.a,{id:"view.admin.reboot.button"})),s.a.createElement(c.a,{className:"mr-2",variant:"primary",disabled:!this.state.canUpdate,onClick:function(){e.props.history.push(b.b.admin_update.link||b.b.admin_update.route)}},s.a.createElement(u.a,{id:"view.admin.update.button"})),s.a.createElement(c.a,{variant:"primary",disabled:!this.state.canLogs,onClick:function(){e.props.history.push(b.b.admin_logs.link||b.b.admin_logs.route)}},s.a.createElement(u.a,{id:"view.admin.logs.button"})),s.a.createElement(l.a,{show:this.state.showRebootModal,onHide:t,size:"lg",centered:!0},s.a.createElement(l.a.Header,{closeButton:!0},s.a.createElement(l.a.Title,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.title"}))),s.a.createElement(l.a.Body,null,s.a.createElement(u.a,{id:"view.admin.reboot.modal.body"})),s.a.createElement(l.a.Footer,null,s.a.createElement(c.a,{onClick:t},s.a.createElement(u.a,{id:"generic.close"})),s.a.createElement(c.a,{variant:"danger",onClick:this.restart},s.a.createElement(u.a,{id:"view.admin.reboot.button"}))))):"")}}])&&S(t.prototype,a),i&&S(t,i),N}(s.a.Component))}}]);
//# sourceMappingURL=14.165a7a0f459053467071.js.map