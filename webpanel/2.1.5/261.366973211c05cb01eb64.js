(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[261],{30261:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var r=n(40098),a=n(67814),o=n(67294),i=n(27977),s=n(35005),c=n(86828),l=n(75147),u=n(43489),f=n(44012),p=n(41153),m=n(48155),d=n(15402),h=n(60083),v=n(36800),y=n(38592),g=n(32826),b=n(42540),E=n(3429),P=n(43307),w=n(71739),Z=n(32258),N=n(22122),x=n(19756),O=n(94184),S=n.n(O),k=n(76792),j=n(48358),C=o.forwardRef((function(e,t){var n=e.active,r=e.disabled,a=e.className,i=e.style,s=e.activeLabel,c=e.children,l=(0,x.Z)(e,["active","disabled","className","style","activeLabel","children"]),u=n||r?"span":j.Z;return o.createElement("li",{ref:t,style:i,className:S()(a,"page-item",{active:n,disabled:r})},o.createElement(u,(0,N.Z)({className:"page-link",disabled:r},l),c,n&&s&&o.createElement("span",{className:"sr-only"},s)))}));C.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},C.displayName="PageItem";var _=C;function I(e,t,n){function r(e){var r=e.children,a=(0,x.Z)(e,["children"]);return o.createElement(C,a,o.createElement("span",{"aria-hidden":"true"},r||t),o.createElement("span",{className:"sr-only"},n))}return void 0===n&&(n=e),r.displayName=e,r}var R=I("First","«"),A=I("Prev","‹","Previous"),M=I("Ellipsis","…","More"),T=I("Next","›"),G=I("Last","»"),$=o.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,i=e.size,s=(0,x.Z)(e,["bsPrefix","className","children","size"]),c=(0,k.vE)(n,"pagination");return o.createElement("ul",(0,N.Z)({ref:t},s,{className:S()(r,c,i&&c+"-"+i)}),a)}));$.First=R,$.Prev=A,$.Ellipsis=M,$.Item=_,$.Next=T,$.Last=G;var B=$,D=(n(55638),o.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.bsPrefix,i=e.className,s=e.children,c=(0,x.Z)(e,["as","bsPrefix","className","children"]);return a=(0,k.vE)(a,"popover-header"),o.createElement(r,(0,N.Z)({ref:t},c,{className:S()(a,i)}),s)}))),L=o.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.bsPrefix,i=e.className,s=e.children,c=(0,x.Z)(e,["as","bsPrefix","className","children"]);return a=(0,k.vE)(a,"popover-body"),o.createElement(r,(0,N.Z)({ref:t},c,{className:S()(i,a)}),s)})),z=o.forwardRef((function(e,t){var n=e.bsPrefix,r=e.placement,a=e.className,i=e.style,s=e.children,c=e.content,l=e.arrowProps,u=(e.popper,e.show,(0,x.Z)(e,["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"])),f=(0,k.vE)(n,"popover"),p=((null==r?void 0:r.split("-"))||[])[0];return o.createElement("div",(0,N.Z)({ref:t,role:"tooltip",style:i,"x-placement":p,className:S()(a,f,p&&"bs-popover-"+p)},u),o.createElement("div",(0,N.Z)({className:"arrow"},l)),c?o.createElement(L,null,s):s)}));z.defaultProps={placement:"right"},z.Title=D,z.Content=L;var K=z;function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(r);if(i){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={showGoto:!1,gotoValue:e.currentPage},t}return t=u,(n=[{key:"render",value:function(){for(var e=this,t=[],n=Math.max(this.props.totalPages-this.props.currentPage-1,0),r=Math.max(this.props.currentPage-2,0),i=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-n,2),2),l=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-r,2),this.props.totalPages-1),u=function(n){t.push(o.createElement(B.Item,{active:n===e.props.currentPage,onClick:function(){return e.props.selectPage(n)}},n))},p=i;p<=l;p++)u(p);var m=this.props.totalPages>7?o.createElement(B.Ellipsis,{disabled:!0}):null,d=o.createElement(K,{id:"popover-gotopage"},o.createElement(K.Title,null,o.createElement(f.Z,{id:"generic.goto.title"})),o.createElement(K.Content,null,o.createElement("form",{className:"d-flex",onSubmit:function(t){t.preventDefault(),e.props.selectPage(e.state.gotoValue),e.setState({showGoto:!1})}},o.createElement(Z.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:function(t){return e.setState({gotoValue:parseInt(t.target.value)})},custom:!0}),o.createElement(s.Z,{type:"submit"},o.createElement(f.Z,{id:"generic.goto"})))));return o.createElement("div",{className:"text-center"},o.createElement(B,{className:"justify-content-center"},o.createElement(B.Prev,{disabled:1===this.props.currentPage,onClick:function(){return e.props.selectPage(Math.max(e.props.currentPage-1,1))}}),o.createElement(B.Item,{active:1===this.props.currentPage,onClick:function(){return e.props.selectPage(1)}},"1"),m,t,m,this.props.totalPages>=2?o.createElement(B.Item,{active:this.props.currentPage===this.props.totalPages,onClick:function(){return e.props.selectPage(e.props.totalPages)}},this.props.totalPages):null,this.props.totalPages>7?o.createElement(c.Z,{show:this.state.showGoto,placement:"top",overlay:d},o.createElement(B.Item,{onClick:function(){return e.setState((function(e){return{showGoto:!e.showGoto}}))}},o.createElement(a.G,{icon:"search"}))):null,o.createElement(B.Next,{disabled:this.props.currentPage===this.props.totalPages,onClick:function(){return e.props.selectPage(Math.min(e.props.currentPage+1,e.props.totalPages))}})))}}])&&q(t.prototype,n),u}(o.PureComponent);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,s,"next",e)}function s(e){Y(o,r,a,i,s,"throw",e)}i(void 0)}))}}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(k,e);var t,n,p,g,Z,N,x,O,S=(x=k,O=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(x);if(O){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return re(this,e)});function k(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),(t=S.call(this,e)).setOnline=t.setOnline.bind(ae(t)),t.state={loading:!0,instances:[],errors:[],page:E.Mq.instancelistpage||1},t}return t=k,(n=[{key:"addError",value:function(e){this.setState((function(t){var n=Array.from(t.errors);return n.push(e),{errors:n}}))}},{key:"componentDidUpdate",value:(N=ee((function*(e,t){t.page!==this.state.page&&(E.Mq.instancelistpage=this.state.page,yield this.loadInstances())})),function(e,t){return N.apply(this,arguments)})},{key:"loadInstances",value:(Z=ee((function*(){var e=this;this.setState({loading:!0});var t=yield d.Z.listInstances({page:this.state.page}),n=[];if(t.code==y.G.OK){if(t.payload.totalPages<this.state.page)return void this.setState({page:1});var r,a=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(t.payload.content);try{var i=function(){var t=r.value,o=t;t.online?a.push(h.Z.getCurrentInstancePermissionSet(t.id).then((function(t){t.code==y.G.OK?o.canAccess=!0:(o.canAccess=!1,t.error.code!==v.jK.HTTP_ACCESS_DENIED&&e.addError(t.error)),n.push(o)}))):(o.canAccess=!1,n.push(o))};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}yield Promise.all(a),this.setState({instances:n.sort((function(e,t){return e.id-t.id})),maxPage:t.payload.totalPages})}else this.addError(t.error);this.setState({loading:!1})})),function(){return Z.apply(this,arguments)})},{key:"componentDidMount",value:(g=ee((function*(){yield this.loadInstances()})),function(){return g.apply(this,arguments)})},{key:"setOnline",value:(p=ee((function*(e){var t=!e.online,n=yield d.Z.editInstance({id:e.id,online:t});n.code===y.G.OK?yield this.loadInstances():this.addError(n.error)})),function(e){return p.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.state.loading)return o.createElement(w.Z,{text:"loading.instance.list"});var t=!!((0,b.Zg)(this.context.user).instanceManagerRights&m.c2.SetOnline),n={verticalAlign:"middle"};return o.createElement("div",{className:"text-center"},this.state.errors.map((function(t,n){if(t)return o.createElement(P.Z,{key:n,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.errors);return t[n]=void 0,{errors:t}}))}})})),o.createElement("h3",null,o.createElement(f.Z,{id:"view.instance.list.title"})),o.createElement(l.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:!0,className:"mb-4"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"#"),o.createElement("th",null,o.createElement(f.Z,{id:"generic.name"})),o.createElement("th",null,o.createElement(f.Z,{id:"generic.online"})),o.createElement("th",null,o.createElement(f.Z,{id:"generic.path"})),o.createElement("th",null,o.createElement(f.Z,{id:"generic.configmode"})),o.createElement("th",null,o.createElement(f.Z,{id:"generic.action"})))),o.createElement("tbody",null,this.state.instances.map((function(r){return o.createElement("tr",{key:r.id},o.createElement("td",{style:n},r.id),o.createElement("td",{style:n},r.name),o.createElement("td",{style:n},r.online?o.createElement(i.Z,{variant:"success"},o.createElement(f.Z,{id:"generic.online"})):o.createElement(i.Z,{variant:"danger"},o.createElement(f.Z,{id:"generic.offline"}))),o.createElement("td",{style:n},r.moveJob?o.createElement(f.Z,{id:"view.instance.moving"}):r.path),o.createElement("td",{style:n},o.createElement(f.Z,{id:"view.instance.configmode.".concat(r.configurationType.toString())})),o.createElement("td",{className:"align-middle p-1",style:n},o.createElement(s.Z,{className:"mx-1",onClick:function(){E.Mq.selectedinstanceid=r.id,e.props.history.push(E.$w.instanceedit.link||E.$w.instanceedit.route)},disabled:!r.canAccess},o.createElement(f.Z,{id:"generic.edit"})),o.createElement(s.Z,{className:"mx-1",variant:r.online?"danger":"success",onClick:function(){return e.setOnline(r)},disabled:!t},o.createElement(f.Z,{id:"view.instance.list.set.".concat(r.online?"offline":"online")}))))})))),o.createElement(J,{selectPage:function(t){return e.setState({page:t})},totalPages:this.state.maxPage||1,currentPage:this.state.page}),o.createElement("div",{className:"align-middle"},o.createElement("div",{className:"mb-4"},this.renderAddInstance()),o.createElement(s.Z,{className:"mx-1",onClick:function(){e.props.history.push(E.$w.instancejobs.link||E.$w.instancejobs.route)}},o.createElement(f.Z,{id:"routes.instancejobs"}))))}},{key:"renderAddInstance",value:function(){var e=this,t=!!((0,b.Zg)(this.context.user).instanceManagerRights&m.c2.Create);return o.createElement(c.Z,{overlay:o.createElement(u.Z,{id:"create-instance-tooltip"},o.createElement(f.Z,{id:"perms.instance.create.warning"})),show:!t&&void 0},(function(n){var i=n.ref,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,["ref"]);return o.createElement(s.Z,W({ref:i,className:"mx-1",variant:"success",onClick:function(){e.props.history.push(E.$w.instancecreate.link||E.$w.instancecreate.route)},disabled:!t},c),o.createElement("div",null,o.createElement(a.G,{className:"mr-2",icon:r.r8}),o.createElement(f.Z,{id:"routes.instancecreate"})))}))}}])&&te(t.prototype,n),k}(o.Component);ie.contextType=g.f;var se=(0,p.EN)(ie)},27977:function(e,t,n){"use strict";var r=n(22122),a=n(19756),o=n(94184),i=n.n(o),s=n(67294),c=n(76792),l=s.forwardRef((function(e,t){var n=e.bsPrefix,o=e.variant,l=e.pill,u=e.className,f=e.as,p=void 0===f?"span":f,m=(0,a.Z)(e,["bsPrefix","variant","pill","className","as"]),d=(0,c.vE)(n,"badge");return s.createElement(p,(0,r.Z)({ref:t},m,{className:i()(u,d,l&&d+"-pill",o&&d+"-"+o)}))}));l.displayName="Badge",l.defaultProps={pill:!1},t.Z=l},75147:function(e,t,n){"use strict";var r=n(22122),a=n(19756),o=n(94184),i=n.n(o),s=n(67294),c=n(76792),l=s.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,l=e.striped,u=e.bordered,f=e.borderless,p=e.hover,m=e.size,d=e.variant,h=e.responsive,v=(0,a.Z)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),y=(0,c.vE)(n,"table"),g=i()(o,y,d&&y+"-"+d,m&&y+"-"+m,l&&y+"-striped",u&&y+"-bordered",f&&y+"-borderless",p&&y+"-hover"),b=s.createElement("table",(0,r.Z)({},v,{className:g,ref:t}));if(h){var E=y+"-responsive";return"string"==typeof h&&(E=E+"-"+h),s.createElement("div",{className:E},b)}return b}));t.Z=l}}]);
//# sourceMappingURL=261.366973211c05cb01eb64.js.map