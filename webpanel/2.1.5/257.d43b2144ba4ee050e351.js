(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[257],{57257:function(e,t,r){"use strict";r.r(t);var n=r(67294),s=r(35005),o=r(31555),a=r(32258),i=r(44012),u=r(41153),c=r(38592),l=r(69644),p=r(32826),f=r(3429),h=r(43307),m=r(71739);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n,s,o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,s)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){y(o,n,s,a,i,"next",e)}function i(e){y(o,n,s,a,i,"throw",e)}a(void 0)}))}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(Z,e);var t,r,u,p,f,d,y=(f=Z,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(f);if(d){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function Z(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Z),(t=y.call(this,e)).state={errors:[],password1:"",password2:"",username:"",sysuser:""},t.submitTGS=t.submitTGS.bind(w(t)),t.submitSYS=t.submitSYS.bind(w(t)),t}return t=Z,(r=[{key:"validate",value:function(){var e=!1;return this.state.password1.length<this.context.serverInfo.minimumPasswordLength?(e=!0,this.setState({lengthError:!0})):this.setState({lengthError:!1}),this.state.password2!==this.state.password1?(e=!0,this.setState({matchError:!0})):this.setState({matchError:!1}),e}},{key:"submitTGS",value:(p=v((function*(e){if(e.preventDefault(),!this.validate()&&this.state.username){this.setState({creating:!0});var t=yield l.Z.createUser({name:this.state.username,password:this.state.password1});t.code==c.G.OK?this.props.postCreateAction(t.payload,this.props.history):(this.addError(t.error),this.setState({creating:!1}))}})),function(e){return p.apply(this,arguments)})},{key:"submitSYS",value:(u=v((function*(e){if(e.preventDefault(),this.state.sysuser){this.setState({creating:!0});var t=yield l.Z.createUser({systemIdentifier:this.state.sysuser});t.code==c.G.OK?this.props.postCreateAction(t.payload,this.props.history):(this.addError(t.error),this.setState({creating:!1}))}})),function(e){return u.apply(this,arguments)})},{key:"addError",value:function(e){this.setState((function(t){var r=Array.from(t.errors);return r.push(e),{errors:r}}))}},{key:"render",value:function(){var e=this;return this.state.creating?n.createElement(m.Z,{text:"loading.user.create"}):n.createElement("div",{className:"text-center"},this.state.errors.map((function(t,r){if(t)return n.createElement(h.Z,{key:r,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.errors);return t[r]=void 0,{errors:t}}))}})})),n.createElement("h3",null,n.createElement(i.Z,{id:"routes.usercreate"})),n.createElement(o.Z,{className:"mx-auto",lg:5,md:8},n.createElement(a.Z,{onSubmit:this.submitTGS},n.createElement(a.Z.Group,{controlId:"username"},n.createElement(a.Z.Label,null,n.createElement(i.Z,{id:"login.username"})),n.createElement(a.Z.Control,{required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username})),n.createElement(a.Z.Group,{controlId:"password1"},n.createElement(a.Z.Label,null,n.createElement(i.Z,{id:"login.password"})),n.createElement(a.Z.Control,{type:"password",onChange:function(t){return e.setState({password1:t.target.value})},value:this.state.password1,isInvalid:this.state.matchError||this.state.lengthError}),n.createElement(a.Z.Control.Feedback,{type:"invalid"},this.state.lengthError?n.createElement(n.Fragment,null,n.createElement(i.Z,{id:"login.password.repeat.short"}),this.context.serverInfo.minimumPasswordLength):"")),n.createElement(a.Z.Group,{controlId:"password2"},n.createElement(a.Z.Label,null,n.createElement(i.Z,{id:"login.password.repeat"})),n.createElement(a.Z.Control,{type:"password",onChange:function(t){return e.setState({password2:t.target.value})},value:this.state.password2,isInvalid:this.state.matchError||this.state.lengthError}),n.createElement(a.Z.Control.Feedback,{type:"invalid"},this.state.matchError?n.createElement(i.Z,{id:"login.password.repeat.match"}):"")),n.createElement(s.Z,{type:"submit"},n.createElement(i.Z,{id:"view.user.create.tgs"}))),n.createElement("hr",null),n.createElement(a.Z,{onSubmit:this.submitSYS},n.createElement(a.Z.Group,{controlId:"sysuser"},n.createElement(a.Z.Label,null,n.createElement(i.Z,{id:"generic.systemidentifier"})),n.createElement(a.Z.Control,{required:!0,onChange:function(t){return e.setState({sysuser:t.target.value})},value:this.state.sysuser})),n.createElement(s.Z,{type:"submit"},n.createElement(i.Z,{id:"view.user.create.sys"})))))}}])&&E(t.prototype,r),Z}(n.Component);Z.defaultProps={postCreateAction:function(e,t){f.Mq.selecteduserid=e.id,t.push(f.$w.useredit.link||f.$w.useredit.route)}},Z.contextType=p.f,t.default=(0,u.EN)(Z)}}]);
//# sourceMappingURL=257.d43b2144ba4ee050e351.js.map