(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[179],{3652:function(e,t,n){"use strict";var r=n(67294),o=n(88375),i=n(35005),a=n(44012),c=n(41153);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,e);var t,n,c,s,m=(c=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(c);if(s){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function h(){return u(this,h),m.apply(this,arguments)}return t=h,(n=[{key:"render",value:function(){var e=this;return r.createElement(o.Z,{className:"clearfix",variant:"error"},r.createElement(a.Z,{id:"generic.accessdenied"}),r.createElement("hr",null),r.createElement(i.Z,{variant:"danger",className:"float-right",onClick:function(){e.props.history.goBack()}},r.createElement(a.Z,{id:"generic.goback"})))}}])&&l(t.prototype,n),h}(r.Component);t.Z=(0,c.EN)(m)},43307:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(28359),o=n(67294),i=n(88375),a=n(35005),c=n(81292),s=n(44012),u=n(36800),l=n(2486);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(b,e);var t,n,f,y,v=(f=b,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(f);if(y){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=v.call(this,e)).state={popup:!1},t}return t=b,(n=[{key:"render",value:function(){var e,t,n=this;if(!this.props.error)return"";var f=function(){return n.setState({popup:!1})};return o.createElement(i.Z,{className:"clearfix",variant:"error",dismissible:!!this.props.onClose,onClose:this.props.onClose},o.createElement(s.Z,{id:this.props.error.code}),o.createElement("hr",null),o.createElement(a.Z,{variant:"danger",className:"float-right",onClick:function(){return n.setState({popup:!0})}},o.createElement(s.Z,{id:"generic.details"})),o.createElement(c.Z,{centered:!0,show:this.state.popup,onHide:f,size:"lg"},o.createElement(c.Z.Header,{closeButton:!0},o.createElement(c.Z.Title,null,o.createElement(s.Z,{id:this.props.error.code}))),o.createElement(c.Z.Body,{className:"text-danger pb-0"},(null===(e=this.props.error.desc)||void 0===e?void 0:e.type)==u._T.LOCALE?o.createElement(s.Z,{id:this.props.error.desc.desc}):null!==(t=this.props.error.desc)&&void 0!==t&&t.desc?this.props.error.desc.desc:"",o.createElement("hr",null),o.createElement(r.Z,null,o.createElement("code",{className:"bg-darker d-block pre-wrap p-2 pre-scrollable"},"Webpanel Version: ".concat(l.q4,"\nWebpanel Mode: ").concat(l.IK,"\nAPI Version: ").concat(l.Gn,"\n\nError Code: ").concat(this.props.error.code,"\nError Description: ").concat(this.props.error.desc?this.props.error.desc.desc:"No description","\n\nAdditional Information:\n").concat(this.props.error.extendedInfo).replace(/\\/g,"\\\\")))),o.createElement(c.Z.Footer,null,o.createElement("span",{className:"font-italic mr-auto"},o.createElement(s.Z,{id:"generic.debugwarn"})),o.createElement(a.Z,{variant:"secondary",onClick:f},o.createElement(s.Z,{id:"generic.close"})))))}}])&&d(t.prototype,n),b}(o.Component)},46001:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var r=n(67294),o=n(86828),i=n(43489),a=n(44012),c=n(61090),s=n(15402),u=n(38592),l=n(7205),f=n(18512),d=n(43307),p=n(67814),m=n(35005),h=n(51479),y=n(10729),v=n(61318),b=n(17863),g=n(48272),E=n(48155);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(l,e);var t,n,c,s,u=(c=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(c);if(s){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Z(this,e)});function l(){return S(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props.job,n=new Date(t.startedAt),c=(n.getTime()-Date.now())/1e3,s=void 0!==t.errorCode||void 0!==t.exceptionDetails?"danger":t.cancelled?"warning":t.stoppedAt?"success":"info";return r.createElement(y.Z,{key:t.id,style:{maxWidth:this.props.width},onClose:function(){e.props.onClose(t)}},r.createElement(b.Z,{closeButton:!!t.stoppedAt,className:"bg-".concat(s)},"#",t.id,": ",t.description),r.createElement(v.Z,null,r.createElement(a.Z,{id:"app.job.started"}),r.createElement(o.Z,{overlay:r.createElement(i.Z,{id:"".concat(t.id,"-tooltip-started")},n.toLocaleString())},(function(e){var t=e.ref,n=I(e,["ref"]);return r.createElement("span",O({},n,{ref:t}),r.createElement(g.Z,{value:c,numeric:"auto",updateIntervalInSeconds:1}))})),r.createElement("br",null),r.createElement(a.Z,{id:"app.job.startedby"}),r.createElement(o.Z,{overlay:r.createElement(i.Z,{id:"".concat(t.id,"-tooltip-startedby")},r.createElement(a.Z,{id:"generic.userid"}),t.startedBy.id)},(function(e){var n=e.ref,o=I(e,["ref"]);return r.createElement("span",O({ref:n},o),t.startedBy.name)})),r.createElement("br",null),r.createElement("br",null),t.stoppedAt?r.createElement(r.Fragment,null,r.createElement(a.Z,{id:"app.job.stopped"}),r.createElement(o.Z,{overlay:r.createElement(i.Z,{id:"".concat(t.id,"-tooltip-stopped")},n.toLocaleString())},(function(e){var t=e.ref,n=I(e,["ref"]);return r.createElement("span",O({},n,{ref:t}),r.createElement(g.Z,{value:c,numeric:"auto",updateIntervalInSeconds:1}))})),r.createElement("br",null)):"",t.cancelledBy?r.createElement(r.Fragment,null,r.createElement(a.Z,{id:"app.job.stoppedby"}),r.createElement(o.Z,{overlay:r.createElement(i.Z,{id:"".concat(t.id,"-tooltip-createdby")},r.createElement(a.Z,{id:"generic.userid"}),t.startedBy.id)},(function(e){var n=e.ref,o=I(e,["ref"]);return r.createElement("span",O({ref:n},o),t.cancelledBy.name)})),r.createElement("br",null)):"",!t.stoppedAt&&!t.cancelledBy||void 0===t.errorCode&&void 0===t.exceptionDetails?"":r.createElement("br",null),void 0!==t.errorCode||void 0!==t.exceptionDetails?r.createElement(r.Fragment,null,r.createElement("span",null,r.createElement(a.Z,{id:"view.instance.jobs.error"}),"(",void 0!==t.errorCode&&null!==t.errorCode?E.jK[t.errorCode]:"NoCode","): ",t.exceptionDetails),r.createElement("br",null)):"",r.createElement("div",{className:"d-flex mt-2",style:{height:"1.5rem"}},r.createElement(h.Z,{className:"text-darker font-weight-bold flex-grow-1 h-unset",animated:!t.stoppedAt,label:"number"==typeof t.progress?"".concat(t.progress.toString(),"%"):void 0,now:"number"==typeof t.progress?t.progress:100,striped:!0,variant:s}),t.canCancel&&!t.stoppedAt?r.createElement(m.Z,{style:{padding:"0 1em"},className:"ml-1",variant:"danger",onClick:function(){return e.props.onCancel(t)}},r.createElement(p.G,{icon:"times",className:"d-block"})):null)))}}])&&A(t.prototype,n),l}(r.Component),j=n(71739);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){U(i,r,o,a,c,"next",e)}function c(e){U(i,r,o,a,c,"throw",e)}a(void 0)}))}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(g,e);var t,n,p,m,h,y,v,b=(y=g,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(y);if(v){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=b.call(this,e)).widgetRef=r.createRef(),t.handleUpdate=t.handleUpdate.bind(M(t)),t.onCancel=t.onCancel.bind(M(t)),t.onClose=t.onClose.bind(M(t)),t.state={jobs:f.Z.jobsByInstance,errors:[],ownerrors:[],loading:!0,instances:new Map},t}return t=g,(n=[{key:"addError",value:function(e){var t=this;this.setState((function(n){var r=Array.from(n.ownerrors);return r.push(e),t.widgetRef.current&&(t.widgetRef.current.scrollTop=0),{ownerrors:r}}))}},{key:"componentDidMount",value:(h=G((function*(){f.Z.on("jobsLoaded",this.handleUpdate),yield this.handleUpdate()})),function(){return h.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){f.Z.removeListener("jobsLoaded",this.handleUpdate)}},{key:"handleUpdate",value:(m=G((function*(){var e=[],t=yield s.Z.listInstances({pageSize:100});if(t.code!==u.G.ERROR){e.push.apply(e,L(t.payload.content));for(var n=2;n<=t.payload.totalPages;n++){var r=yield s.Z.listInstances({page:n,pageSize:100});if(r.code===u.G.ERROR)return void this.addError(r.error);e.push.apply(e,L(r.payload.content))}var o=new Map;e.forEach((function(e){return o.set(e.id,e)})),this.setState({jobs:f.Z.jobsByInstance,errors:f.Z.errors,loading:!1,instances:o})}else this.addError(t.error)})),function(){return m.apply(this,arguments)})},{key:"onCancel",value:(p=G((function*(e){var t=this;(yield f.Z.cancelJob(e.id,(function(e){return t.addError(e)})))&&(f.Z.fastmode=5)})),function(e){return p.apply(this,arguments)})},{key:"onClose",value:function(e){f.Z.clearJob(e.id)}},{key:"render",value:function(){if(!this.props.widget)return this.nested();var e,t,n=0,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=N(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.state.jobs.values());try{for(o.s();!(e=o.n()).done;)n+=e.value.size}catch(e){o.e(e)}finally{o.f()}return t=l.Z.jobswidgetdisplay.value!==l.z.NEVER&&(l.Z.jobswidgetdisplay.value===l.z.ALWAYS||n>0||this.state.errors.length>0),r.createElement("div",{style:{position:"fixed",top:0,bottom:0,right:0,left:0,pointerEvents:"none"}},r.createElement(c.s,{className:"jobswidget ".concat(t?"":"invisible"),style:{pointerEvents:"auto",bottom:0,right:0},default:{width:"30vw",height:"50vh",x:document.documentElement.clientWidth-Math.min(.3*document.documentElement.clientWidth,350)-20,y:document.documentElement.clientHeight-.5*document.documentElement.clientHeight-20},maxWidth:350,minHeight:50,minWidth:110,bounds:"parent"},r.createElement("div",{className:"fancyscroll overflow-auto h-100",ref:this.widgetRef},r.createElement("h5",{className:"text-center text-darker font-weight-bold"},r.createElement(a.Z,{id:"view.instance.jobs.title"})),this.nested())))}},{key:"nested",value:function(){var e=this;return r.createElement("div",{className:this.props.widget?"d-sm-block":""},this.state.loading?r.createElement(j.Z,{text:"loading.instance.jobs.list"}):"",this.state.ownerrors.map((function(t,n){if(t)return r.createElement(d.Z,{key:n,error:t,onClose:function(){return e.setState((function(e){var t=Array.from(e.ownerrors);return t[n]=void 0,{ownerrors:t}}))}})})),this.state.errors.map((function(t,n){return r.createElement("div",{key:n,style:{maxWidth:e.props.widget?350:"unset"}},r.createElement(d.Z,{error:t}))})),Array.from(this.state.jobs).sort((function(e,t){return e[0]-t[0]})).map((function(t){var n,c,s=R(t,2),u=s[0],l=s[1];return r.createElement(r.Fragment,{key:u},r.createElement("div",{className:"bg-dark p-2 text-center"},r.createElement(o.Z,{overlay:function(e){return function(t){return r.createElement(i.Z,_({id:"tooltip-instance-".concat(e)},t),e)}}(u)},r.createElement(r.Fragment,null,null!==(n=null===(c=e.state.instances.get(u))||void 0===c?void 0:c.name)&&void 0!==n?n:"Unknown"," ","(",r.createElement(a.Z,{id:"view.instance.jobs.jobtotal",values:{amount:l.size}}),")"))),Array.from(l,(function(e){return R(e,2)[1]})).sort((function(e,t){return t.id-e.id})).map((function(t){return r.createElement(x,{job:t,width:e.props.width,key:t.id,onClose:e.onClose,onCancel:e.onCancel})})))})))}}])&&B(t.prototype,n),g}(r.Component);F.defaultProps={widget:!0}},71739:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(67294),o=n(36968),i=n(44012),a=n(95925),c=n(94537);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(y,e);var t,n,s,m,h=(s=y,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(s);if(m){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function y(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),h.call(this,e)}return t=y,(n=[{key:"render",value:function(){var e=this.props,t=e.variant,n=e.animation,s=e.center,l=e.className,f=e.width,d=e.widthUnit,p=e.text,m=e.children,h=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["variant","animation","center","className","width","widthUnit","text","children"]),y={width:"".concat(f).concat(d),height:"".concat(f).concat(d)};return r.createElement(c.Z,null,r.createElement(a.Z,{appear:!0,classNames:"anim-fade",addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},r.createElement("div",{className:s?"text-center":""},r.createElement(o.Z,u({variant:t||"secondary",className:s?"d-block mx-auto ".concat(null!=l?l:""):l,style:y,animation:n||"border"},h)),p?r.createElement(i.Z,{id:p}):"",m)))}}])&&l(t.prototype,n),y}(r.Component);m.defaultProps={animation:"border",width:"50",widthUnit:"vmin",center:!0}},63136:function(e,t,n){"use strict";n.r(t);var r=n(16566),o=n(38658),i=n(67814),a=n(67294),c=n(35005),s=n(31555),u=n(32258),l=n(44012),f=n(41153),d=n(48155),p=n(39248),m=n(36800),h=n(38592),y=n(65022),v=n(26011),b=n(32826),g=n(66266),E=n(15428),w=n(3429),O=n(43307),I=n(71739);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,c,"next",e)}function c(e){C(i,r,o,a,c,"throw",e)}a(void 0)}))}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(N,e);var t,n,f,b,S,C,R,L=(C=N,R=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(C);if(R){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function N(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,N),(t=L.call(this,e)).submit=t.submit.bind(P(t)),console.log(w.Mq.oautherrors),t.state={busy:!1,validated:!1,username:"",password:"",errors:Array.from(w.Mq.oautherrors)},t}return t=N,(n=[{key:"componentDidMount",value:function(){}},{key:"tryLoginDefault",value:(S=Z((function*(){(yield y.Z.login({type:p.P.Password,userName:"admin",password:"ISolemlySwearToDeleteTheDataDirectory"})).code===h.G.OK&&this.setState({redirectSetup:!0})})),function(){return S.apply(this,arguments)})},{key:"addError",value:function(e){this.setState((function(t){var n=Array.from(t.errors);return n.push(e),{errors:n}}))}},{key:"render",value:function(){var e,t,n=this;if(this.state.busy||v.Z.isTokenValid())return a.createElement(I.Z,{text:"loading.login"});if(!this.context.serverInfo)return a.createElement(I.Z,{text:"loading.serverinfo"});var f=(A(e={},d.O4.GitHub,a.createElement(i.G,{icon:o.zh,style:{width:"1.2em"}})),A(e,d.O4.Discord,a.createElement(i.G,{icon:r.om,style:{width:"1.2em"}})),A(e,d.O4.TGForums,a.createElement("img",{src:E,alt:"tglogo",style:{width:"1.2em"}})),A(e,d.O4.Keycloak,a.createElement("img",{src:g,alt:"keycloaklogo",style:{width:"1.2em"}})),e);return a.createElement(u.Z,{validated:this.state.validated,onSubmit:this.submit},a.createElement(s.Z,{className:"mx-auto",lg:5,md:8},this.state.errors.map((function(e,t){if(e)return a.createElement(O.Z,{key:t,error:e,onClose:function(){return n.setState((function(e){var n=Array.from(e.errors);return n[t]=void 0,{errors:n}}))}})})),a.createElement(u.Z.Group,{controlId:"username"},a.createElement(u.Z.Label,null,a.createElement(l.Z,{id:"login.username"})),a.createElement(u.Z.Control,{type:"text",onChange:function(e){return n.setState({username:e.target.value})},value:this.state.username,required:!0})),a.createElement(u.Z.Group,{controlId:"password"},a.createElement(u.Z.Label,null,a.createElement(l.Z,{id:"login.password"})),a.createElement(u.Z.Control,{type:"password",onChange:function(e){return n.setState({password:e.target.value})},value:this.state.password,required:!0})),a.createElement(c.Z,{type:"submit"},a.createElement(l.Z,{id:"login.submit"})),a.createElement("hr",null),a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("div",{className:"d-flex flex-column align-items-stretch"},Object.keys(null!==(t=this.context.serverInfo.oAuthProviderInfos)&&void 0!==t?t:{}).map((function(e){return a.createElement(c.Z,{className:"text-left my-1",key:e,onClick:function(){return n.startOAuth(e)}},f[e],a.createElement("span",{className:"ml-2"},a.createElement(l.Z,{id:"login.oauth",values:{provider:e}})))}))))))}},{key:"startOAuth",value:(b=Z((function*(e){var t;if(this.context.serverInfo){var n=new Uint8Array(10);window.crypto.getRandomValues(n);var r=Array.from(n,(function(e){return e.toString(16).padStart(2,"0")})).join(""),o=void 0,i=encodeURIComponent;switch(e){case d.O4.Discord:o="https://discord.com/api/oauth2/authorize?response_type=code&client_id=".concat(i(this.context.serverInfo.oAuthProviderInfos.Discord.clientId),"&scope=identify&state=").concat(i(r),"&redirect_uri=").concat(i(this.context.serverInfo.oAuthProviderInfos.Discord.redirectUri));break;case d.O4.GitHub:o="https://github.com/login/oauth/authorize?client_id=".concat(i(this.context.serverInfo.oAuthProviderInfos.GitHub.clientId),"&redirect_uri=").concat(i(this.context.serverInfo.oAuthProviderInfos.GitHub.redirectUri),"&state=").concat(i(r),"&allow_signup=false");break;case d.O4.Keycloak:o="".concat(this.context.serverInfo.oAuthProviderInfos.Keycloak.serverUrl,"/protocol/openid-connect/auth?response_type=code&client_id=").concat(i(this.context.serverInfo.oAuthProviderInfos.Keycloak.clientId),"&scope=openid&state=").concat(i(r),"&redirect_uri=").concat(i(this.context.serverInfo.oAuthProviderInfos.Keycloak.redirectUri));break;case d.O4.TGForums:o="https://tgstation13.org/phpBB/oauth.php?session_public_token=".concat(i(this.context.serverInfo.oAuthProviderInfos.TGForums.clientId))}var a=JSON.parse(null!==(t=window.sessionStorage.getItem("oauth"))&&void 0!==t?t:"{}");return e===d.O4.TGForums?a.tgforums={provider:e,url:this.props.location.pathname,state:this.context.serverInfo.oAuthProviderInfos.TGForums.clientId}:a[r]={provider:e,url:this.props.location.pathname},window.sessionStorage.setItem("oauth",JSON.stringify(a)),window.location.href=o,new Promise((function(e){return e()}))}this.addError(new m.ZP(m.jK.APP_FAIL,{jsError:Error("serverInfo is null in startOAuth")}))})),function(e){return b.apply(this,arguments)})},{key:"submit",value:(f=Z((function*(e){e.preventDefault(),this.setState({busy:!0});var t=yield y.Z.login({type:p.P.Password,userName:this.state.username,password:this.state.password});t.code==h.G.ERROR?(this.setState({busy:!1}),this.addError(t.error)):this.props.postLoginAction&&this.props.postLoginAction()})),function(e){return f.apply(this,arguments)})}])&&k(t.prototype,n),N}(a.Component);R.contextType=b.f,t.default=(0,f.EN)(R)},32826:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var r=n(67294).createContext(void 0)},2486:function(e,t,n){"use strict";n.d(t,{Gn:function(){return r},q4:function(){return o},IK:function(){return i},UG:function(){return a},cV:function(){return c}});var r="9.0.0",o="7e212ec96848f8d46fa4bb17ed5b73e90de5fdb3",i="GITHUB",a="/app/",c="/"},71173:function(e,t,n){"use strict";n(51340),n(75029),n(5547),n(74462),n(17689);var r=n(67294),o=n(73935),i=n(42078),a=n(18512),c=n(93379),s=n.n(c),u=n(39087),l=(s()(u.Z,{insert:"head",singleton:!1}),u.Z.locals,n(10682)),f=n(67715),d=n(73727),p=n(39248),m=n(36800),h=n(38592),y=n(65022),v=n(69644),b=n(26011),g=n(34477),E=n(67814),w=n(35005),O=n(1592),I=n(13361),S=n(103),A=n(44012),C=n(41153),Z=n(95925),k=n(32826),x=n(42540),j=n(23926),P=n(3429);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(u,e);var t,n,o,i,a,c,s=(a=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(a);if(c){var n=G(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function u(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=s.call(this,e)).logoutClick=r.logoutClick.bind(U(r)),r.loginSuccess=r.loginSuccess.bind(U(r)),r.logout=r.logout.bind(U(r)),r.refresh=r.refresh.bind(U(r)),r.state={loggedIn:!!b.Z.isTokenValid(),routes:[],categories:P.Nz,focusedCategory:null!==(t=null===(n=r.props.category)||void 0===n?void 0:n.name)&&void 0!==t?t:""},r}return t=u,(n=[{key:"loginSuccess",value:function(){this.setState({loggedIn:!0})}},{key:"logout",value:function(){this.setState({loggedIn:!1})}},{key:"refresh",value:function(e){this.setState({routes:e})}},{key:"componentDidMount",value:(o=function*(){g.Z.on("loginSuccess",this.loginSuccess),y.Z.on("logout",this.logout),this.setState({routes:yield j.Z.getRoutes()}),j.Z.on("refresh",this.refresh)},i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){R(i,n,r,a,c,"next",e)}function c(e){R(i,n,r,a,c,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){g.Z.removeListener("loginSuccess",this.loginSuccess),y.Z.removeListener("logout",this.logout),j.Z.removeListener("refresh",this.refresh)}},{key:"componentDidUpdate",value:function(e){var t;void 0!==this.props.category&&this.props.category.key!==(null===(t=e.category)||void 0===t?void 0:t.key)&&this.setState({focusedCategory:this.props.category.name})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(S.Z,{className:"shadow-lg",expand:this.state.loggedIn?"lg":void 0,collapseOnSelect:!0,variant:"dark",bg:"primary"},r.createElement(S.Z.Brand,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.home.link)&&void 0!==t?t:P.$w.home.route,{reload:!0})},className:"mr-auto"},this.renderVersion()),r.createElement(S.Z.Toggle,{className:"mr-2","aria-controls":"responsive-navbar-nav"}),r.createElement(S.Z.Collapse,{className:"text-right mr-2",style:{minWidth:"0px"}},r.createElement(I.Z,{className:"mr-auto overflow-auto fancyscroll"},this.state.loggedIn?Object.values(this.state.categories).map((function(t){if(t.leader.cachedAuth)return r.createElement("div",{key:t.name,className:"d-flex",onMouseEnter:function(){var n=window.setTimeout((function(){e.setState({focusedCategory:t.name,focusTimer:void 0})}),130);e.setState({focusTimer:n})},onMouseLeave:function(){window.clearTimeout(e.state.focusTimer),e.setState({focusTimer:void 0})},onClick:function(){window.clearTimeout(e.state.focusTimer),e.setState({focusedCategory:t.name,focusTimer:void 0})}},r.createElement(I.Z.Item,null,r.createElement(I.Z.Link,{onClick:function(){var n;e.props.history.push(null!==(n=t.leader.link)&&void 0!==n?n:t.leader.route,{reload:!0})},active:(0,x.JW)(e.props.location.pathname,t.leader.route,!t.leader.navbarLoose)},r.createElement(A.Z,{id:t.leader.name}))),Object.values(t.routes).filter((function(e){return e.cachedAuth})).length>=2?r.createElement(Z.Z,{in:e.state.focusedCategory===t.name,classNames:"anim-collapse",className:"nowrap anim-collapse-all",addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},onMouseEnter:function(){e.setState({focusedCategory:t.name})}},r.createElement("div",null,r.createElement(I.Z,null,r.createElement("div",{className:"py-2 d-none d-lg-inline"},r.createElement(E.G,{icon:"angle-right"})),r.createElement(I.Z,{className:"bg-darkblue mx-1 rounded"},t.routes.map((function(t){if(!t.catleader&&t.cachedAuth&&t.visibleNavbar)return r.createElement(I.Z.Item,{key:t.name},r.createElement(I.Z.Link,{onClick:function(){var n;e.props.history.push(null!==(n=t.link)&&void 0!==n?n:t.route,{reload:!0})},active:(0,x.JW)(e.props.location.pathname,t.route,!t.navbarLoose)},r.createElement(A.Z,{id:t.name})))})),r.createElement("div",{className:"py-2 d-none d-lg-inline mr-1"},r.createElement(E.G,{icon:"grip-lines-vertical"})))))):"")})):r.createElement(I.Z.Item,null,r.createElement(I.Z.Link,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.home.link)&&void 0!==t?t:P.$w.home.route,{reload:!0})},active:!0},r.createElement(A.Z,{id:"routes.login"})))),this.renderUser())))}},{key:"renderVersion",value:function(){var e;return null!==(e=this.context.serverInfo)&&void 0!==e&&e.version?r.createElement(r.Fragment,null,r.createElement(A.Z,{id:"generic.appname"})," v",this.context.serverInfo.version):r.createElement(A.Z,{id:"loading.loading"})}},{key:"renderUser",value:function(){var e=this;return this.state.loggedIn?r.createElement(I.Z.Item,{className:"ml-auto"},r.createElement(O.Z,null,r.createElement(O.Z.Toggle,{id:"user-dropdown",type:"button",variant:"primary","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.context.user?this.context.user.name:r.createElement(A.Z,{id:"loading.loading"})),r.createElement(O.Z.Menu,{alignRight:!0,className:"text-right"},r.createElement(O.Z.Item,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.info.link)&&void 0!==t?t:P.$w.info.route,{reload:!0})}},r.createElement(A.Z,{id:"routes.info"})),r.createElement(O.Z.Item,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.config.link)&&void 0!==t?t:P.$w.config.route,{reload:!0})}},r.createElement(A.Z,{id:"routes.config"})),P.$w.passwd.cachedAuth?r.createElement(O.Z.Item,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.passwd.link)&&void 0!==t?t:P.$w.passwd.route,{reload:!0})}},r.createElement(A.Z,{id:"routes.passwd"})):"",r.createElement(O.Z.Item,{onClick:function(){y.Z.emit("purgeCache")}},r.createElement(A.Z,{id:"navbar.purgecache"})),r.createElement(O.Z.Item,{onClick:function(){e.props.history.replace(e.props.location.pathname,{reload:!0})}},r.createElement(A.Z,{id:"navbar.refresh"})),r.createElement(O.Z.Item,{onClick:this.logoutClick},r.createElement(A.Z,{id:"navbar.logout"}))))):r.createElement(r.Fragment,null,r.createElement(w.Z,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.config.link)&&void 0!==t?t:P.$w.config.route,{reload:!0})},variant:"primary"},r.createElement(E.G,{icon:"cogs"})),r.createElement(w.Z,{onClick:function(){var t;e.props.history.push(null!==(t=P.$w.info.link)&&void 0!==t?t:P.$w.info.route,{reload:!0})},variant:"primary"},r.createElement(E.G,{icon:"info-circle"})))}},{key:"logoutClick",value:function(){y.Z.logout()}}])&&L(t.prototype,n),u}(r.Component);B.contextType=k.f;var D=(0,C.EN)(B),z=n(43307),M=n(15881),$=n(2486);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(c,e);var t,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(o);if(i){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){this.props.location.key!==e.location.key&&this.setState({error:void 0,errorInfo:void 0})}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e,t;return this.state.error?r.createElement(l.Z,{className:"mt-5 mb-5"},r.createElement(M.Z,{className:"bg-transparent",border:"danger"},r.createElement(M.Z.Header,{className:"bg-danger"},r.createElement(A.Z,{id:"error.somethingwentwrong"})),r.createElement(M.Z.Body,null,r.createElement(M.Z.Title,null,this.state.error.name,": ",this.state.error.message),r.createElement(M.Z.Text,{as:"pre",className:"bg-transparent text-danger"},r.createElement("code",null,"Webpanel Version: ".concat($.q4,"\nWebpanel Mode: ").concat($.IK,"\nStack trace: ").concat(null!==(e=null===(t=this.state.errorInfo)||void 0===t?void 0:t.componentStack)&&void 0!==e?e:"Unable to get stack info")))))):this.props.children}}])&&W(t.prototype,n),c}(r.Component),q=(0,C.EN)(J),X=n(46001),Y=n(71739),Q=n(40684),ee=n(48155),te=n(3652);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(r);if(o){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ie(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={clear:!1},t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t;this.state.clear?this.setState({clear:!1}):e.match.path==this.props.match.path&&e.location.key!=this.props.location.key&&null!==(t=this.props.location.state)&&void 0!==t&&t.reload&&this.setState({clear:!0})}},{key:"render",value:function(){return this.state.clear?"":this.props.children}}])&&re(t.prototype,n),a}(r.Component),se=(0,C.EN)(ce),ue=n(63136);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){return r.createElement(Y.Z,{text:"loading.page"},r.createElement(A.Z,{id:e}))},ge=(0,Q.ZP)((function(){return n.e(486).then(n.bind(n,13486))}),{fallback:be("loading.page.notfound")}),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(f,e);var t,o,i,a,c,s,u=(c=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ve(c);if(s){var n=ve(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return he(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).refreshListener=t.refreshListener.bind(ye(t));var r=new Map;return j.Z.getImmediateRoutes(!1).forEach((function(e){r.set(e.name,(0,Q.ZP)((function(){return n(66235)("./".concat(e.file))}),{fallback:be(e.name)}))})),t.state={loading:!!new URLSearchParams(window.location.search).get("state"),routes:j.Z.getImmediateRoutes(!1),components:r},t}return t=f,(o=[{key:"refreshListener",value:function(e){this.setState({routes:e})}},{key:"componentDidMount",value:(i=function*(){var e,t=this;j.Z.on("refreshAll",this.refreshListener),this.props.history.listen((function(e){t.listener(e.pathname)})),this.listener(this.props.location.pathname);var n=new URLSearchParams(window.location.search),r=n.get("state");if(r){var o=JSON.parse(null!==(e=window.sessionStorage.getItem("oauth"))&&void 0!==e?e:"{}")[r];if(!o)return this.setErrorAndEnd(new m.ZP(m.jK.LOGIN_BAD_OAUTH,{jsError:Error("State(".concat(r,") cannot be resolved to a provider."))}));var i=n.get("code");if(o.provider===ee.O4.TGForums&&(i=o.state),!i)return this.setErrorAndEnd(new m.ZP(m.jK.LOGIN_BAD_OAUTH,{jsError:Error("Code not found.")}));this.props.history.replace(o.url);var a=yield y.Z.login({type:p.P.OAuth,provider:o.provider,token:i});if(a.code!==h.G.OK)return this.setErrorAndEnd(a.error);this.setState({loading:!1})}else this.setState({loading:!1})},a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){de(o,n,r,a,c,"next",e)}function c(e){de(o,n,r,a,c,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){j.Z.removeListener("refreshAll",this.refreshListener)}},{key:"setErrorAndEnd",value:function(e){P.Mq.oautherrors=[e],this.setState({loading:!1})}},{key:"listener",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(j.Z.getImmediateRoutes(!1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.category&&r.navbarLoose&&(0,x.JW)(e,r.route)){this.props.selectCategory(r.category);break}}}catch(e){n.e(e)}finally{n.f()}}},{key:"render",value:function(){var e=this;return this.state.loading?r.createElement(Y.Z,{text:"loading.app"}):r.createElement(q,null,r.createElement(se,null,r.createElement("div",null,r.createElement(C.rs,null,this.state.routes.map((function(t){if(t.loginless||e.props.loggedIn)return r.createElement(C.AW,{exact:!t.loose,path:t.route,key:t.name,render:function(n){var o,i,a;return a=t.cachedAuth?e.state.components.get(t.name):te.Z,null!==(o=e.context)&&void 0!==o&&o.user||t.loginless?null!==(i=e.context)&&void 0!==i&&i.serverInfo||t==P.$w.config?t.noContainer?r.createElement(r.Fragment,null,r.createElement(a,n)):r.createElement(l.Z,{className:"mt-5 mb-5"},r.createElement(a,n)):r.createElement(l.Z,null,r.createElement(z.Z,{error:new m.ZP(m.jK.APP_FAIL,{jsError:Error("Router has no server info in the general context")})})):r.createElement(l.Z,null,r.createElement(z.Z,{error:new m.ZP(m.jK.APP_FAIL,{jsError:Error("Router has no user in the general context")})}))}})})),r.createElement(l.Z,{className:"mt-5 mb-5"},r.createElement(C.AW,{key:"notfound"},this.props.loggedIn?r.createElement(ge,null):r.createElement(ue.default,null)))))))}}])&&pe(t.prototype,o),f}(r.Component);Ee.contextType=k.f;var we=(0,C.EN)(Ee),Oe=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};Oe.en="en";var Ie=Oe,Se=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=t,this.messages=n};function Ae(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o,i,a;return t=e,o=[{key:"getShortHandedLocale",value:function(e){return e.split("-")[0]}}],(r=[{key:"loadTranslation",value:(i=function*(t){var r=yield n(862)("./".concat(t,".json"));if(!r){var o=e.getShortHandedLocale(t);if(o===t){if(o===e.fallbackLocale)throw new Error("Invalid locale: "+t);o=e.fallbackLocale}return yield this.loadTranslation(o)}var i=null;try{i=new Se(t,r)}catch(e){throw Error("Error loading localization for locale '".concat(t,"': ").concat(JSON.stringify(e)))}return i},a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Ae(o,n,r,a,c,"next",e)}function c(e){Ae(o,n,r,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}])&&Ce(t.prototype,r),o&&Ce(t,o),e}();Ze.fallbackLocale=Ie.en;var ke=Ze;function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){je(i,r,o,a,c,"next",e)}function c(e){je(i,r,o,a,c,"throw",e)}a(void 0)}))}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t&&Le(e.prototype,t),n&&Le(e,n),e}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){Te(n,e);var t=Ge(n);function n(e){var r;return Re(this,n),(r=t.call(this,e)).state={},r}return Ne(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",(function(e){"L"==e.key&&e.ctrlKey&&e.shiftKey&&(y.Z.logout(),y.Z.login({type:p.P.Password,userName:"admin",password:"ISolemlySwearToDeleteTheDataDirectory"}))}))}},{key:"render",value:function(){var e,t=this;return r.createElement(d.VK,{basename:$.UG},r.createElement(q,null,r.createElement(D,{category:this.state.passdownCat}),this.props.loading?r.createElement(l.Z,{className:"mt-5 mb-5"},r.createElement(Y.Z,{text:"loading.app"})):r.createElement(r.Fragment,null,r.createElement(l.Z,{className:"mt-5"},(e=this.context.errors.values(),function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e,n){return r.createElement(z.Z,{error:e,key:n,onClose:function(){return t.context.deleteError(e)}})}))),r.createElement(we,{loggedIn:this.props.loggedIn,selectCategory:function(e){t.setState({passdownCat:{name:e,key:Math.random().toString()}})}})),this.props.loggedIn?r.createElement(X.Z,null):null))}}]),n}(r.Component);Me.contextType=k.f;var $e=function(e){Te(c,e);var t,n,o,i,a=Ge(c);function c(e){var t,n;return Re(this,c),(n=a.call(this,e)).translationFactory=void 0,n.finishLogin=n.finishLogin.bind(De(n)),n.finishLogout=n.finishLogout.bind(De(n)),n.updateContextUser=n.updateContextUser.bind(De(n)),n.updateContextServer=n.updateContextServer.bind(De(n)),n.deleteGeneralContextError=n.deleteGeneralContextError.bind(De(n)),n.translationFactory=null!==(t=n.props.translationFactory)&&void 0!==t?t:new ke,n.state={loggedIn:!!b.Z.isTokenValid(),loading:!0,GeneralContextInfo:{errors:new Set,user:null,serverInfo:null,deleteError:n.deleteGeneralContextError}},n}return Ne(c,[{key:"updateContextUser",value:(i=Pe((function*(){var e=this,t=yield v.Z.getCurrentUser();t.code===h.G.OK?this.setState((function(e){return{GeneralContextInfo:{errors:e.GeneralContextInfo.errors,user:t.payload,serverInfo:e.GeneralContextInfo.serverInfo,deleteError:e.GeneralContextInfo.deleteError}}})):t.error.code===m.jK.HTTP_ACCESS_DENIED?this.setState((function(e){return{GeneralContextInfo:{user:null,serverInfo:e.GeneralContextInfo.serverInfo,deleteError:e.GeneralContextInfo.deleteError,errors:e.GeneralContextInfo.errors}}})):(setTimeout((function(){e.updateContextUser()}),5e3),this.setState((function(e){var n=new Set(e.GeneralContextInfo.errors);return n.add(t.error),{GeneralContextInfo:{errors:n,deleteError:e.GeneralContextInfo.deleteError,user:null,serverInfo:e.GeneralContextInfo.serverInfo}}})))})),function(){return i.apply(this,arguments)})},{key:"updateContextServer",value:(o=Pe((function*(){var e=this,t=yield y.Z.getServerInfo();t.code===h.G.OK?this.setState((function(e){return{GeneralContextInfo:{errors:e.GeneralContextInfo.errors,user:e.GeneralContextInfo.user,serverInfo:t.payload,deleteError:e.GeneralContextInfo.deleteError}}})):(setTimeout((function(){e.updateContextServer()}),5e3),this.setState((function(e){var n=new Set(e.GeneralContextInfo.errors);return n.add(t.error),{GeneralContextInfo:{errors:n,deleteError:e.GeneralContextInfo.deleteError,user:e.GeneralContextInfo.user,serverInfo:null}}})))})),function(){return o.apply(this,arguments)})},{key:"deleteGeneralContextError",value:function(e){this.setState((function(t){var n=new Set(t.GeneralContextInfo.errors);return n.delete(e),{GeneralContextInfo:{deleteError:t.GeneralContextInfo.deleteError,user:t.GeneralContextInfo.user,serverInfo:t.GeneralContextInfo.serverInfo,errors:n}}}))}},{key:"finishLogin",value:function(){console.log("Logging in"),v.Z.getCurrentUser(),this.updateContextUser(),this.setState({loggedIn:!0,loading:!1})}},{key:"finishLogout",value:function(){this.setState({loggedIn:!1}),this.updateContextUser()}},{key:"componentDidMount",value:(n=Pe((function*(){g.Z.on("loginSuccess",this.finishLogin),y.Z.on("logout",this.finishLogout),y.Z.on("purgeCache",this.updateContextServer),y.Z.on("purgeCache",this.updateContextUser),yield this.loadTranslation(),yield y.Z.initApi(),yield this.updateContextServer(),this.setState({loading:!1})})),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){g.Z.removeListener("loginSuccess",this.finishLogin),y.Z.removeListener("logout",this.finishLogout),y.Z.removeListener("purgeCache",this.updateContextServer),y.Z.removeListener("purgeCache",this.updateContextUser)}},{key:"render",value:function(){return null!=this.state.translationError?r.createElement("p",{className:"App-error"},this.state.translationError):null==this.state.translation?r.createElement(Y.Z,null,"Loading translations..."):r.createElement(f.Z,{locale:this.state.translation.locale,messages:this.state.translation.messages},r.createElement(k.f.Provider,{value:this.state.GeneralContextInfo},r.createElement(Me,{loading:this.state.loading,loggedIn:this.state.loggedIn})))}},{key:"loadTranslation",value:(t=Pe((function*(){console.time("LoadTranslations");try{var e=yield this.translationFactory.loadTranslation(this.props.locale);this.setState({translation:e})}catch(e){var t;return void this.setState({translationError:null!==(t=JSON.stringify(e))&&void 0!==t?t:"An unknown error occurred"})}console.timeEnd("LoadTranslations")})),function(){return t.apply(this,arguments)})}]),c}(r.Component),Fe=n(78947),We=n(51417),Ke=n(66370),He=n(83183),Ve=n(68055),Je=n(24075),qe=n(47810),Xe=n(57026),Ye=n(20702),Qe=n(8792),et=n(9752),tt=n(19500),nt=n(51257),rt=n(16688),ot=n(68099),it=n(82414),at=n(84176),ct=n(62679),st=n(7371),ut=n(40098),lt=n(16995),ft=n(95337),dt=n(59986),pt=n(91883),mt=n(59545),ht=n(55554),yt=n(42619),vt=n(40864),bt=n(27879),gt=n(46357),Et=n(27593);Fe.vI.add(Ve.LE,mt.NB,Ye.RL,bt.IL,Et.wO,nt.vc,pt.UO,ut.r8,lt.Ps,rt.J9,ht.Cg,qe.Kb,vt.X7,ot.YH,et._3,He.yO,at.DD,st.Iw,We.zhw,We.omb,yt.$,it.sq,Ke.Pd,tt.ne,ct.gf,Xe.lX,Qe.cC,gt.FV,Je.mh,ft.wn,dt.xf),i.Z.loadconfig(),a.Z.init(),window.loadedChannelFromWebpack&&"DEV"!==$.IK&&alert("Warning: channel.json was served from bundled files instead of TGS, the webpanel is running from the local version instead of the github update repo.\nPlease report this to your server host.\nIf you are the server host, please report this to alexkar598#2712 on discord\n\nWebpanel version: "+$.q4);try{window.localStorage.removeItem("username"),window.sessionStorage.removeItem("username"),window.localStorage.removeItem("password"),window.sessionStorage.removeItem("password")}catch(e){}var wt=document.getElementById("root"),Ot=r.createElement(r.StrictMode,null,r.createElement($e,{locale:Ie.en}));(0,o.render)(Ot,wt)},23926:function(e,t,n){"use strict";var r=n(12527),o=n(34477),i=n(3429);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,n,r,a,c,l,y=(c=v,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(c);if(l){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function v(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=y.call(this)).refreshing=!1,window.rtcontroller=m(e),e.refreshRoutes=e.refreshRoutes.bind(m(e)),o.Z.addHook(e.refreshRoutes),e.refreshRoutes().catch(console.error),console.time("Category mapping");for(var r=new Map,a=0,c=Object.entries(i.XT);a<c.length;a++){var s=(t=c[a],n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||u(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],f=s[1];f.routes=[],r.set(f.name,f),i.Nz[l]=f}for(var d=0,p=Object.values(i.$w);d<p.length;d++){var h=p[d];if(h.category){var b=r.get(h.category);if(b){if(b.routes.push(h),h.catleader){if(b.leader){console.error("Category has two leaders",b.leader,h);continue}b.leader=h}}else console.error("Route has invalid category",h)}}return console.log("Categories mapped",r),console.timeEnd("Category mapping"),e}return t=v,(n=[{key:"refreshRoutes",value:(a=s((function*(){if(!this.refreshing){this.refreshing=!0;var e,t=[],n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.getImmediateRoutes(!1));try{var r=function(){var n=e.value;n.cachedAuth=void 0,n.isAuthorized&&t.push(n.isAuthorized().then((function(e){n.cachedAuth=e})))};for(n.s();!(e=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}yield Promise.all(t),this.emit("refresh",this.getImmediateRoutes(!0));var o=this.getImmediateRoutes(!1);return this.emit("refreshAll",o),this.refreshing=!1,console.log("Routes refreshed",o),yield this.getRoutes()}console.log("Already refreshing")})),function(){return a.apply(this,arguments)})},{key:"wait4refresh",value:function(){var e=this;return new Promise((function(t){e.refreshing?e.on("refresh",(function(){t()})):t()}))}},{key:"getRoutes",value:(r=s((function*(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return yield this.wait4refresh(),this.getImmediateRoutes(e)})),function(){return r.apply(this,arguments)})},{key:"getImmediateRoutes",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[],n=0,r=Object.values(i.$w);n<r.length;n++){var o=r[n];o.isAuthorized&&!o.cachedAuth&&e||t.push(o)}return t}}])&&f(t.prototype,n),v}(r.TypedEmitter);t.Z=new y},42540:function(e,t,n){"use strict";n.d(t,{LR:function(){return o},ko:function(){return i},JW:function(){return a},Zg:function(){return c}});var r=n(51068);function o(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function i(e,t,n,r){return e.replace(new RegExp(t.replace(/([/,!\\^${}[\]().*+?|<>\-&])/g,"\\$&"),r?"gi":"g"),n.replace(/\$/g,"$$$$"))}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"/"===e.slice(-1)&&(e=e.slice(0,-1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),(0,r.Bo)(t,void 0,{end:n}).test(e)}function c(e){var t,n;return null!==(t=e.permissionSet)&&void 0!==t?t:null===(n=e.group)||void 0===n?void 0:n.permissionSet}},3429:function(e,t,n){"use strict";n.d(t,{$w:function(){return d},XT:function(){return p},Nz:function(){return m},Mq:function(){return h}});var r=n(48155),o=n(38592),i=n(69644),a=n(26011),c=n(42540);function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))}}function l(e){return u((function*(){if(!a.Z.isTokenValid())return!1;var t=yield i.Z.getCurrentUser();return t.code==o.G.OK&&!!((0,c.Zg)(t.payload).administrationRights&e)}))}function f(e){return u((function*(){if(!a.Z.isTokenValid())return!1;var t=yield i.Z.getCurrentUser();return t.code==o.G.OK&&!!((0,c.Zg)(t.payload).instanceManagerRights&e)}))}var d={home:{name:"routes.home",route:"/",file:"Home",loose:!1,navbarLoose:!1,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:void 0,category:"home",catleader:!0},instancecreate:{name:"routes.instancecreate",route:"/instances/create",file:"Instance/Create",loose:!1,navbarLoose:!1,isAuthorized:f(r.c2.Create),visibleNavbar:!1,category:"instance",catleader:!1},instancelist:{name:"routes.instancelist",route:"/instances/",file:"Instance/List",loose:!1,navbarLoose:!0,isAuthorized:f(r.c2.List|r.c2.Read),visibleNavbar:!0,homeIcon:"hdd",category:"instance",catleader:!0},instanceedit:{name:"routes.instanceedit",route:"/instances/edit/:id(\\d+)/:tab?/",file:"Instance/InstanceEdit",get link(){var e;return void 0!==h.selectedinstanceid?"/instances/edit/".concat(h.selectedinstanceid,"/").concat(void 0!==h.selectedinstanceedittab?"".concat(h.selectedinstanceedittab,"/"):""):null!==(e=d.instancelist.link)&&void 0!==e?e:d.instancelist.route},loose:!1,navbarLoose:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},instancejobs:{name:"routes.instancejobs",route:"/instances/jobs/",file:"Instance/Jobs",loose:!1,navbarLoose:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},userlist:{name:"routes.usermanager",route:"/users/",file:"User/List",loose:!1,navbarLoose:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:"user",category:"user",catleader:!0},useredit:{name:"routes.useredit",route:"/users/edit/user/:id(\\d+)/:tab?/",get link(){var e;return void 0!==h.selecteduserid?"/users/edit/user/".concat(h.selecteduserid,"/").concat(void 0!==h.selectedusertab?"".concat(h.selectedusertab,"/"):""):null!==(e=d.userlist.link)&&void 0!==e?e:d.userlist.route},file:"User/Edit",loose:!0,navbarLoose:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:void 0,category:"user"},usercreate:{name:"routes.usercreate",route:"/users/create/",link:"/users/create/",file:"User/Create",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.WriteUsers),visibleNavbar:!0,homeIcon:void 0,category:"user"},admin:{name:"routes.admin",route:"/admin/",file:"Administration",loose:!1,navbarLoose:!0,isAuthorized:l(r.oj.ChangeVersion),cachedAuth:!0,visibleNavbar:!0,homeIcon:"tools",category:"admin",catleader:!0},admin_update:{name:"routes.admin.update",route:"/admin/update/:all?/",file:"Admin/Update",link:"/admin/update/",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.ChangeVersion),visibleNavbar:!0,homeIcon:void 0,category:"admin"},admin_logs:{name:"routes.admin.logs",route:"/admin/logs/:name?/",link:"/admin/logs/",file:"Admin/Logs",loose:!1,navbarLoose:!0,isAuthorized:l(r.oj.DownloadLogs),visibleNavbar:!0,homeIcon:void 0,category:"admin",noContainer:!0},passwd:{name:"routes.passwd",route:"/users/passwd/:id(\\d+)?/",link:"/users/passwd/",file:"ChangePassword",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.EditOwnPassword),visibleNavbar:!1,homeIcon:"key"},config:{name:"routes.config",route:"/config/",file:"Configuration",loose:!0,navbarLoose:!0,loginless:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!1,homeIcon:"cogs"},setup:{name:"routes.setup",route:"/setup/",file:"Setup",loose:!0,navbarLoose:!0,loginless:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!1},oAuth:{name:"routes.oauth",route:"/oauth/:provider?/",file:"Login",loose:!0,navbarLoose:!1,loginless:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!1},info:{name:"routes.info",route:"/info",file:"Info",loose:!1,navbarLoose:!1,loginless:!0,isAuthorized:function(){return Promise.resolve(!0)},cachedAuth:!0,visibleNavbar:!0,homeIcon:"info-circle",category:void 0,catleader:!1}},p={home:{name:"home"},instance:{name:"instance"},user:{name:"user"},admin:{name:"admin"}},m={},h={selecteduserid:void 0,selectedusertab:void 0,selectedinstanceid:void 0,selectedinstanceedittab:void 0,instancelistpage:void 0,loglistpage:void 0,byondlistpage:void 0,userlistpage:void 0,oautherrors:[]}},39087:function(e,t,n){"use strict";var r=n(94015),o=n.n(r),i=n(23645),a=n.n(i),c=n(61667),s=n.n(c),u=n(94464),l=a()(o()),f=s()(u);l.push([e.id,".App {\n    background-size: 50%;\n    background: #1e1e1e url("+f+") no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n","",{version:3,sources:["webpack://./src/App.css"],names:[],mappings:"AAAA;IACI,oBAAoB;IACpB,4EAAkD;IAClD,kBAAkB;IAClB,WAAW;IACX,MAAM;IACN,SAAS;IACT,aAAa;AACjB;;AAEA;IACI,UAAU;IACV,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,2BAA2B;AAC/B;;AAEA;IACI,aAAa;AACjB",sourcesContent:[".App {\n    background-size: 50%;\n    background: #1e1e1e url(logo.svg) no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n"],sourceRoot:""}]),t.Z=l},66235:function(e,t,n){var r={"./Admin/Logs":[90105,233,820,105],"./Admin/Logs.tsx":[90105,233,820,105],"./Admin/Update":[98628,233,820,923,628],"./Admin/Update.tsx":[98628,233,820,923,628],"./Administration":[11680,233,820,680],"./Administration.tsx":[11680,233,820,680],"./ChangePassword":[83359,359],"./ChangePassword.tsx":[83359,359],"./Configuration":[17273,273],"./Configuration.tsx":[17273,273],"./Home":[64558,558],"./Home.tsx":[64558,558],"./Info":[14464,464],"./Info.tsx":[14464,464],"./Instance/Create":[79350,350],"./Instance/Create.tsx":[79350,350],"./Instance/Edit/Byond":[59012,233,201,12],"./Instance/Edit/Byond.tsx":[59012,233,201,12],"./Instance/Edit/Config":[20895,895,327],"./Instance/Edit/Config.tsx":[20895,895,327],"./Instance/InstanceEdit":[63711,233,201,12,895,711],"./Instance/InstanceEdit.tsx":[63711,233,201,12,895,711],"./Instance/Jobs":[50571,571],"./Instance/Jobs.tsx":[50571,571],"./Instance/List":[36228,228],"./Instance/List.tsx":[36228,228],"./Login":[63136],"./Login.tsx":[63136],"./Setup":[65324,324],"./Setup.tsx":[65324,324],"./User/Create":[57257,257],"./User/Create.tsx":[57257,257],"./User/Edit":[28253,98,253],"./User/Edit.tsx":[28253,98,253],"./User/List":[11120,120],"./User/List.tsx":[11120,120]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=66235,e.exports=o},66266:function(e){"use strict";e.exports="https://tgstation.github.io/tgstation-server-webpanel/webpanel/2.2.0/995a88a72fd6520c8505.png"},15428:function(e){"use strict";e.exports="https://tgstation.github.io/tgstation-server-webpanel/webpanel/2.2.0/c97e39e417e48a3282f9.svg"},94464:function(e){"use strict";e.exports="https://tgstation.github.io/tgstation-server-webpanel/webpanel/2.2.0/5e166c1106c425ae6fb5.svg"},862:function(e,t,n){var r={"./en.json":[96160,160]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(r)},o.id=862,e.exports=o},33471:function(){},66653:function(){},71408:function(){},23646:function(){}},function(e){"use strict";e.O(0,[172,60,340],(function(){return 71173,e(e.s=71173)})),e.O()}]);
//# sourceMappingURL=main.b3f12fe835ff5f1feefa.js.map