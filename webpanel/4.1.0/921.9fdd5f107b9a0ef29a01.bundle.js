"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[921],{8425:function(e,t,a){a.d(t,{t:function(){return c}});var r=a(7294),s=a(5171),n=a.n(s),o=a(7961);function l(e){return r.createElement(n(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function c(e){return o.ZP.showjson.value?r.createElement("div",{className:"text-left"},r.createElement(l,{obj:e.obj})):r.createElement(r.Fragment,null)}},9905:function(e,t,a){a.d(t,{Z:function(){return R}});var r=a(7814),s=a(7294),n=a(5005),o=a(2258),l=a(5293),c=a(7462),i=a(3366),p=a(4184),m=a.n(p),u=a(6792),d=a(8358),h=["active","disabled","className","style","activeLabel","children"],g=["children"],f=s.forwardRef((function(e,t){var a=e.active,r=e.disabled,n=e.className,o=e.style,l=e.activeLabel,p=e.children,u=(0,i.Z)(e,h),g=a||r?"span":d.Z;return s.createElement("li",{ref:t,style:o,className:m()(n,"page-item",{active:a,disabled:r})},s.createElement(g,(0,c.Z)({className:"page-link",disabled:r},u),p,a&&l&&s.createElement("span",{className:"sr-only"},l)))}));f.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},f.displayName="PageItem";var P=f;function v(e,t,a){function r(e){var r=e.children,n=(0,i.Z)(e,g);return s.createElement(f,n,s.createElement("span",{"aria-hidden":"true"},r||t),s.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),r.displayName=e,r}var E=v("First","\xab"),b=v("Prev","\u2039","Previous"),y=v("Ellipsis","\u2026","More"),N=v("Next","\u203a"),Z=v("Last","\xbb"),x=["bsPrefix","className","children","size"],w=s.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,n=e.children,o=e.size,l=(0,i.Z)(e,x),p=(0,u.vE)(a,"pagination");return s.createElement("ul",(0,c.Z)({ref:t},l,{className:m()(r,p,o&&p+"-"+o)}),n)}));w.First=E,w.Prev=b,w.Ellipsis=y,w.Item=P,w.Next=N,w.Last=Z;var C=w,k=(a(5638),["as","bsPrefix","className","children"]),j=s.forwardRef((function(e,t){var a=e.as,r=void 0===a?"div":a,n=e.bsPrefix,o=e.className,l=e.children,p=(0,i.Z)(e,k);return n=(0,u.vE)(n,"popover-header"),s.createElement(r,(0,c.Z)({ref:t},p,{className:m()(n,o)}),l)})),M=["as","bsPrefix","className","children"],S=s.forwardRef((function(e,t){var a=e.as,r=void 0===a?"div":a,n=e.bsPrefix,o=e.className,l=e.children,p=(0,i.Z)(e,M);return n=(0,u.vE)(n,"popover-body"),s.createElement(r,(0,c.Z)({ref:t},p,{className:m()(o,n)}),l)})),G=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],I=s.forwardRef((function(e,t){var a=e.bsPrefix,r=e.placement,n=e.className,o=e.style,l=e.children,p=e.content,d=e.arrowProps,h=(e.popper,e.show,(0,i.Z)(e,G)),g=(0,u.vE)(a,"popover"),f=((null==r?void 0:r.split("-"))||[])[0];return s.createElement("div",(0,c.Z)({ref:t,role:"tooltip",style:o,"x-placement":f,className:m()(n,g,f&&"bs-popover-"+f)},h),s.createElement("div",(0,c.Z)({className:"arrow"},d)),p?s.createElement(S,null,l):l)}));I.defaultProps={placement:"right"},I.Title=j,I.Content=S;var O=I,_=a(4012);function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},L.apply(this,arguments)}class R extends s.PureComponent{constructor(e){super(e),this.state={showGoto:!1,gotoValue:e.currentPage}}render(){const e=[],t=Math.max(this.props.totalPages-this.props.currentPage-1,0),a=Math.max(this.props.currentPage-2,0),c=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-t,2),2),i=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-a,2),this.props.totalPages-1);for(let t=c;t<=i;t++)e.push(s.createElement(C.Item,{key:t,active:t===this.props.currentPage,onClick:()=>this.props.selectPage(t)},t));const p=this.props.totalPages>7?s.createElement(C.Ellipsis,{disabled:!0}):null,m=s.createElement(O,{id:"popover-gotopage"},s.createElement(O.Title,null,s.createElement(_.Z,{id:"generic.goto.title"})),s.createElement(O.Content,null,s.createElement("form",{className:"d-flex",onSubmit:e=>{e.preventDefault(),this.props.selectPage(this.state.gotoValue),this.setState({showGoto:!1})}},s.createElement(o.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:e=>this.setState({gotoValue:parseInt(e.target.value)}),custom:!0}),s.createElement(n.Z,{type:"submit"},s.createElement(_.Z,{id:"generic.goto"}))))),{selectPage:u,totalPages:d,currentPage:h,...g}=this.props;return s.createElement("div",L({className:"text-center",style:{position:"sticky",bottom:"1.5em"}},g),s.createElement(C,{className:"justify-content-center"},s.createElement(C.Prev,{disabled:this.props.currentPage<=1,onClick:()=>this.props.selectPage(Math.max(this.props.currentPage-1,1))}),s.createElement(C.Item,{active:this.props.currentPage<=1,onClick:()=>this.props.selectPage(1)},"1"),p,e,p,this.props.totalPages>=2?s.createElement(C.Item,{active:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(this.props.totalPages)},this.props.totalPages):null,this.props.totalPages>7?s.createElement(l.Z,{show:this.state.showGoto,placement:"top",overlay:m},s.createElement(C.Item,{onClick:()=>this.setState((e=>({showGoto:!e.showGoto})))},s.createElement(r.G,{icon:"search"}))):null,s.createElement(C.Next,{disabled:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(Math.min(this.props.currentPage+1,this.props.totalPages))})))}}},5921:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=a(7294),s=a(3204),n=a(3803),o=a(9521),l=a(6190),c=a(1320),i=a(3e3),p=a(3128),m=a(8425),u=a(5855),d=a(9905);function h(){const e=r.useContext(l.g),[t,a]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,P]=(0,r.useState)(!0),[v,E]=(0,r.useState)(c.Mq.jobhistorypage.get(e.instance.id)??1),[b,y]=(0,r.useState)(void 0);function N(e){g((t=>{const a=Array.from(t);return a.push(e),a}))}async function Z(e){const t=await s.Z.deleteJob(e.instanceid,e.id);t.code===n.G.OK?o.Z.fastmode=5:N(t.error)}return(0,r.useEffect)((()=>{c.Mq.jobhistorypage.set(e.instance.id,v),P(!0),async function(){const t=await s.Z.listJobs(e.instance.id,{page:v});t.code===n.G.OK?(v>t.payload.totalPages&&0!==t.payload.totalPages&&E(1),a(t.payload.content),y(t.payload.totalPages)):N(t.error),P(!1)}()}),[v,e.instance.id]),(0,r.useEffect)((()=>{}),[h]),f?r.createElement(u.Z,{text:"loading.instance.jobs.list"}):r.createElement("div",null,r.createElement(m.t,{obj:t}),h.map(((e,t)=>{if(e)return r.createElement(i.ZP,{key:t,error:e,onClose:()=>g((e=>{const a=Array.from(e);return a[t]=void 0,a}))})})),t.sort(((e,t)=>t.id-e.id)).filter((e=>!!e.stoppedAt)).map((e=>r.createElement(p.Z,{job:e,key:e.id,onCancel:Z}))),r.createElement(d.Z,{selectPage:e=>E(e),totalPages:b??1,currentPage:v}))}},6190:function(e,t,a){a.d(t,{g:function(){return r}});const r=a(7294).createContext(void 0)}}]);
//# sourceMappingURL=921.9fdd5f107b9a0ef29a01.bundle.js.map