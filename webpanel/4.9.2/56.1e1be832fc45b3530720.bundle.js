"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[56],{4542:function(e,t,a){a.r(t);var n=a(7294),r=a(5005),s=a(1555),i=a(2258),l=a(2318),c=a(4012),o=a(5977),u=a(6352),m=a(3803),d=a(4615),p=a(1320),h=a(3e3),f=a(5855);class E extends n.Component{constructor(e,t){super(e),this.state={loading:!1,errors:[],prefix:t.serverInfo.validInstancePaths?.length?t.serverInfo.validInstancePaths[0]:void 0},this.submit=this.submit.bind(this)}addError(e){this.setState((t=>{const a=Array.from(t.errors);return a.push(e),{errors:a}}))}render(){if(this.state.loading)return n.createElement(f.Z,{text:"view.instance.create.loading"});const e=this.context.serverInfo.validInstancePaths;return n.createElement("div",{className:"text-center"},this.state.errors.map(((e,t)=>{if(e)return n.createElement(h.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const a=Array.from(e.errors);return a[t]=void 0,{errors:a}}))})})),n.createElement("h3",null,n.createElement(c.Z,{id:"view.instance.create.title"})),n.createElement(i.Z,{onSubmit:this.submit},n.createElement(s.Z,{className:"mx-auto",lg:5,md:8},n.createElement(i.Z.Group,{controlId:"name"},n.createElement(i.Z.Label,null,n.createElement("h5",null,n.createElement(c.Z,{id:"view.instance.create.name"}))),n.createElement(i.Z.Control,{type:"text",onChange:e=>{const t=e.target.value;this.setState({instanceName:t})},value:this.state.instanceName,required:!0})),n.createElement(i.Z.Group,{controlId:"path"},n.createElement(i.Z.Label,null,n.createElement("h5",null,n.createElement(c.Z,{id:"view.instance.create.path"}))),n.createElement(l.Z,{className:"mb-1"},null!=e?n.createElement(l.Z.Prepend,{className:"flex-grow-1 flex-grow-md-0"},n.createElement(l.Z.Text,null,n.createElement("span",null,n.createElement(c.Z,{id:"view.instance.create.path.prefix"}))),n.createElement(i.Z.Control,{className:"rounded-0 flex-grow-1 flex-grow-md-0 flex-shrink-0 flex-shrink-md-1 w-auto",as:"select",custom:!0,required:!0,onChange:e=>{this.setState({prefix:e.target.value})}},e.map((e=>n.createElement("option",{key:e,value:e,selected:this.state.prefix==e},e,"/"))))):null,n.createElement(i.Z.Control,{type:"text",className:"flex-grow-1 w-100 w-md-auto",required:!0,onChange:e=>{const t=e.target.value;this.setState({instancePath:t})},value:this.state.instancePath}))),n.createElement(r.Z,{type:"submit",variant:"success"},n.createElement(c.Z,{id:"view.instance.create.submit"})))))}async submit(){if(!this.state.instancePath)return;const e=(this.state.prefix?this.state.prefix+"/":"")+this.state.instancePath;this.setState({loading:!0});const t=await u.Z.createInstance({name:this.state.instanceName,path:e});if(t.code===m.G.ERROR)return this.setState({loading:!1}),void this.addError(t.error);p.Mq.selectedinstanceid=t.payload.id,this.props.history.push(p.$w.instancelist.link??p.$w.instancelist.route)}}E.contextType=d.f,t.default=(0,o.EN)(E)},2318:function(e,t,a){var n=a(3366),r=a(7462),s=a(4184),i=a.n(s),l=a(7294),c=a(4680),o=a(6792),u=["bsPrefix","size","hasValidation","className","as"],m=(0,c.Z)("input-group-append"),d=(0,c.Z)("input-group-prepend"),p=(0,c.Z)("input-group-text",{Component:"span"}),h=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.size,c=e.hasValidation,m=e.className,d=e.as,p=void 0===d?"div":d,h=(0,n.Z)(e,u);return a=(0,o.vE)(a,"input-group"),l.createElement(p,(0,r.Z)({ref:t},h,{className:i()(m,a,s&&a+"-"+s,c&&"has-validation")}))}));h.displayName="InputGroup",h.Text=p,h.Radio=function(e){return l.createElement(p,null,l.createElement("input",(0,r.Z)({type:"radio"},e)))},h.Checkbox=function(e){return l.createElement(p,null,l.createElement("input",(0,r.Z)({type:"checkbox"},e)))},h.Append=m,h.Prepend=d,t.Z=h}}]);
//# sourceMappingURL=56.1e1be832fc45b3530720.bundle.js.map