"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[480],{2480:function(e,n,t){var r=t(653),a=t(6846),o=t(3803),i=t(5631),s=t(7626),d=t(7961);n.Z=new class extends r.S{get cachedAdminInfo(){return this._cachedAdminInfo}constructor(){super(),this._cachedAdminInfo=void 0,this.loadingAdminInfo=!1,i.Z.on("purgeCache",(()=>{this._cachedAdminInfo=void 0}))}async getAdminInfo(){if(await i.Z.wait4Init(),this._cachedAdminInfo)return this._cachedAdminInfo;if(this.loadingAdminInfo)return await new Promise((e=>{const n=t=>{e(t),this.removeListener("loadAdminInfo",n)};this.on("loadAdminInfo",n)}));let e;this.loadingAdminInfo=!0;try{e=await i.Z.apiClient.administration.administrationControllerRead()}catch(e){const n=new o.Z({code:o.G.ERROR,error:e});return this.emit("loadAdminInfo",n),this.loadingAdminInfo=!1,n}switch(e.status){case 200:{const n=new o.Z({code:o.G.OK,payload:e.data});return this._cachedAdminInfo=n,this.emit("loadAdminInfo",n),this.loadingAdminInfo=!1,n}case 424:{const n=e.data,t=new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_GITHUB_RATE,{errorMessage:n},e)});return this.emit("loadAdminInfo",t),this.loadingAdminInfo=!1,t}case 429:{const n=e.data,t=new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_GITHUB_ERROR,{errorMessage:n},e)});return this.emit("loadAdminInfo",t),this.loadingAdminInfo=!1,t}default:{const n=new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.UNHANDLED_RESPONSE,{axiosResponse:e},e)});return this.emit("loadAdminInfo",n),this.loadingAdminInfo=!1,n}}}async restartServer(){let e;await i.Z.wait4Init();try{e=await i.Z.apiClient.administration.administrationControllerDelete()}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(e.status){case 204:return new o.Z({code:o.G.OK,payload:null});case 422:{const n=e.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_WATCHDOG_UNAVAIL,{errorMessage:n},e)})}default:return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.UNHANDLED_RESPONSE,{axiosResponse:e},e)})}}async updateServer(e){let n;await i.Z.wait4Init();try{n=await i.Z.apiClient.administration.administrationControllerUpdate({newVersion:e})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(n.status){case 202:return new o.Z({code:o.G.OK,payload:null});case 410:{const e=n.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_VERSION_NOT_FOUND,{errorMessage:e},n)})}case 422:{const e=n.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_WATCHDOG_UNAVAIL,{errorMessage:e},n)})}case 424:{const e=n.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_GITHUB_RATE,{errorMessage:e},n)})}case 429:{const e=n.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_GITHUB_ERROR,{errorMessage:e},n)})}default:return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})}}async getLogs({page:e=1,pageSize:n=d.ZP.itemsperpage.value}){let t;await i.Z.wait4Init();try{t=await i.Z.apiClient.administration.administrationControllerListLogs({pageSize:n,page:e})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 200:return new o.Z({code:o.G.OK,payload:t.data});case 409:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_LOGS_IO_ERROR,{errorMessage:e},t)})}default:return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}async getLog(e){let n;await i.Z.wait4Init();try{n=await i.Z.apiClient.administration.administrationControllerGetLog(e)}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(n.status){case 200:{const e=n.data,t=await s.Z.Download(e.fileTicket);if(t.code===o.G.OK){const n=Object.assign({content:await t.payload.text()},e);return new o.Z({code:o.G.OK,payload:n})}return new o.Z({code:o.G.ERROR,error:t.error})}case 409:{const e=n.data;return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.ADMIN_LOGS_IO_ERROR,{errorMessage:e},n)})}default:return new o.Z({code:o.G.ERROR,error:new a.ZP(a.jK.UNHANDLED_RESPONSE,{axiosResponse:n},n)})}}}}}]);
//# sourceMappingURL=480.c61fdbeb33641d57e048.bundle.js.map